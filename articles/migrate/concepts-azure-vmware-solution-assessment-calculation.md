---
title: Azure Migrate에서 AVS 평가 계산 | Microsoft Docs
description: Azure Migrate 서비스의 AVS 평가 계산에 대한 개요를 제공합니다.
author: rashi-ms
ms.author: rajosh
ms.manager: abhemraj
ms.topic: conceptual
ms.date: 06/25/2020
ms.openlocfilehash: b55f0562ae08a6e5a6b38bd0b6fc9f781b94ab64
ms.sourcegitcommit: 3ee3045f6106175e59d1bd279130f4933456d5ff
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/31/2021
ms.locfileid: "106078692"
---
# <a name="assessment-overview-migrate-to-azure-vmware-solution"></a>평가 개요(Azure VMware Solution으로 마이그레이션)

[Azure Migrate](migrate-services-overview.md)는 온-프레미스 앱과 워크로드의 검색, 평가, 마이그레이션을 추적할 수 있는 중앙 허브를 제공합니다. 또한, 프라이빗 및 퍼블릭 클라우드 인스턴스를 Azure로 추적합니다. 이 허브는 평가 및 마이그레이션에 사용되는 Azure Migrate 도구뿐만 아니라 타사 ISV(독립 소프트웨어 공급업체) 제품도 제공합니다.

Azure Migrate의 검색 및 평가 도구는 Azure 가상 머신 및 AVS(Azure VMware Solution)로 마이그레이션하기 위해 온-프레미스 서버를 평가합니다. 이 문서에서는 AVS(Azure VMware Solution) 평가를 계산하는 방법에 대한 정보를 제공합니다.

> [!NOTE]
> AVS(Azure VMware Solution) 평가는 VMware VM에 대해서만 만들 수 있습니다.

## <a name="types-of-assessments"></a>평가 형식

Azure Migrate를 사용하여 만든 평가는 데이터의 특정 시점 스냅샷입니다. Azure Migrate:

**평가 유형** | **세부 정보**
--- | --- 
**Azure VM** | 온-프레미스 서버를 Azure 가상 머신으로 마이그레이션하기 위한 평가. 이 평가 형식을 사용하여 Azure VM으로 마이그레이션하기 위한 [VMware](how-to-set-up-appliance-vmware.md) 및 [Hyper-V](how-to-set-up-appliance-hyper-v.md) 환경과 [물리적 서버](how-to-set-up-appliance-physical.md)에서 의 온-프레미스 서버를 평가할 수 있습니다.
**Azure SQL** | 온-프레미스 SQL Server를 VMware 환경에서 Azure SQL Database 또는 Azure SQL Managed Instance로 마이그레이션하기 위한 평가.
**AVS(Azure VMware 솔루션)** | 온-프레미스 서버를 [AVS(Azure VMware 솔루션)](../azure-vmware/introduction.md)로 마이그레이션하기 위한 평가. 이 평가 유형을 사용하여 AVS(Azure VMware 솔루션)로 마이그레이션하기 위한 온-프레미스 [VMware VM](how-to-set-up-appliance-vmware.md)을 평가할 수 있습니다. [자세히 알아보기](concepts-azure-vmware-solution-assessment-calculation.md)

> [!NOTE]
> 검색 및 평가 도구에서 Azure VM의 수 또는 AVS 평가가 잘못된 경우, 총 평가 수를 클릭하여 모든 평가로 이동하고 Azure VM 또는 AVS 평가를 다시 계산합니다. 그러면 검색 및 평가 도구에 해당 평가 형식에 대한 올바른 개수가 표시됩니다. 

AVS(Azure VMware Solution) 평가는 다음과 같은 두 가지 크기 조정 기준 옵션을 제공합니다.

| **평가** | **세부 정보** | **Data** |
| - | - | - |
| **성능 기반** | 온-프레미스 VM의 수집된 성능 데이터를 기준으로 하는 평가. | **권장 Node 크기**: 평가를 위해 선택하는 노드 유형, 스토리지 유형, FTT 설정과 함께 CPU 및 메모리 사용률 데이터를 기준으로 합니다. |
| **온-프레미스로** | 온-프레미스 크기 조정을 기반으로 하는 평가 | **권장 Node 크기**: 평가를 위해 선택하는 노드 형식, 스토리지 유형 및 FTT 설정과 함께 온-프레미스 VM 크기를 기준으로 합니다. |

## <a name="how-do-i-run-an-assessment"></a>평가를 어떻게 실행할까요?

평가를 실행하는 방법에는 몇 가지가 있습니다.

- 경량 Azure Migrate 어플라이언스에서 수집한 서버 메타데이터를 사용하여 서버를 평가합니다. 어플라이언스는 온-프레미스 서버를 검색합니다. 그런 다음 서버 메타데이터 및 성능 데이터를 Azure Migrate에 보냅니다. 이렇게 하면 정밀도가 개선됩니다.
- 쉼표로 구분된 값(CSV) 형식으로 가져온 서버 메타데이터를 사용하여 서버를 평가합니다.

## <a name="how-do-i-assess-with-the-appliance"></a>어플라이언스를 어떻게 사용하여 평가할까요?

온-프레미스 서버를 발견하기 위해 Azure Migrate 어플라이언스를 배포하는 경우 다음 단계를 수행합니다.

1. Azure Migrate와 함께 사용할 Azure 및 온-프레미스 환경을 설정합니다.
2. 첫 평가를 위해 Azure 프로젝트를 만들고 검색 및 평가 도구를 추가합니다.
3. 경량 Azure Migrate 어플라이언스를 배포합니다. 이 어플라이언스는 지속해서 온-프레미스 서버를 검색하고 서버 메타데이터 및 성능 데이터를 Azure Migrate에 보냅니다. VM으로 어플라이언스를 배포합니다. 평가하려는 서버에는 아무것도 설치할 필요가 없습니다.

어플라이언스가 서버 검색을 시작한 후에는 평가하려는 서버를 그룹으로 수집하고 평가 형식이 **AVS(Azure VMware Solution)** 인 그룹에 대한 평가를 실행할 수 있습니다.

[여기](how-to-create-azure-vmware-solution-assessment.md)에 나와 있는 단계를 수행하여 첫 번째 AVS(Azure VMware Solution) 평가를 만듭니다.

## <a name="how-do-i-assess-with-imported-data"></a>어떻게 가져온 데이터로 평가할까요?

CSV 파일을 사용하여 서버를 평가하는 경우에는 어플라이언스가 필요하지 않습니다. 대신 다음 단계를 수행합니다.

1. Azure Migrate를 사용할 수 있도록 Azure를 설정합니다.
2. 첫 평가를 위해 Azure 프로젝트를 만들고 검색 및 평가 도구를 추가합니다.
3. CSV 템플릿을 다운로드하고 서버 데이터를 추가합니다.
4. 템플릿을 Azure Migrate로 가져옵니다.
5. 가져오기를 사용하여 추가된 서버를 발견하고, 그룹에 수집하고, 평가 형식이 **AVS(Azure VMware Solution)** 인 그룹에 대한 평가를 실행합니다.

## <a name="what-data-does-the-appliance-collect"></a>어플라이언스는 어떤 데이터를 수집하나요?

평가에 Azure Migrate 어플라이언스를 사용하는 경우 [VMware](migrate-appliance.md#collected-data---vmware)를 위해 수집된 메타데이터 및 성능 데이터에 대해 알아봅니다.

## <a name="how-does-the-appliance-calculate-performance-data"></a>어플라이언스는 어떻게 성능 데이터를 계산하나요?

검색을 위해 어플라이언스를 사용하는 경우 다음 단계를 통해 계산 설정에 대한 성능 데이터를 수집합니다.

1. 어플라이언스는 실시간 샘플 포인트를 수집합니다.

   - **VMware VM**: 샘플 포인트는 20초마다 수집됩니다.
2. 어플라이언스는 샘플 포인트를 결합하여 10분마다 단일 데이터 요소를 만듭니다. 데이터 요소를 만들기 위해 어플라이언스는 모든 샘플에서 최곳값을 선택합니다. 그런 다음 데이터 요소를 Azure로 보냅니다.
3. Azure Migrate는 지난달의 모든 10분 데이터 요소를 저장합니다.
4. 평가를 만들 때 평가는 적절한 크기 조정에 사용할 적절한 데이터 요소를 식별합니다. 식별은 *성능 기록* 및 *백분위수 사용률* 에 대한 백분위수 값을 기준으로 합니다.

   - 예를 들어 성능 기록이 1주이고 백분위수 사용률이 95번째 백분위수인 경우, 평가는 지난주에 대한 10분 샘플 포인트를 정렬합니다. 오름차순으로 정렬하고 적절한 크기 조정의 95번째 백분위수 값을 선택합니다.
   - 95번째 백분위수 값은 99번째 백분위수 값을 선택할 때 포함될 수 있는 모든 이상값을 무시합니다.
   - 해당 기간의 최대 사용량을 선택하고 이상값을 누락하지 않으려면 백분위수 사용률로 99번째 백분위수를 선택해야 합니다.
5. 이 값은 어플라이언스가 수집하는 다음과 같은 메트릭을 위해 유효한 성능 사용률 데이터를 얻고자 쾌적 인자를 곱한 값입니다.

   - CPU 사용률
   - RAM 사용률

다음 성능 데이터는 수집되지만, AVS 평가를 위한 크기 조정 권장 사항에는 사용되지 않습니다.

- VM에 연결된 모든 디스크에 대한 디스크 IOPS 및 처리량 데이터.
- VM에 연결된 각 네트워크 어댑터에 대한 성능 기반 크기 조정을 처리하는 네트워크 I/O.

## <a name="how-are-avs-assessments-calculated"></a>AVS 평가는 어떻게 계산되나요?

AVS 평가에서는 온-프레미스 서버의 메타데이터 및 성능 데이터를 사용하여 평가를 계산합니다. Azure Migrate 어플라이언스를 배포하는 경우 평가는 어플라이언스에서 수집하는 데이터를 사용합니다. 그러나 CSV 파일을 사용하여 가져온 평가를 실행하는 경우 계산을 위한 메타데이터를 제공합니다.

계산은 다음 세 단계에서 발생합니다.

1. **AVS(Azure VMware Solution) 준비 상태 계산**: 온-프레미스 VM이 AVS(Azure VMware Solution)로 마이그레이션하는 데 적합한지 여부입니다.
2. **모든 노드에서 AVS 노드의 수 및 사용률 계산**: VMware VM을 실행하는 데 필요하다고 예상되는 AVS 노드 수와 모든 노드에서 예상되는 CPU, 메모리, 스토리지 활용률입니다.
3. **월별 예상 비용**: 온-프레미스 VM을 실행하는 모든 AVS(Azure VMware Solution) 노드에 대한 월별 예상 비용입니다.

계산은 선행 순으로 진행합니다. 서버는 이전 단계를 통과하는 경우에만 이후 단계로 이동합니다. 예를 들어 서버가 AVS 준비 상태 단계에 실패하면 Azure에 적합하지 않은 것으로 표시됩니다. 해당 서버에 대한 크기 조정 및 비용 계산은 하지 않습니다.

## <a name="whats-in-an-azure-vmware-solution-avs-assessment"></a>AVS(Azure VMware Solution) 평가에는 무엇이 포함되어 있나요?

다음은 AVS 평가에 포함된 요소입니다.

| **속성** | **세부 정보** |
| - | - |
| **대상 위치** | 마이그레이션할 AVS 프라이빗 클라우드 위치를 지정합니다. |
| **스토리지 유형** | AVS에서 사용할 스토리지 엔진을 지정합니다. 현재 AVS는 현재 vSAN을 기본 스토리지 형식으로만 지원하지만, 추가 스토리지 옵션이 로드맵에 따라 제공될 예정입니다. |
| **RI(예약 인스턴스)** | 이 속성을 사용하면 AVS의 예약된 인스턴스를 구매한 경우 인스턴스를 지정하고 인스턴스의 기간을 지정할 수 있습니다. 비용을 계산하는 데 사용됩니다. |
| **Node 형식** | Azure에서 사용되는 [AVS Node 형식](../azure-vmware/concepts-private-clouds-clusters.md)을 지정합니다. 기본 노드 유형은 AV36입니다. 나중에 더 많은 노드 형식을 사용할 수 있습니다.  Azure Migrate는 VM을 AVS로 마이그레이션하는 데 필요한 노드의 수를 추천합니다. |
| **FTT 설정, RAID 수준** | 허용 및 Raid 조합에 유효한 실패 조합을 지정합니다. 선택한 FTT 옵션은 RAID 수준 및 온-프레미스 VM 디스크 요구 사항과 결합되어 AVS에 필요한 총 vSAN 스토리지 크기를 결정합니다. 계산 후 사용 가능한 총 스토리지는 a) vCenter와 같은 관리 개체에 예약된 공간을 포함하고 b) vSAN 작업에 필요한 25% 스토리지 Slack을 포함합니다. |
| **크기 조정 기준** | AVS 노드의 메모리, CPU, 스토리지 요구 사항을 확인하는 데 사용할 조건을 설정합니다. ‘성능 기반’ 크기 조정을 선택하거나, 성능 기록을 고려하지 않고 ‘온-프레미스로’ 크기를 조정할 수 있습니다.  간단히 리프트 앤 시프트하려면 온-프레미스로 선택합니다. 사용량 기반 크기 조정을 원하면 성능 기반을 선택합니다. |
| **성능 기록** | 서버의 성능 데이터를 평가하는 데 고려할 기간을 설정합니다. 이 속성은 크기 조정 기준이 ‘성능 기반’인 경우에만 적용됩니다. |
| **백분위 수 사용률** | 적정 크기를 산정하는 데 고려되는 성능 샘플 집합의 백분위수 값을 지정합니다. 이 속성은 크기 조정이 성능 기반인 경우에만 적용됩니다. |
| **쾌적 인자** | Azure Migrate는 평가 중에 버퍼(쾌적 인자)를 고려합니다. 이 버퍼는 VM(CPU, 메모리, 디스크)의 서버 사용률 데이터에 추가로 적용됩니다. 쾌적 인자는 계절별 사용량, 성능 기록 부족, 향후 사용량 증가 가능성 등의 문제를 고려합니다. 예를 들어 사용률이 20%인 10코어 VM은 일반적으로 2코어 VM이라는 결과가 나옵니다. 그러나 쾌적 인자가 2.0x이면 결과는 4코어 VM이 됩니다. |
| **제품** | 사용자가 등록한 [Azure 제품](https://azure.microsoft.com/support/legal/offer-details/)이 표시됩니다. Azure Migrate는 그에 따라 비용을 예측합니다. |
| **통화** | 계정의 청구 통화를 보여줍니다. |
| **할인(%)** | Azure 제품에 적용되는 구독별 할인을 보여줍니다. 기본 설정은 0%입니다. |
| **Azure 하이브리드 혜택** | 소프트웨어 보증이 있고 [Azure 하이브리드 혜택](https://azure.microsoft.com/pricing/hybrid-use-benefit/)을 받을 수 있는지를 지정합니다. 이는 노드 기반 가격으로 인한 Azure VMware Solution 가격 책정에는 영향을 주지 않지만, 고객은 Azure 하이브리드 혜택을 사용하여 온-프레미스 OS 또는 SQL 라이선스(Microsoft 기반)를 AVS에 계속해서 적용할 수 있습니다. 다른 소프트웨어 OS 공급업체는 RHEL과 같은 고유한 라이선스 용어를 제공해야 합니다. |
| **vCPU 초과 구독** | AVS 노드에서 하나의 물리적 코어에 연결된 가상 코어 수의 비율을 지정합니다. 계산의 기본값은 vCPU 4개: AVS의 실제 코어 1개입니다. API 사용자는 이 값을 정수로 설정할 수 있습니다. vCPU 초과 구독 > 4:1은 CPU 사용량에 따라 워크로드에 영향을 줄 수 있습니다. 크기를 조정할 때 항상 선택한 코어의 사용률이 100%이라고 가정합니다. |
| **메모리 오버 커밋 비율** | 클러스터의 메모리 오버 커밋 비율을 지정합니다. 값 1은 100% 메모리 사용을 나타내고(예를 들어 0.5은 50%), 2는 사용 가능한 메모리의 200%를 사용합니다. 0\.5부터 10까지의 값만 최대 소수점 이하 한 자리까지 추가할 수 있습니다. |
| **중복 제거 및 압축 비율** | 워크로드에 대해 예상되는 중복 제거와 압축 비율을 지정합니다. 실제 값은 온-프레미스 vSAN 또는 스토리지 구성에서 가져올 수 있으며 이는 워크로드에 따라 다를 수 있습니다. 값 3은 3배를 의미하므로 300GB 디스크의 경우 100GB 스토리지만 사용됩니다. 값 1은 중복 제거 또는 압축이 없음을 의미합니다. 1부터 10까지의 값만 최대 소수점 이하 한 자리까지 추가할 수 있습니다. |

## <a name="azure-vmware-solution-avs-suitability-analysis"></a>AVS(Azure VMware Solution) 적합성 분석

AVS 평가는 서버 속성을 검토하여 각 온-프레미스 VM의 AVS 적합성을 평가합니다. 또한, 평가된 서버를 각각 다음 적합성 범주 중 하나에 할당합니다.

- **AVS 준비 완료**: 서버를 변경하지 않고 있는 그대로 Azure AVS로 마이그레이션할 수 있습니다. 서버는 AVS에서 시작되며, AVS가 완전히 지원됩니다.
- **조건과 함께 준비 완료**: AVS에서 VM에 대한 모든 기능을 사용할 수 있으려면 VM에서 먼저 VMware 도구 및 또는 기타 설정이 필요할 뿐만 아니라 현재 vSphere 버전과의 호환성 문제가 발생할 수 있습니다.
- **AVS를 사용할 준비 안 됨**: AVS에서 VM이 시작되지 않습니다. 예를 들어, 온-프레미스 VMware VM에 cd-rom과 같은 연결된 외부 디바이스가 있는 경우 VMware VMotion 작업은 실패합니다(VMware VMotion을 사용하는 경우).
- **준비 상태 알 수 없음**: 온-프레미스 환경에서 수집된 메타데이터가 부족하여 Azure Migrate에서 서버 준비 상태를 확인할 수 없습니다.

평가에서는 서버 속성을 검토하여 온-프레미스 서버의 Azure 준비 상태를 확인합니다.

### <a name="server-properties"></a>서버 속성

평가는 온-프레미스 VM의 다음 속성을 검토하여 AVS(Azure VMware Solution)에서 실행할 수 있는지 확인합니다.

| **속성** | **세부 정보** | **AVS 준비 상태** |
| - | - | - |
| **인터넷 프로토콜** | Azure는 현재 종단 간 IPv6 인터넷 주소 지정을 지원하지 않습니다. 서버가 IPv6를 통해 검색되는 경우 수정 참고 자료는 로컬 MSFT AVS GBB 팀에 문의하세요. | 조건부 준비 완료된 인터넷 프로토콜 |

### <a name="guest-operating-system"></a>게스트 운영 체제

현재, AVS 평가는 적합성 분석의 일환으로 운영 체제를 검토하지 않습니다. 온-프레미스 VM에서 실행되는 모든 운영 체제는 AVS(Azure VMware Solution)에서 실행될 가능성이 높습니다.

VM 속성과 함께 평가는 서버의 게스트 운영 체제를 확인하여 Azure에서 실행될 수 있는지 확인합니다.

## <a name="sizing"></a>크기 조정

서버를 AVS 준비 완료로 표시한 후에는, AVS 평가에서 적절한 온-프레미스 VM 요구 사항을 식별하고 필요한 총 AVS 노드 수를 검색하는 노드 크기 조정 권장 사항을 만듭니다. 해당 권장 사항은 지정된 평가 속성에 따라 달라집니다.

- 평가에서 *성능 기반 크기 조정* 을 사용하는 경우 Azure Migrate는 서버의 성능 기록을 사용하여 AVS에 적절한 크기 조정 권장 사항을 만드는 것으로 간주합니다. 이 방법은 특히 온-프레미스 VM을 초과 할당하지만 사용률이 낮을 경우, 비용을 절감하기 위해 AVS VM의 크기를 적절히 조정하려는 경우에 특히 유용합니다. 이 방법은 마이그레이션하는 동안 크기를 최적화하는 데 도움이 됩니다.
- VM 크기 조정에 대한 성능 데이터를 고려하지 않고 온-프레미스 서버를 있는 그대로 AVS에 옮기려는 경우, 크기 조정 기준을 * 온-프레미스와 같이*로 설정할 수 있습니다. 그런 다음 평가는 사용률 데이터를 고려하지 않고 온-프레미스 구성에 따라 VM의 크기를 조정합니다.

### <a name="ftt-sizing-parameters"></a>FTT 크기 조정 매개 변수

AVS에서 사용된 스토리지 엔진은 vSAN입니다. vSAN 스토리지 정책은 서버 스토리지 요구 사항을 정의합니다. 이러한 정책은 VM에 스토리지를 할당하는 방법을 결정하기 때문에 VM에 필요한 서비스 수준을 보장합니다. 다음은 사용 가능한 FTT-Raid 조합입니다.

| **FTT(허용 실패)** | **RAID 구성** | **필요한 최소 호스트** | **크기 조정 고려 사항** |
| - | - | - | - |
| 1 | RAID-1(미러링) | 3 | 100GB VM은 200GB를 사용합니다. |
| 1 | RAID-5(이레이져 코딩) | 4 | 100GB VM은 133.33GB를 사용합니다. |
| 2 | RAID-1(미러링) | 5 | 100GB VM은 300GB를 사용합니다. |
| 2 | RAID-6(이레이져 코딩) | 6 | 100GB VM은 150GB를 사용합니다. |
| 3 | RAID-1(미러링) | 7 | 100GB VM은 400GB를 사용합니다. |

### <a name="performance-based-sizing"></a>성능 기반 크기 조정

성능 기반 크기 조정의 경우 Azure Migrate 어플라이언스는 온-프레미스 환경을 프로파일링하여 CPU, 메모리, 디스크에 대한 성능 데이터를 수집합니다. 따라서 AVS의 성능 기반 크기 조정 시 할당된 디스크 공간을 고려하고 메모리와 CPU의 선택한 백분위수 사용률을 사용합니다. 예를 들어 VM에 4vCore가 할당되어 있지만 25%만 사용하는 경우, AVS는 해당 VM용 1vCore에 대해 크기를 조정합니다.

**성능 데이터 수집 단계:**

1. VMware VM의 경우 Azure Migrate 어플라이언스는 20초 간격마다 실시간 샘플 포인트를 수집합니다.
2. 어플라이언스는 10분마다 수집된 샘플 포인트를 롤업하고 최근 10분 동안의 최댓값을 Azure Migrate로 보냅니다.
3. Azure Migrate는 지난 한 달 동안의 10분 샘플 포인트를 모두 저장합니다. 그런 다음 *성능 기록* 및 *백분위수 사용률* 에 대해 지정된 평가 속성에 따라 올바른 크기 조정에 사용할 적절한 데이터 요소를 식별합니다. 예를 들어 성능 기록이 1일로 설정되고 백분위수 사용률이 95번째 백분위수인 경우 Azure Migrate는 지난 1일 동안의 10분 샘플 포인트를 사용하고, 오름차순으로 정렬하고, 적절한 크기 조정을 위한 95번째 백분위수 값을 선택합니다.
4. 이 값에 쾌적 인자를 곱하여 어플라이언스에서 수집하는 각 메트릭(CPU 사용률 및 메모리 사용률)의 유효한 성능 사용률 데이터를 얻습니다.

유효한 사용률 값이 결정되면 스토리지, 네트워크, 컴퓨팅 크기 조정은 다음과 같이 처리됩니다.

**스토리지 크기 조정**: Azure Migrate은 모든 온-프레미스 VM 디스크 공간을 계산 매개 변수로 사용하여 고객이 선택한 FTT 설정 외에도 AVS vSAN 스토리지 요구 사항을 확인합니다. FTT - FTT 옵션당 최소 노드 수를 요구할 뿐 아니라 허용하지 못하는 경우 VM 디스크 요구 사항과 결합된 총 vSAN 스토리지 수를 결정합니다. 스토리지 사용률은 현재 고려되지 않으며 논리는 VM당 할당된 스토리지만 확인합니다.

**네트워크 크기 조정**: AVS 평가는 현재 네트워크 설정을 고려하지 않습니다.

**컴퓨팅 크기 조정**: 스토리지 요구 사항을 계산한 후 AVS 평가는 CPU 및 메모리 요구 사항을 고려하여 노드 형식을 기반으로 AVS에 필요한 노드 수를 결정합니다.

- AVS 평가는 크기 조정 기준에 따라 성능 기반 VM 데이터 또는 온-프레미스 VM 구성 중 하나를 확인합니다. 쾌적 인자를 설정하면 클러스터의 증가율을 지정할 수 있습니다. 현재는 기본적으로 하이퍼스레딩이 사용하도록 설정되어 있으므로 36 코어 노드에 72개의 vCore가 있습니다. 물리적인 4개의 vCore는 클러스터 가용성을 손상시키지 않고 유지 관리 또는 실패를 처리할 수 있도록 80%의 사용률을 초과하지 않는 VMware 표준을 사용하여 클러스터당 CPU 임계값을 결정하는 데 사용됩니다. 현재는 구독 초과 값을 변경하는 데 사용할 수 있는 재정의가 없지만, 이후 버전에서는 제공될 수도 있습니다.

### <a name="as-on-premises-sizing"></a>온-프레미스로 크기 조정

*온-프레미스 크기 조정* 을 사용하는 경우, AVS 평가는 VM 및 디스크의 성능 기록을 고려하지 않습니다. 대신, 온-프레미스에 할당된 크기에 따라 AVS 노드를 할당합니다. 기본 스토리지 형식은 AVS의 vSAN입니다.

Azure VMware Solution 평가를 검토하는 방법에 대한 [자세한 정보](./tutorial-assess-vmware-azure-vmware-solution.md#review-an-assessment).

### <a name="cpu-utilization-on-avs-nodes"></a>AVS 노드의 CPU 사용률

CPU 사용률은 사용 가능한 코어를 100% 사용한다고 가정합니다. 필요한 노드 수를 줄이려면 워크로드 특성 및 온-프레미스 환경에 따라 초과 구독을 4:1에서 6:1까지 늘릴 수 있습니다. 디스크의 경우와 달리, AVS는 CPU 사용률에 대한 제한을 두지 않으며, 클러스터 성능을 최적화하여 "핫 실행"이 필요할 때 적절하게 조정하는 것은 고객의 역할입니다. 추가로 증가하게 하려면 초과 구독을 줄이거나 증가율 값을 늘립니다.

또한, CPU 사용률에는 이미 vCenter, NSX Manager, 기타 더 작은 리소스의 관리 오버헤드를 위한 계정도 있습니다.

### <a name="memory-utilization-on-avs-nodes"></a>AVS 노드의 메모리 사용률

메모리 사용률은 서버 또는 워크로드의 모든 노드와 요구 사항의 총 메모리를 표시합니다. 메모리는 초과 구독될 수 있으며, 이번에도 AVS는 제한을 두지 않으며, 워크로드의 클러스터 성능을 최적화하는 것은 고객의 역할입니다.

메모리 사용률에는 이미 vCenter, NSX Manager, 기타 더 작은 리소스의 관리 오버헤드를 위한 계정도 있습니다.

### <a name="storage-utilization-on-avs-nodes"></a>AVS 노드의 스토리지 사용률

스토리지 사용률은 다음 순서에 따라 계산됩니다.

1. VM에 필요한 크기(배정된 그대로 또는 성능 기반의 사용된 공간)
2. 증가율이 있는 경우 적용
3. 관리 오버헤드를 추가하고 FTT 비율 적용
4. 중복 제거 및 압축 비율 적용
5. vSAN에 필요한 25% Slack 적용
6. 관리 오버헤드를 포함하여 총 스토리지에서 VM에 사용할 수 있는 스토리지.

3개 노드 클러스터에서 사용 가능한 스토리지는 기본 스토리지 정책(Raid-1)을 기반으로 하며, 씩 프로비저닝을 사용합니다. 예를 들어 이레이저 코딩 또는 Raid-5를 계산할 때 최소 4개의 노드가 필요합니다. AVS에서 스토리지 정책은 관리자가 더 많은 공간을 허용하도록 변경해야 합니다.

## <a name="confidence-ratings"></a>신뢰 등급

Azure Migrate의 각 성능 기반 평가는 별 1개(가장 낮음)~별 5개(가장 높음)의 신뢰 등급과 관련되어 있습니다.

- 신뢰 등급은 평가 컴퓨팅에 필요한 데이터 요소의 가용성에 따라 평가에 할당됩니다.
- 평가의 신뢰 등급은 Azure Migrate에서 제공하는 권장 크기의 신뢰성을 추정하는 데 도움이 됩니다.
- 신뢰 등급은 ‘온-프레미스’ 평가로 적용되지 않습니다.
- 성능 기반 크기 조정의 경우 AVS 평가에는 CPU 및 VM 메모리의 사용률 데이터가 필요합니다. 다음 데이터가 수집되지만, AVS를 위한 크기 조정 권장 사항에는 사용되지 않습니다.

  - VM에 연결된 모든 디스크에 대한 디스크 IOPS 및 처리량 데이터.
  - VM에 연결된 각 네트워크 어댑터에 대한 성능 기반 크기 조정을 처리하는 네트워크 I/O.

  해당 사용률 수를 vCenter Server에서 사용할 수 없는 경우, 크기 권장 사항의 신뢰성이 떨어질 수 있습니다.

사용 가능한 데이터 요소의 백분율에 따라 평가의 신뢰 등급은 다음과 같습니다.

| **데이터 요소 가용성** | **신뢰 등급** |
| - | - |
| 0-20% | 별 1개 |
| 21-40% | 별 2개 |
| 41-60% | 별 3개 |
| 61-80% | 별 4개 |
| 81-100% | 별 5개 |

### <a name="low-confidence-ratings"></a>낮은 신뢰 등급

여기에는 평가의 신뢰 등급이 낮아질 수 있는 이유가 나와 있습니다.

- 평가를 만드는 동안 환경을 프로파일링하지 않았습니다. 예를 들어 성능 기간을 1일로 설정하여 평가를 작성하는 경우 검색 시작 후 1일 이상 기다려야 모든 데이터 요소가 수집됩니다.
- 평가는 일부 또는 모든 VM의 성능 데이터를 평가 기간에 수집할 수 없습니다. 높은 신뢰 등급의 경우 다음을 확인하세요.

  - 평가 기간에 VM의 전원이 켜져 있는지 확인합니다.
  - 443 포트에서 아웃바운드 연결이 허용되는지 확인합니다.
  - Hyper-V VM의 경우 동적 메모리를 사용할 수 있습니다.

  신뢰 등급의 최신 변경 내용을 반영하려면 평가를 '다시 계산'하세요.
- 평가가 계산되는 기간에 일부 VM이 만들어졌습니다. 예를 들어 마지막 한 달의 성능 기록을 위한 평가를 만들려고 하는데, 일부 VM이 불과 일주일 전에 만들어졌습니다. 이 경우 새 VM의 성능 데이터를 전체 기간에 사용할 수 없으며 신뢰 등급이 낮아집니다.

> [!NOTE]
> 평가의 신뢰 등급이 별 5개 미만인 경우 어플라이언스가 환경을 프로파일링하도록 하루 이상 기다린 다음, 평가를 다시 계산하는 것이 좋습니다. 성능 기반 크기 조정이 안정적이지 않을 수도 있습니다. 이 경우 평가를 온-프레미스 크기 조정으로 전환하는 것이 좋습니다.

## <a name="monthly-cost-estimation"></a>월별 비용 예측

크기 조정 권장 구성이 완료된 후 Azure Migrate는 노드 가격에 필요한 AVS 노드 수를 곱하여 AVS에서 온-프레미스 워크로드를 실행하는 총비용을 계산합니다. VM당 비용은 평가의 VM 수로 총비용을 나누어 계산합니다.

- 계산은 필요한 노드 수, 노드 형식, 위치를 고려합니다.
- 모든 노드에서 비용을 집계하여 월별 총비용을 계산합니다.
- 비용은 평가 설정에 지정된 통화로 표시됩니다.

AVS(Azure VMware Solution) 가격 책정은 노드당 기준이므로 총비용에는 컴퓨팅 비용과 스토리지 비용이 할당되지 않습니다. [자세한 내용](../azure-vmware/introduction.md)

## <a name="migration-tool-guidance"></a>마이그레이션 도구 참고 자료

AVS(Azure VMware 솔루션) 평가에 대한 Azure 준비 상태 보고서에서 다음과 같은 권장 도구를 확인할 수 있습니다.

- **VMware HCX 또는 Enterprise**: VMware 서버의 경우 VMware HCX(하이브리드 클라우드 확장) 솔루션은 온-프레미스 워크로드를 AVS(Azure VMware Solution) 프라이빗 클라우드로 마이그레이션하는 데 제안되는 마이그레이션 도구입니다. [자세한 정보](../azure-vmware/tutorial-deploy-vmware-hcx.md).
- **알 수 없음**: CSV 파일을 통해 가져온 서버의 경우 기본 마이그레이션 도구를 알 수 없습니다. VMware 서버의 경우 VMWare HCX(하이브리드 클라우드 확장) 솔루션을 사용하는 것이 좋습니다.

## <a name="next-steps"></a>다음 단계

[AVS VMware VM을 위한 평가 만들기](how-to-create-azure-vmware-solution-assessment.md).
