---
title: 쿼리 및 인덱스 워크로드 용량 예측
titleSuffix: Azure Cognitive Search
description: Azure Cognitive Search에서 파티션 및 복제본 컴퓨터 리소스를 조정하고 이곳에서 각 리소스가 청구 가능한 검색 단위로 가격이 책정됩니다.
manager: nitinme
author: HeidiSteen
ms.author: heidist
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 01/15/2021
ms.openlocfilehash: d848c1ed1ab9d4cb24dec9423d93ec62ab45633b
ms.sourcegitcommit: f28ebb95ae9aaaff3f87d8388a09b41e0b3445b5
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/29/2021
ms.locfileid: "99537224"
---
# <a name="estimate-and-manage-capacity-of-an-azure-cognitive-search-service"></a>Azure Cognitive Search 서비스의 용량 예측 및 관리

[검색 서비스를 프로비저닝](search-create-service-portal.md)하고 특정 가격 책정 계층을 이용하기 전에 용량의 작동 방식과 워크로드 변동을 수용할 수 있도록 복제본 및 파티션을 조정하는 방법을 이해하는 것이 좋습니다.

용량은 [서비스 계층](search-sku-tier.md)의 기능으로, 서비스당 최대 저장소, 파티션당 최대 저장소 및 만들 수 있는 개체 수에 대한 최대 제한을 설정합니다. 기본 계층은 저장소 요구 사항이 가장 적당한 앱에 맞춰 설계되지만(하나의 파티션만) 고가용성 구성(복제본 3개)에서 실행할 수도 있습니다. 다른 계층은 특정 워크로드 또는 패턴(예: 다중 테넌시)에 맞춰 설계됩니다. 내부적으로 해당 계층에서 만든 서비스는 이러한 시나리오에 도움이 되는 하드웨어를 활용합니다.

Azure Cognitive Search의 확장성 아키텍처는 추가 쿼리 또는 인덱싱 파워가 필요한지 여부에 따라 용량을 변경할 수 있도록 복제본과 파티션의 유연한 조합을 기반으로 합니다. 서비스를 만든 후에는 복제본 또는 파티션 수를 독립적으로 늘리거나 줄일 수 있습니다. 각 추가 물리적 리소스에 대한 비용이 발생하지만 대규모 작업이 완료되면 규모를 줄여 비용을 줄일 수 있습니다. 계층과 조정 크기와 따라 용량을 늘리거나 줄이는 데는 15분에서 몇 시간이 걸릴 수 있습니다.

복제본 및 파티션의 할당을 조정할 때 Azure Portal을 사용하는 것이 좋습니다. 포털은 계층의 최대 제한 미만으로 유지하는 허용 가능한 조합에 대해 강제로 한도를 적용합니다. 하지만 스크립트 기반 또는 코드 기반 프로비저닝 접근 방식이 필요한 경우 [Azure PowerShell](search-manage-powershell.md) 또는 [Management REST API](/rest/api/searchmanagement/services)를 대신 사용할 수 있습니다.

## <a name="concepts-search-units-replicas-partitions-shards"></a>개념: 검색 단위, 복제본, 파티션, 분할

용량은 파티션과 복제본의 조합에 할당될 수 있는 검색 단위로 표현되며 기본 분할 메커니즘을 사용하여 유연한 구성을 지원합니다.

| 개념  | 정의|
|----------|-----------|
|검색 단위 | 사용 가능한 총 용량(36개 단위)의 단일 증분입니다. Azure Cognitive Search 서비스에 대한 청구 단위이기도 합니다. 서비스를 실행하려면 최소한 1개의 단위가 필요합니다.|
|*복제본* | 검색 서비스의 인스턴스로 쿼리 작업을 부하 분산하는 데 주로 사용됩니다. 각 복제본은 인덱스의 사본 하나를 호스트합니다. 3개의 복제본을 할당하는 경우 쿼리 요청을 처리하는 데 사용할 수 있는 인덱스의 복사본 3개가 있는 셈입니다.|
|*파티션* | 읽기/쓰기 작업(예: 인덱스를 다시 작성하거나 새로 고치는 경우)을 위한 실제 스토리지 및 I/O를 제공합니다. 각 파티션에는 전체 인덱스의 조각이 있습니다. 3개의 파티션을 할당하면 인덱스가 1/3로 나뉩니다. |
|분할 | 인덱스의 청크입니다. Azure Cognitive Search는 (새 검색 단위로 분할을 이동하여) 파티션 추가 프로세스 속도를 높이기 위해 각 검색 단위를 분할로 나눕니다.|

다음 다이어그램에서는 복제본, 파티션, 분할 및 검색 단위 간의 관계를 보여줍니다. 단일 인덱스가 2개의 복제본과 2개의 파티션이 있는 서비스에서 4개의 검색 단위에 걸쳐 존재하는 방법의 예를 보여줍니다. 4개의 각 검색 단위는 인덱스 분할의 절반만 저장합니다. 왼쪽 열에 있는 검색 단위는 분할의 첫 절반을 저장하여 첫 번째 파티션을 구성하고, 오른쪽 열은 분할의 나머지 절반을 저장하여 두 번째 파티션을 구성합니다. 2개의 복제본이 있으므로 각 인덱스 분할의 복사본이 2개 있습니다. 상단 행의 검색 단위는 1개의 복사본을 저장하여 첫 번째 복제본을 구성하고, 하단 행은 다른 복사본을 저장하여 두 번째 복제본을 구성합니다.

:::image type="content" source="media/search-capacity-planning/shards.png" alt-text="검색 인덱스는 파티션 간 분할됩니다.":::

위의 다이어그램은 한 가지 예시에 불과합니다. 최대 36개의 검색 단위에서 파티션 및 복제본의 여러 조합을 사용할 수 있습니다.

Cognitive Search에서 분할 관리는 구현 세부 정보이며 구성할 수 없습니다. 하지만 인덱스가 분할된다는 점을 알면 순위 지정과 자동 완성 동작 중 간헐적인 변칙을 이해하는 데 도움이 됩니다.

+ 순위 지정 변칙: 검색 점수가 먼저 분할 수준에서 계산된 다음 단일 결과 집합으로 집계됩니다. 분할 콘텐츠의 특성에 따라 한 분할의 일치에 다른 분할의 일치보다 더 높은 순위가 지정될 수 있습니다. 검색 결과에서 직관적인 순위를 확인하는 경우, 이는 특히 인덱스가 작을 때 나타나는 분할 효과일 가능성이 높습니다. [전체 인덱스에서 전역적으로 점수를 계산](index-similarity-and-scoring.md#scoring-statistics-and-sticky-sessions)을 선택하여 순위 지정 변칙을 피할 수 있지만 이 경우 성능 저하가 발생합니다.

+ 자동 완성 변칙: 부분적으로 입력된 용어의 처음 몇 개 문자에서 일치가 이루어지는 자동 완성 쿼리는 철자의 작은 편차를 용인하는 유사 매개 변수를 허용합니다. 자동 완성의 경우 유사 일치는 현재 분할 내 용어로 제한됩니다. 예를 들어 분할에 "Microsoft"가 있고 부분 용어인 "micor"가 입력되면 검색 엔진에서 해당 분할의 "Microsoft"와 일치시킵니다. 하지만 인덱스의 나머지를 보유한 다른 분할에서는 일치시키지 않습니다.

## <a name="how-to-evaluate-capacity-requirements"></a>용량 요구 사항을 평가하는 방법

서비스를 실행하는 용량 및 비용은 밀접한 관련이 있습니다. 계층은 저장소 및 콘텐츠(예: 서비스의 인덱스 수), 두 가지 수준에 제한을 둡니다. 가장 먼저 도달하는 제한이 유효한 제한인지 고려하는 것이 중요합니다.

인덱스 및 기타 개체의 수는 일반적으로 비즈니스 및 엔지니어링 요구 사항에 따라 결정됩니다. 예를 들어 활성 개발, 테스트 및 프로덕션을 위해 동일한 인덱스의 여러 버전이 있을 수 있습니다.

저장소 요구 사항은 빌드에 필요한 인덱스 크기에 따라 결정됩니다. 추정에 도움이 되는 견고한 추론 또는 추상론은 없습니다. 인덱스의 크기를 확인하는 유일한 방법은 [하나를 빌드](search-what-is-an-index.md)하는 것입니다. 크기는 가져온 데이터, 텍스트 분석 및 인덱스 구성(예: 확인기, 필터링 및 정렬 사용 설정 여부)을 기반으로 합니다.

전체 텍스트 검색의 경우 주 데이터 구조는 원본 데이터와 특성이 다른 [반전된 인덱스](https://en.wikipedia.org/wiki/Inverted_index) 구조입니다. 반전된 인덱스의 경우 크기와 복잡성은 피드하는 데이터의 양이 아니라 콘텐츠에 따라 결정됩니다. 높은 중복성이 있는 대형 데이터 원본은 매우 가변적 콘텐츠를 포함하는 작은 데이터 세트보다 더 작은 인덱스로 나타날 수 있습니다. 따라서 원래 데이터 세트의 크기에 따라 인덱스 크기를 유추하는 일은 거의 불가능합니다.

> [!NOTE] 
> 인덱스 및 스토리지에 대한 향후 요구를 예측하는 것이 짐작에 불과하다고 느낄 수 있지만 가치 있는 작업입니다. 계층의 용량이 너무 적은 경우 더 높은 계층에서 새 서비스를 프로비전한 다음 [인덱스를 다시 로드](search-howto-reindex.md)해야 합니다. 한 계층에서 다른 계층으로의 서비스의 현재 위치 업그레이드는 없습니다.
>

### <a name="estimate-with-the-free-tier"></a>무료 계층으로 예측

용량을 예측하기 위한 한 방법은 무료 계층으로 시작하는 것입니다. 무료 서비스는 최대 3개 인덱스, 50MB의 스토리지 및 인덱싱 시간 2분을 제공합니다. 이러한 제약 조건으로 프로젝션된 인덱스 크기를 측정하기 어려울 수 있지만 다음과 같은 단계가 있습니다.

+ [무료 서비스를 만듭니다.](search-create-service-portal.md)
+ 크기가 작은 대표적인 데이터 세트를 준비합니다.
+ 인덱스를 만들고 데이터를 로드합니다. 데이터 세트가 인덱서에서 지원하는 Azure 데이터 원본에서 호스팅될 수 있는 경우 [포털에서 데이터 가져오기 마법사](search-get-started-portal.md)를 사용하여 인덱스를 만들고 로드할 수 있습니다. 그렇지 않은 경우 REST 및 [Postman](search-get-started-rest.md) 또는 [Visual Studio Code](search-get-started-vs-code.md)를 사용하여 인덱스를 만들고 데이터를 푸시해야 합니다. 푸시 모델을 사용하려면 데이터가 JSON 문서 형식이어야 합니다. 여기서 문서의 필드는 인덱스의 필드에 해당합니다.
+ 인덱스에 대한 정보(예: 크기)를 수집합니다. 기능 및 특성은 저장소에 영향을 미칩니다. 예를 들어 확인기(입력 시 검색 쿼리)를 추가하면 저장소 요구 사항이 증가합니다. 

  동일한 데이터 세트를 사용하여 각 필드에서 특성이 서로 다른 인덱스의 여러 버전을 만들어 저장소 요구 사항이 어떻게 변하는지 알 수 있습니다. 자세한 내용은 [기본 인덱스 만들기의 "저장소 영향"](search-what-is-an-index.md#index-size)을 참조하세요.

대략적인 예측을 사용하는 경우 두 인덱스(개발 및 프로덕션)에 대한 예산에 해당하는 금액을 두 배로 늘리고 그에 따라 계층을 선택할 수 있습니다.

### <a name="estimate-with-a-billable-tier"></a>청구 가능 계층으로 예측

전용 리소스는 개발 동안 인덱스 수량, 크기 및 쿼리 볼륨의 실제적인 예측이 가능하도록 대규모 샘플링 및 처리 시간을 수용할 수 있습니다. 일부 고객은 청구 가능한 계층으로 바로 이동한 다음 개발 프로젝트가 성숙될 때 재평가합니다.

1. 하위 계층이 필요한 인덱스 수를 지원할 수 있는지 여부를 결정할 [각 계층에서 서비스 제한 검토](./search-limits-quotas-capacity.md#index-limits)입니다. 기본, S1 및 S2 계층 전체에서 인덱스 제한은 각각 15, 50 및 200입니다. 스토리지 최적화 계층은 10개 인덱스로 제한되는데, 이는 적은 수의 매우 큰 인덱스를 지원하도록 설계되었기 때문입니다.

1. [청구 가능 계층에서 서비스 만들기](search-create-service-portal.md):

    + 예상되는 부하에 대해 확실하지 않은 경우 기본 또는 S1에서 작은 규모로 시작합니다.
    + 테스트에 대규모 인덱싱 및 쿼리 부하가 포함된 경우 S2 또는 S3에서 대규모로 시작합니다.
    + 내부 비즈니스 애플리케이션과 마찬가지로 많은 양의 데이터를 인덱싱하고 쿼리 부하가 상대적으로 낮은 경우에는 L1 또는 L2에서 스토리지 최적화로 시작합니다.

1. 원본 데이터가 인덱스로 변환되는 방법을 결정하려면 [초기 인덱스를 만듭니다](search-what-is-an-index.md). 인덱스 크기를 추정하는 유일한 방법입니다.

1. 포털에서 [스토리지, 서비스 제한, 쿼리 볼륨 및 대기 시간을 모니터링](search-monitor-usage.md)합니다. 포털은 초당 쿼리, 제한된 쿼리 및 검색 대기 시간을 보여줍니다. 이 모든 값이 올바른 계층에 있는지 결정하는 데 도움을 줄 수 있습니다.

1. 고가용성이 필요하거나 쿼리 성능이 느린 경우 복제본을 추가합니다.

   쿼리 부하를 수용하는 데 필요한 복제본 수에 대한 지침은 없습니다. 쿼리 성능은 쿼리 및 경합 워크로드의 복잡성에 따라 다릅니다. 복제본을 추가하면 성능이 확실히 증가되지만 결과가 반드시 비례하지 않습니다. 복제본을 세 개 추가한다고 해서 처리량이 3배가 되는 것은 아닙니다. 솔루션에 대한 QPS 예측 지침은 [성능 확장](search-performance-optimization.md) 및 [쿼리 모니터링](search-monitor-queries.md)을 참조하세요.

> [!NOTE]
> 검색하지 않을 데이터를 포함하는 경우 저장소 요구 사항이 팽창될 수 있습니다. 이상적으로 문서는 검색 환경에 필요한 데이터만 포함합니다. 이진 데이터는 검색할 수 없으며 Azure 테이블 또는 Blob storage에 별도로 저장해야 합니다. 그런 다음 인덱스에 필드를 추가하여 외부 데이터에 대한 URL 참조를 저장해야 합니다. 개별 검색 문서의 최대 크기는 16MB(한 개의 요청으로 여러 문서를 대량 업로드하는 경우 이보다 작음)입니다. 자세한 내용은 [Azure Cognitive Search의 서비스 제한 사항](search-limits-quotas-capacity.md) 을 참조하세요.
>

**쿼리 볼륨 고려 사항**

QPS(초당 쿼리)는 성능 튜닝 중에 중요한 메트릭입니다. 하지만 처음에 높은 쿼리 볼륨이 필요할 것으로 예측하는 경우에는 계층 고려 사항에 불과합니다.

표준 계층을 통해 복제본과 파티션의 균형을 맞출 수 있습니다. 부하 분산을 위해 복제본을 추가하거나 병렬 처리를 위해 파티션을 추가하여 쿼리 소요 시간을 단축할 수 있습니다. 서비스를 프로비전한 후 성능을 조정할 수 있습니다.

처음부터 높고 지속적인 쿼리 볼륨을 기대하는 경우 더 강력한 하드웨어에서 지원하는 표준 이상의 계층을 고려해야 합니다. 파티션 및 복제본을 오프라인으로 가져오거나 해당 쿼리 볼륨이 발생하지 않는 경우 하위 계층 서비스로 전환할 수도 있습니다. 쿼리 처리량을 계산하는 방법에 대한 자세한 내용은 [Azure Cognitive Search 성능 및 최적화](search-performance-optimization.md)를 참조하세요.

스토리지 최적화 계층은 대량의 데이터 워크로드에 유용하며 쿼리 대기 시간 요구 사항이 그다지 중요하지 않은 경우에 전체적으로 사용 가능한 인덱스 저장소를 지원합니다. 부하 분산을 위해 추가 복제본을 사용하고 병렬 처리를 위해 추가 파티션을 사용해야 합니다. 서비스를 프로비전한 후 성능을 조정할 수 있습니다.

**서비스 수준 계약**

무료 계층 및 미리 보기 기능에는 [SLA(서비스 수준 계약)](https://azure.microsoft.com/support/legal/sla/search/v1_0/)가 제공되지 않습니다. 모든 청구 가능 계층에 대해 서비스에 충분한 중복성을 프로비전할 때 SLA가 적용됩니다. 쿼리(읽기) SLA에는 두 개 이상의 복제본이 있어야 합니다. 쿼리 및 인덱싱(읽기-쓰기) SLA에는 세 개 이상의 복제본이 있어야 합니다. 파티션의 수는 SLA에 영향을 미치지 않습니다.

## <a name="tips-for-capacity-planning"></a>용량 계획 팁

+ 쿼리 관련 메트릭 작성을 허용하고 사용량 패턴에 관한 데이터(업무 시간 중 쿼리, 사용량이 적은 시간 중 인덱싱)를 수집합니다. 이 데이터를 사용하여 서비스 프로비저닝 결정을 알립니다. 매시간 또는 매일 케이던스에서 효율적이지 않지만 쿼리 볼륨에서 계획된 변경을 수용할 수 있도록 파티션 및 리소스를 역동적으로 조정할 수 있습니다. 또한 작업 수행을 보증할 정도로 수준이 충분히 오래 유지되는 경우 계획되지 않았지만 지속적인 변경을 수용할 수 있습니다.

+ 부족한 프로비저닝의 유일한 단점은 실제 요구 사항이 예측보다 많은 경우에 서비스를 종료해야 할 수 있습니다. 서비스 중단을 방지하려면 상위 계층에서 새 서비스를 만들고 모든 앱과 요청이 새 엔드포인트를 대상으로 할 때까지 이를 나란히 실행합니다.

## <a name="when-to-add-partitions-and-replicas"></a>파티션 및 복제본을 추가하는 경우

처음 서비스에는 1개 파티션과 1개 복제본으로 구성된 최소 수준의 리소스가 할당됩니다.

단일 서비스에는 모든 워크로드(인덱싱 및 쿼리)를 처리할 만큼 충분한 리소스가 있어야 합니다. 백그라운드에서 실행되는 워크로드는 없습니다. 쿼리 요청 빈도가 자연스럽게 적은 시간에 인덱싱을 예약할 수 있지만 서비스는 작업의 우선 순위를 지정하지 않습니다. 또한 특정 중복성은 서비스 또는 노드가 내부적으로 업데이트될 때 쿼리 성능을 향상시킵니다.

일반적으로 검색 애플리케이션에는 파티션보다 더 많은 복제본이 필요하며 특히 서비스 작업이 쿼리 워크로드를 기반으로 하는 경우 더욱 그렇습니다. [고가용성](#HA) 섹션에 그 이유가 설명되어 있습니다.

[선택한 계층](search-sku-tier.md)에 따라 파티션 크기와 속도가 결정되고 각 계층은 다양한 시나리오에 맞는 특성 집합을 중심으로 최적화됩니다. 더 높은 수준의 계층을 선택하는 경우 S1을 사용할 때보다 더 많은 파티션이 필요할 수 있습니다. 하위 계층에서 프로비전되는 서비스에 2개의 저렴한 파티션을 두는 것보다 더 크고 비용이 많이 드는 파티션이 더 나은 성능을 얻을 수 있는지 여부를 확인해야 합니다.

거의 실시간으로 진행되는 데이터 새로 고침을 필요로 하는 검색 애플리케이션은 복제본보다 비례적으로 더 많은 파티션이 필요합니다. 파티션을 추가하면 많은 수의 컴퓨팅 리소스로 읽기/쓰기 작업이 분산됩니다. 또한 추가 인덱스와 문서를 저장하기 위한 더 많은 디스크 공간이 보장됩니다.

인덱스가 클수록 쿼리하는 데 더 오래 걸립니다. 따라서 파티션을 증분 방식으로 증가시킬 때마다 더 작지만 비례적으로 복제본도 늘려야 합니다. 쿼리의 복잡성과 쿼리 용량은 쿼리 실행이 얼마나 빠르게 진행되는지에 영향을 줍니다.

> [!NOTE]
> 복제본 또는 파티션을 더 추가하면 서비스 실행 비용이 증가하고 결과가 정렬되는 방식에 약간의 변화가 발생할 수 있습니다. [가격 책정 계산기](https://azure.microsoft.com/pricing/calculator/)를 사용하여 노드 추가 시의 비용 영향을 이해해야 합니다. [아래 차트](#chart)는 특정 구성에 대해 필요한 검색 단위의 수를 교차 참조하는 데 도움이 될 수 있습니다. 추가 복제본이 쿼리 성능에 어떤 영향을 미치는지에 대한 자세한 내용은 [결과 정렬](search-pagination-page-layout.md#ordering-results)을 참조하세요.

## <a name="how-to-allocate-replicas-and-partitions"></a>복제본 및 파티션을 할당하는 방법

1. [Azure Portal](https://portal.azure.com/) 에 로그인하고 검색 서비스를 선택합니다.

1. **설정** 에서 **규모** 페이지를 열고 복제본 및 파티션을 조정합니다. 

   다음 스크린샷은 하나의 복제본과 파티션으로 프로비전된 기본 표준을 보여줍니다. 아래의 수식은 사용되는 검색 단위의 수를 나타냅니다 (1). 단위 가격이 $100(실제 가격이 아님)인 경우 이 서비스를 실행하는 월간 비용은 평균적으로 $100가 됩니다.

   :::image type="content" source="media/search-capacity-planning/1-initial-values.png" alt-text="현재 값을 보여주는 규모 페이지" border="true":::

1. 슬라이더를 사용하여 파티션 수를 늘리거나 줄입니다. 아래의 수식은 사용 중인 검색 단위 수를 나타냅니다. **저장** 을 선택합니다.

   이 예에서는 두 번째 복제본과 파티션을 추가합니다. 검색 단위 수를 확인합니다. 요금 청구 수식은 복제본에 파티션을 곱하는 것이므로 4(2x2)입니다. 용량을 2배 늘리면 서비스 실행 비용도 2배 증가합니다. 검색 단위 비용이 $100인 경우 이제 새로운 월간 청구 비용은 $400가 됩니다.

   각 계층의 현재 단위 비용은 [가격 책정 페이지](https://azure.microsoft.com/pricing/details/search/)를 참조하세요.

   :::image type="content" source="media/search-capacity-planning/2-add-2-each.png" alt-text="복제본 및 파티션 추가" border="true":::

1. 저장한 후에는 알림을 확인하여 작업이 성공했는지 확인할 수 있습니다.

   :::image type="content" source="media/search-capacity-planning/3-save-confirm.png" alt-text="변경 내용 저장" border="true":::

   용량 변경을 완료하는 데 최대 몇 시간이 걸릴 수 있습니다. 프로세스가 시작된 후에는 취소할 수 없으며 복제본 및 파티션 조정에 대한 실시간 모니터링은 없습니다. 하지만 변경이 진행되는 동안에는 다음 메시지가 표시됩니다.

   :::image type="content" source="media/search-capacity-planning/4-updating.png" alt-text="포털의 상태 메시지" border="true":::

> [!NOTE]
> 서비스가 프로비전된 후에는 상위 계층으로 업그레이드할 수 없습니다. 새 계층에서 검색 서비스를 만들고 인덱스를 다시 로드해야 합니다. 서비스 프로비저닝에 대한 도움말은 [포털에서 Azure Cognitive Search 서비스 만들기](search-create-service-portal.md)를 참조하세요.
>
> 추가로 파티션과 복제본은 서비스에 의해 배타적으로 관리됩니다. 프로세서 선호도 또는 특정 노드에 작업을 할당한다는 개념이 없습니다.
>

<a id="chart"></a>

## <a name="partition-and-replica-combinations"></a>파티션 및 복제본 조합

기본 서비스는 정확히 한 개의 파티션과 최대 세 개의 복제본을 가질 수 있으며 최대 세 개의 SU로 제한됩니다. 유일하게 조정할 수 있는 리소스는 복제본입니다. 쿼리에서 고가용성을 위해 최소 두 개의 복제본이 필요합니다.

모든 표준 및 스토리지 최적화 검색 서비스는 이러한 계층에 허용된 36개 검색 단위 제한에서 다음 복제본 및 파티션 조합을 가정할 수 있습니다. 

|   | **파티션 1개** | **파티션 2개** | **파티션 3개** | **파티션 4개** | **파티션 6개** | **파티션 12개** |
| --- | --- | --- | --- | --- | --- | --- |
| **복제본 1개** |1 SU |2 SU |3 SU |4 SU |6 SU |12 SU |
| **복제본 2개** |2 SU |4 SU |6 SU |8 SU |12 SU |24 SU |
| **복제본 3개** |3 SU |6 SU |9 SU |12 SU |18 SU |36 SU |
| **복제본 4개** |4 SU |8 SU |12 SU |16 SU |24 SU |해당 없음 |
| **복제본 5개** |5 SU |10 SU |15 SU |20 SU |30 SU |해당 없음 |
| **복제본 6개** |6 SU |12 SU |18 SU |24 SU |36 SU |해당 없음 |
| **복제본 12개** |12 SU |24 SU |36 SU |해당 없음 |해당 없음 |해당 없음 |

SU, 가격 책정 및 용량에 대해서는 Azure Websites에 자세히 설명되어 있습니다. 자세한 내용은 [가격 정보](https://azure.microsoft.com/pricing/details/search/)를 참조하세요.

> [!NOTE]
> 복제본 및 파티션 수는 12를 고르게 나눌 수 있는 값입니다(특히 1, 2, 3, 4, 6, 12). Azure Cognitive Search에서 각 인덱스를 모든 파티션 사이에 고르게 분할할 수 있도록 12개의 부분으로 미리 나누기 때문입니다. 예를 들어, 서비스에 파티션이 세 개 있는 상태에서 인덱스를 하나 만들 경우 각 파티션에는 분할된 인덱스가 4개가 포함됩니다. Azure Cognitive Search에서 인덱스를 분할하는 방법은 구현에 관한 세부 정보이며 이후 릴리스에서 변경될 수 있습니다. 지금은 그 숫자가 12이지만 이후에 12가 아닌 값으로 바뀔 수도 있습니다.
>

<a id="HA"></a>

## <a name="high-availability"></a>고가용성

확장이 쉽고 비교적 빠르기 때문에, 일반적으로 파티션 하나와 복제본 한두 개로 시작한 후 쿼리 볼륨이 커지면 확장하는 것이 좋습니다. 쿼리 작업은 복제본에서 주로 실행됩니다. 고가용성이나 처리량이 더 필요한 경우에는 추가 복제본이 필요할 가능성이 높습니다.

고가용성을 위한 일반적인 권장 사항은 다음과 같습니다.

+ 읽기 전용 작업(쿼리)의 고가용성을 위한 복제본 두 개

+ 읽기/쓰기 워크로드의 고가용성을 위한 복제본 세 개 이상(개별 문서가 추가, 업데이트 또는 삭제됨에 따라 쿼리 및 인덱싱)

Azure Cognitive Search에 대한 서비스 수준 약정(SLA)은 문서 추가, 업데이트 또는 삭제로 구성된 쿼리 작업 및 인덱스 업데이트를 대상으로 합니다.

기본 계층은 하나의 파티션과 세 개의 복제본에 우선합니다. 인덱싱 및 쿼리 처리량 모두에 대한 수요 변동에 즉시 응답하기 위한 유연성이 필요한 경우 표준 계층 중 하나를 사용하는 것이 좋습니다.  저장소 요구 사항이 쿼리 처리량보다 훨씬 더 빠르게 증가하는 경우 스토리지 최적화 계층 중 하나를 고려하세요.

## <a name="about-queries-per-second-qps"></a>QPS(초당 쿼리) 정보

쿼리 성능에 따라 발생하는 많은 요인으로 인해 Microsoft는 예상되는 QPS 수를 게시하지 않습니다. QPS 예상은 모든 고객이 애플리케이션에 유효한 서비스 계층, 구성, 인덱스 및 쿼리 구문을 사용하여 독립적으로 개발해야 합니다. 인덱스 크기와 복잡성, 쿼리 크기와 복잡성 및 트래픽 양은 QPS의 주 결정자입니다. 이러한 요소를 알 수 없는 경우 의미 있는 예상 값을 제공할 방법이 없습니다.

예측 값은 전용 리소스(기본 계층 및 표준 계층)에서 실행 중인 서비스에 대해 계산되는 경우 더 예측 가능해 집니다. 매개 변수를 더 잘 제어할 수 있기 때문에 QPS를 더 근접하게 예상할 수 있습니다. 예측 값에 접근하는 방법에 대한 지침은 [Azure Cognitive Search 성능 및 최적화](search-performance-optimization.md)를 참조하세요.

스토리지 최적화 계층(L1 및 L2)의 경우 표준 계층보다 낮은 쿼리 처리량과 더 많은 대기 시간이 소요됩니다.

## <a name="next-steps"></a>다음 단계

> [!div class="nextstepaction"]
> [비용을 예측하고 관리하는 방법](search-sku-manage-costs.md)