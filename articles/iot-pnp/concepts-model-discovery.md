---
title: IoT 플러그 앤 플레이 미리 보기 모델 검색 구현 | Microsoft Docs
description: 솔루션 개발자는 솔루션에서 IoT 플러그 앤 플레이 모델 검색을 구현 하는 방법에 대해 알아봅니다.
author: ChrisGMsft
ms.author: chrisgre
ms.date: 07/17/2019
ms.topic: conceptual
ms.custom: mvc
ms.service: iot-pnp
services: iot-pnp
manager: philmea
ms.openlocfilehash: c37446fd5a0cdc986044405a9aa3da32462d9c04
ms.sourcegitcommit: 8e1fb03a9c3ad0fc3fd4d6c111598aa74e0b9bd4
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/28/2019
ms.locfileid: "70114266"
---
# <a name="implement-iot-plug-and-play-preview-model-discovery-in-an-iot-solution"></a>Iot 솔루션에서 IoT 플러그 앤 플레이 미리 보기 모델 검색 구현

이 문서에서는 솔루션 개발자가 iot 솔루션에서 IoT 플러그 앤 플레이 미리 보기 모델 검색을 구현할 수 있는 방법을 설명 합니다.  IoT 플러그 앤 플레이 모델 검색은 IoT 플러그 앤 플레이 장치에서 지원 되는 기능 모델과 인터페이스를 식별 하는 방법 및 IoT 솔루션이 이러한 기능 모델과 인터페이스를 검색 하는 방법을 보여 줍니다.

Iot 솔루션에는 알려진 IoT 플러그 앤 플레이 장치 집합에서 작동 하는 용도의 빌드 솔루션과 IoT 플러그 앤 플레이 장치에서 작동 하는 모델 기반 솔루션이 있습니다.

이 개념 문서에서는 두 유형의 솔루션 모두에서 모델 검색을 구현 하는 방법을 설명 합니다.

## <a name="model-discovery"></a>모델 검색

IoT 플러그 앤 플레이 장치는 먼저 IoT hub에 연결 하는 경우 모델 정보 원격 분석 메시지를 보냅니다. 이 메시지에는 장치에서 구현 하는 인터페이스의 Id가 포함 됩니다. 솔루션이 장치를 사용 하려면 해당 Id를 확인 하 고 각 인터페이스에 대 한 정의를 검색 해야 합니다.

장치 프로 비전 서비스 (DPS)를 사용 하 여 허브에 연결 하는 경우 IoT 플러그 앤 플레이 장치에서 수행 하는 단계는 다음과 같습니다.

1. 장치를 켜면 DPS의 글로벌 끝점에 연결 하 고 허용 되는 방법 중 하나를 사용 하 여 인증 합니다.
1. 그런 다음 DPS는 장치를 인증 하 고 장치를 할당할 IoT hub를 알려 주는 규칙을 조회 합니다. 그런 다음 DPS는 해당 허브에 장치를 등록 합니다.
1. DPS는 장치에 IoT Hub 연결 문자열을 반환 합니다.
1. 그런 다음 장치는 검색 원격 분석 메시지를 IoT Hub 보냅니다. 검색 원격 분석 메시지에는 장치에서 구현 하는 인터페이스의 Id가 포함 됩니다.
1. Iot 플러그 앤 플레이 장치는 이제 IoT hub를 사용 하는 솔루션을 사용할 준비가 되었습니다.

장치가 IoT hub에 직접 연결 하는 경우 장치 코드에 포함 된 연결 문자열을 사용 하 여 연결 합니다. 그런 다음 장치는 검색 원격 분석 메시지를 IoT Hub 보냅니다.

모델 정보 원격 분석 메시지에 대해 자세히 알아보려면 [modelinformation](concepts-common-interfaces.md) 인터페이스를 참조 하세요.

### <a name="purpose-built-iot-solutions"></a>목적의 빌드된 IoT 솔루션

용도에 맞는 IoT 솔루션은 알려진 IoT 플러그 앤 플레이 장치 기능 모델 및 인터페이스 집합을 사용 하 여 작동 합니다.

솔루션에 연결 하는 장치에 대 한 기능 모델 및 인터페이스를 미리 사용할 수 있습니다. 다음 단계를 사용 하 여 솔루션을 준비 합니다.

1. Azure에서 인터페이스 JSON 파일을 솔루션에서 읽을 수 있는 위치에 저장 합니다.
1. 예상 IoT 플러그 앤 플레이 기능 모델 및 인터페이스를 기반으로 하는 IoT 솔루션의 논리를 작성 합니다.
1. 솔루션에서 사용 하는 IoT hub의 알림을 구독 합니다.

새 장치 연결에 대 한 알림을 받으면 다음 단계를 수행 합니다.

1. 검색 원격 분석 메시지를 읽고 장치에 의해 구현 된 기능 모델 및 인터페이스의 Id를 검색 합니다.
1. 기능 모델의 ID를 미리 저장 한 기능 모델의 id와 비교 합니다.
1. 이제 연결 된 장치 유형을 알 수 있습니다. 이전에 작성 한 논리를 사용 하 여 사용자가 장치를 적절 하 게 상호 작용할 수 있도록 합니다.

### <a name="model-driven-solutions"></a>모델 기반 솔루션

모델 기반 IoT 솔루션은 모든 IoT 플러그 앤 플레이 장치에서 작동할 수 있습니다. 모델 기반 IoT 솔루션을 빌드하는 것은 더 복잡 하지만, 나중에 추가 된 장치에서 솔루션이 작동 하는 이점을 누릴 수 있습니다.

모델 기반 IoT 솔루션을 빌드하려면 IoT 플러그 앤 플레이 인터페이스 기본 형식: 원격 분석, 속성 및 명령에 대 한 논리를 구축 해야 합니다. IoT 솔루션의 논리는 여러 원격 분석, 속성 및 명령 기능을 결합 하 여 장치를 나타냅니다.

또한 솔루션은 사용 하는 IoT hub의 알림을 구독 해야 합니다.

솔루션에 새 장치 연결에 대 한 알림이 수신 되 면 다음 단계를 수행 합니다.

1. 검색 원격 분석 메시지를 읽고 장치에 의해 구현 된 기능 모델 및 인터페이스의 Id를 검색 합니다.
1. 각 ID에 대해 전체 JSON 파일을 읽어 장치의 기능을 찾습니다.
1. 각 인터페이스가 이전에 솔루션에서 검색 된 JSON 파일을 저장 하기 위해 빌드한 모든 캐시에 있는지 확인 합니다.
1. 그런 다음 해당 ID의 인터페이스가 공용 모델 리포지토리에 있는지 확인 합니다. 자세한 내용은 [공용 모델 리포지토리](howto-manage-models.md)를 참조 하세요.
1. 인터페이스가 공용 모델 리포지토리에 없으면 솔루션에 알려진 모든 회사 모델 리포지토리에서 검색 해 보세요. 회사 모델 리포지토리에 액세스 하려면 연결 문자열이 필요 합니다. 자세한 내용은 [회사 모델 리포지토리](howto-manage-models.md)를 참조 하세요.
1. 공용 모델 리포지토리에서 또는 회사 모델 리포지토리에서 모든 인터페이스를 찾을 수 없는 경우 장치에서 인터페이스 정의를 제공할 수 있는지 확인할 수 있습니다. 장치는 명령을 사용 하 여 인터페이스 파일을 검색 하는 방법에 대 한 정보를 게시 하는 표준 [Modeldefinition](concepts-common-interfaces.md) 인터페이스를 구현할 수 있습니다.
1. 장치에서 구현 하는 각 인터페이스에 대 한 JSON 파일을 찾은 경우 장치의 기능을 열거할 수 있습니다. 이전에 작성 한 논리를 사용 하 여 사용자가 장치와 상호 작용할 수 있도록 합니다.
1. 언제 든 지 디지털 쌍 API를 호출 하 여 장치에 대 한 기능 모델 id와 인터페이스 id를 검색할 수 있습니다.

## <a name="next-steps"></a>다음 단계

이제 모델 검색에 대해 알아보았습니다. IoT 솔루션은 솔루션에 대 한 다른 기능을 활용 하기 위해 [Azure Iot 플랫폼](overview-iot-plug-and-play.md) 에 대해 자세히 알아보세요.
