---
title: Azure 데이터 탐색기 성능, 메트릭을 사용하여 상태 & 사용량 모니터링
description: Azure Data Explorer 메트릭을 사용하여 클러스터의 성능, 상태 및 사용량을 모니터링하는 방법을 알아봅니다.
author: orspod
ms.author: orspodek
ms.reviewer: gabil
ms.service: data-explorer
ms.topic: conceptual
ms.date: 01/19/2020
ms.openlocfilehash: 1319b8cd6ac8a0eb83381c24bcde9996458e47a7
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/27/2020
ms.locfileid: "77560307"
---
# <a name="monitor-azure-data-explorer-performance-health-and-usage-with-metrics"></a>메트릭을 사용하여 Azure 데이터 탐색기 성능, 상태 및 사용량 모니터링

Azure Data Explorer는 애플리케이션, 웹 사이트, IoT 디바이스 등으로부터 대량의 데이터 스트리밍에 대한 실시간 분석을 제공하는 빠른 속도의 완전 관리형 데이터 분석 서비스입니다. Azure Data Explorer를 사용하려면 먼저 클러스터를 만들고 이 클러스터에 데이터베이스를 하나 이상 만듭니다. 그런 다음, 데이터베이스에 대해 쿼리를 실행할 수 있도록 데이터베이스에 데이터를 수집(로드)합니다. Azure Data Explorer 메트릭은 클러스터 리소스의 상태 및 성능에 대한 주요 지표를 제공합니다. 이 문서에서 자세히 설명된 메트릭을 사용하여 특정 시나리오의 Azure Data Explorer 클러스터 상태 및 성능을 독립 실행형 메트릭으로 모니터링합니다. 또한 운영 Azure 대시보드 및 [Azure 경고의](/azure/azure-monitor/platform/alerts-metric-overview)기준으로 [메트릭을](/azure/azure-portal/azure-portal-dashboards) 사용할 수도 있습니다.

## <a name="prerequisites"></a>사전 요구 사항

* Azure 구독 없는 경우 [무료 Azure 계정을](https://azure.microsoft.com/free/)만들 수 있습니다.
* [클러스터 및 데이터베이스](create-cluster-database-portal.md).

## <a name="using-metrics"></a>메트릭 사용

1. [Azure 포털에](https://portal.azure.com/)로그인합니다.
1. Azure 데이터 탐색기 클러스터에서 **메트릭을** 선택하여 메트릭 창을 열고 클러스터에서 분석을 시작합니다.
    ![메트릭을](media/using-metrics/select-metrics.png)선택합니다.
1. 메트릭 창에서: ![메트릭 창](media/using-metrics/metrics-pane.png)
    1. 메트릭 차트를 만들려면 **메트릭** 이름 및 메트릭당 관련 **집계를** 선택합니다. Azure 데이터 탐색기 클러스터에 대해 **리소스** 및 **메트릭 네임스페이스** 선택기가 미리 선택됩니다. 다양한 메트릭에 대한 자세한 내용은 [지원되는 Azure 데이터 탐색기 메트릭을](#supported-azure-data-explorer-metrics)참조하십시오.
    1. **지표 추가를** 선택하여 동일한 차트에 플롯된 여러 메트릭을 볼 수 있습니다.
    1. **+ 새 차트를** 선택하여 한 보기에서 여러 차트를 볼 수 있습니다.
    1. 시간 선택기를 사용하여 시간 범위(기본값: 24시간 지난)를 변경합니다.
    1. [ **측정기준이** **Apply splitting** ](/azure/azure-monitor/platform/metrics-getting-started#apply-dimension-filters-and-splitting) 있는 측정항목에 필터 추가 및 분할 적용을 사용합니다.
    1. **대시보드에 Pin을** 선택하여 대시보드에 차트 구성을 추가하여 다시 볼 수 있습니다.
    1. **새 경고 규칙을** 설정하여 설정된 조건을 사용하여 메트릭을 시각화합니다. 새 경고 규칙에는 사용자 차트의 대상 리소스, 메트릭, 분할 및 필터 차원이 포함됩니다. 경고 규칙 만들기 창에서 이러한 설정을 [수정합니다.](/azure/azure-monitor/platform/metrics-charts#create-alert-rules)

[메트릭 탐색기](/azure/azure-monitor/platform/metrics-getting-started)사용에 대한 추가 정보 입니다.

## <a name="supported-azure-data-explorer-metrics"></a>지원되는 Azure 데이터 탐색기 메트릭

지원되는 Azure 데이터 탐색기 메트릭은 사용량에 따라 다양한 범주로 구분됩니다. 

### <a name="cluster-health-metrics"></a>클러스터 상태 메트릭

클러스터 상태 메트릭은 클러스터의 일반 상태를 추적합니다. 여기에는 리소스 및 사용 률 및 응답성이 포함됩니다.

**메트릭** | **단위** | **집계** | **메트릭 설명** | **차원** |
|---|---|---|---|---|
| 캐시 사용률 | 백분율 | 평균, 최대, 최소, 평균, 평균, 평균, | 클러스터에서 현재 사용 중인 할당된 캐시 리소스의 백분율입니다. 캐시는 정의된 캐시 정책에 따라 사용자 활동에 할당된 SSD의 크기입니다. 평균 캐시 사용률이 80% 이하인 경우 클러스터의 지속 가능한 상태입니다. 평균 캐시 사용률이 80%를 초과하는 경우 클러스터를 저장소에 최적화된 가격 책정 계층으로 [확장하거나](manage-cluster-vertical-scaling.md) 더 많은 인스턴스로 [확장해야](manage-cluster-horizontal-scaling.md) 합니다. 또는 캐시 정책을 조정합니다(캐시에서 일 수가 적함). 캐시 사용률이 100%를 초과하면 캐싱 정책에 따라 캐시할 데이터의 크기가 클러스터의 총 캐시 크기보다 커지다. | None |
| CPU | 백분율 | 평균, 최대, 최소, 평균, 평균, 평균, | 클러스터의 컴퓨터에서 현재 사용 중인 할당된 계산 리소스의 백분율입니다. 평균 CPU가 80% 이하인 클러스터는 지속 가능합니다. CPU의 최대 값은 100%이며, 이는 데이터를 처리하는 추가 계산 리소스가 없음을 의미합니다. 클러스터가 잘 작동하지 않으면 CPU의 최대값을 확인하여 차단된 특정 CPU가 있는지 확인합니다. | None |
| 섭취 활용도 | 백분율 | 평균, 최대, 최소, 평균, 평균, 평균, | 용량 정책에서 할당된 총 리소스에서 데이터를 수집하여 수집을 수행하는 데 사용되는 실제 리소스의 백분율입니다. 기본 용량 정책은 512개의 동시 사용 작업 또는 통합에 투자된 클러스터 리소스의 75%를 넘지 않습니다. 평균 섭취 사용률이 80% 이하인 클러스터의 지속 가능한 상태입니다. 최대 사용률은 100%로, 이는 모든 클러스터 사용 능력이 사용되고 흡기 큐가 발생할 수 있음을 의미합니다. | None |
| 살아 남기 | 개수 | Avg | 클러스터의 응답성을 추적합니다. 완전히 응답하는 클러스터는 값 1을 반환하고 차단되거나 연결이 끊긴 클러스터는 0을 반환합니다. |
| 제한 명령의 총 수 | 개수 | 평균, 최대, 최소, 합계 | 동시(병렬) 명령의 최대 허용 수에 도달했기 때문에 클러스터의 제한(거부된) 명령 수입니다. | None |
| 총 익스텐트 수 | 개수 | 평균, 최대, 최소, 합계 | 클러스터의 총 데이터 익스텐탈 수입니다. 이 메트릭의 변경은 데이터 익스텐을 병합하는 것은 CPU사용량이 많은 작업이므로 대규모 데이터 구조 변경 및 클러스터에 대한 높은 부하를 의미할 수 있습니다. | None |
| | | | |

### <a name="export-health-and-performance-metrics"></a>내보내기 상태 및 성능 메트릭

내보내기 상태 및 성능 메트릭은 지각, 결과, 레코드 수 및 사용률과 같은 내보내기 작업의 일반 상태 및 성능을 추적합니다.

**메트릭** | **단위** | **집계** | **메트릭 설명** | **차원** |
|---|---|---|---|---|
내보낸 레코드의 연속 내보내기 수    | 개수 | 합계 | 모든 연속 내보내기 작업의 내보낸 레코드 수입니다. | None |
지속적인 내보내기 최대 대기 시간 |    개수   | 최대값   | 클러스터의 지속적인 내보내기 작업에 의해 보고된 대기 시간(분)입니다. | None |
연속 내보내기 보류 중인 수 | 개수 | 최대값   | 보류 중인 연속 내보내기 작업의 수입니다. 이러한 작업은 실행할 준비가 되었지만 용량부족으로 인해 큐에서 대기중입니다. 
연속 내보내기 결과    | 개수 |   개수   | 연속 내보내기 실행의 실패/성공 결과입니다. | 연속내보내기이름 |
수출 활용도 |    백분율 | 최대값   | 클러스터의 총 내보내기 용량 중(0에서 100 사이) 중 사용된 내보내기 용량입니다. | None |
| | | | |

### <a name="ingestion-health-and-performance-metrics"></a>섭취 상태 및 성능 메트릭

섭취 상태 및 성능 메트릭은 대기 시간, 결과 및 볼륨과 같은 섭취 작업의 일반적인 상태 및 성능을 추적합니다.

**메트릭** | **단위** | **집계** | **메트릭 설명** | **차원** |
|---|---|---|---|---|
| 처리된 이벤트(이벤트/IoT 허브용) | 개수 | 최대, 최소, 합계 | 이벤트 허브에서 읽고 클러스터에서 처리한 총 이벤트 수입니다. 이벤트는 거부된 이벤트와 클러스터 엔진에서 허용하는 이벤트로 나뉩습니다. | EventStatus |
| 섭취 대기 시간 | 초 | 평균, 최대, 최소, 평균, 평균, 평균, | 수집된 데이터의 대기 시간(클러스터에서 데이터를 수신한 시간부터 쿼리준비가 완료될 때까지). 인레이션 대기 기간은 인기 시나리오에 따라 다릅니다. | None |
| 섭취 결과 | 개수 | 개수 | 실패하고 성공한 총 작업 수입니다. **적용 분할을** 사용하여 성공 및 실패 결과의 버킷을 만들고 차원(값**Value** > **상태)을**분석합니다.| IngestionResultDetails |
| 섭취 볼륨(MB) | 개수 | 최대, 합계 | 압축하기 전에 클러스터(MB)에 수집된 데이터의 총 크기입니다. | 데이터베이스 |
| | | | |  

### <a name="query-performance"></a>쿼리 성능

쿼리 성능 메트릭은 쿼리 기간 및 동시 또는 제한 쿼리의 총 수를 추적합니다.

**메트릭** | **단위** | **집계** | **메트릭 설명** | **차원** |
|---|---|---|---|---|
| 쿼리 기간 | 밀리초 | 평균, 최소, 최대, 합계 | 쿼리 결과가 수신될 때까지의 총 시간입니다(네트워크 대기 시간이 포함되지 않습니다). | QueryStatus |
| 총 동시 쿼리 수 | 개수 | 평균, 최대, 최소, 합계 | 클러스터에서 병렬로 실행되는 쿼리 수입니다. 이 메트릭은 클러스터의 부하를 예측하는 좋은 방법입니다. | None |
| 제한된 쿼리의 총 수 | 개수 | 평균, 최대, 최소, 합계 | 클러스터의 제한(거부된) 쿼리 수입니다. 허용되는 최대 동시(병렬) 쿼리 수는 동시 쿼리 정책에 정의됩니다. | None |
| | | | |

### <a name="streaming-ingest-metrics"></a>스트리밍 인제스트 메트릭

스트리밍 수집 메트릭은 스트리밍 수집 데이터를 추적하고 요청 속도, 기간 및 결과를 추적합니다.

**메트릭** | **단위** | **집계** | **메트릭 설명** | **차원** |
|---|---|---|---|---|
스트리밍 인제스트 데이터 속도 |    개수   | 속도 요청Per초 | 클러스터에 수집된 데이터의 총 볼륨입니다. | None |
스트리밍 인더스트 기간   | 밀리초  | 평균, 최대, 최소, 평균, 평균, 평균, | 모든 스트리밍 사용 요청의 총 기간입니다. | None |
스트리밍 인제스트 요청 속도   | 개수 | 카운트, 평균, 최대, 최소, 합계 | 총 스트리밍 가져오기 요청 수입니다. | None |
스트리밍 인제스트 결과 | 개수 | Avg   | 결과 유형별 총 스트리밍 생성 요청 수입니다. | 결과 |
| | | | |

[지원되는 Azure 데이터 탐색기 클러스터 메트릭에](/azure/azure-monitor/platform/metrics-supported#microsoftkustoclusters)대한 추가 정보입니다.


## <a name="next-steps"></a>다음 단계

* [자습서: Azure 데이터 탐색기에서 데이터 수집 및 쿼리 모니터링](/azure/data-explorer/ingest-data-no-code)
* [진단 로그를 사용하여 Azure Data Explorer 수집 작업 모니터링](/azure/data-explorer/using-diagnostic-logs)
* [빠른 시작: Azure 데이터 탐색기에서 데이터 쿼리](web-query-data.md)
