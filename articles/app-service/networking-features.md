---
title: 네트워킹 기능
description: Azure App Service의 네트워킹 기능에 대해 알아보고 보안 또는 기타 기능에 필요한 기능을 알아봅니다.
author: ccompy
ms.assetid: 5c61eed1-1ad1-4191-9f71-906d610ee5b7
ms.topic: article
ms.date: 10/18/2020
ms.author: ccompy
ms.custom: seodec18
ms.openlocfilehash: 39a511601606118228ee5fbd9dcf68b6707ede47
ms.sourcegitcommit: 7863fcea618b0342b7c91ae345aa099114205b03
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 11/03/2020
ms.locfileid: "93288354"
---
# <a name="app-service-networking-features"></a>App Service 네트워킹 기능

여러 가지 방법으로 Azure App Service에 응용 프로그램을 배포할 수 있습니다. 기본적으로 App Service에서 호스트 되는 앱은 인터넷을 통해 직접 액세스할 수 있으며 인터넷에 호스트 된 끝점에만 연결할 수 있습니다. 그러나 많은 응용 프로그램의 경우 인바운드 및 아웃 바운드 네트워크 트래픽을 제어 해야 합니다. App Service에는 이러한 요구를 충족 하는 데 도움이 되는 몇 가지 기능이 있습니다. 문제는 지정 된 문제를 해결 하는 데 사용할 기능을 알고 있습니다. 이 문서는 몇 가지 예제 사용 사례에 따라 사용할 기능을 결정 하는 데 도움이 됩니다.

Azure App Service에 대 한 두 가지 주요 배포 유형이 있습니다. 
- 다중 테 넌 트 공용 서비스는 무료, 공유, 기본, 표준, 프리미엄, PremiumV2 및 PremiumV3 가격 책정 Sku에서 App Service 계획을 호스팅합니다. 
- ASE (단일 테 넌 트 App Service Environment)는 Azure 가상 네트워크에서 직접 격리 된 SKU App Service 요금제를 호스팅합니다. 

사용 하는 기능은 다중 테 넌 트 서비스 또는 ASE에 있는지 여부에 따라 달라 집니다. 

## <a name="multitenant-app-service-networking-features"></a>다중 테 넌 트 App Service 네트워킹 기능 

Azure App Service 분산 시스템입니다. 들어오는 HTTP 또는 HTTPS 요청을 처리 하는 역할을 *프런트 엔드* 라고 합니다. 고객 작업을 호스트 하는 역할을 *작업자* 라고 합니다. App Service 배포의 모든 역할은 다중 테 넌 트 네트워크에 있습니다. 동일한 App Service 배율 단위에 여러 고객이 있으므로 App Service 네트워크를 네트워크에 직접 연결할 수 없습니다. 

네트워크를 연결 하는 대신 응용 프로그램 통신의 다양 한 측면을 처리 하는 기능이 필요 합니다. 앱 *에 대 한* 요청을 처리 하는 기능은 앱 *에서* 호출 하는 경우 문제를 해결 하는 데 사용할 수 없습니다. 마찬가지로 앱의 호출에 대 한 문제를 해결 하는 기능은 앱에 대 한 문제를 해결 하는 데 사용할 수 없습니다.  

| 인바운드 기능 | 아웃 바운드 기능 |
|---------------------|-------------------|
| 앱 할당 주소 | 하이브리드 연결 |
| 액세스 제한 | 필수 게이트웨이 VNet 통합 |
| 서비스 엔드포인트 | VNet 통합 |
| 프라이빗 엔드포인트 ||

언급 된 예외를 제외 하 고 이러한 모든 기능을 함께 사용할 수 있습니다. 기능을 조합 하 여 문제를 해결할 수 있습니다.

## <a name="use-cases-and-features"></a>사용 사례 및 기능

지정 된 사용 사례에 대해 몇 가지 방법으로 문제를 해결할 수 있습니다. 최상의 기능을 선택 하는 것은 종종 사용 사례를 초과 합니다. 다음 인바운드 사용 사례는 App Service 네트워킹 기능을 사용 하 여 앱으로 이동 하는 트래픽을 제어 하는 문제를 해결 하는 방법을 제안 합니다.
 
| 인바운드 사용 사례 | 기능 |
|---------------------|-------------------|
| 앱에 대 한 IP 기반 SSL 요구 사항 지원 | 앱 할당 주소 |
| 앱에 대 한 공유 되지 않은 전용 인바운드 주소 지원 | 앱 할당 주소 |
| 잘 정의 된 주소 집합에서 앱에 대 한 액세스 제한 | 액세스 제한 |
| 가상 네트워크의 리소스에서 앱에 대 한 액세스 제한 | 서비스 엔드포인트 </br> ILB ASE </br> 프라이빗 엔드포인트 |
| 가상 네트워크의 개인 IP에 앱 노출 | ILB ASE </br> 프라이빗 엔드포인트 </br> 서비스 끝점을 사용 하는 Application Gateway 인스턴스의 인바운드 트래픽에 대 한 개인 IP |
| WAF (웹 응용 프로그램 방화벽)를 사용 하 여 앱 보호 | Application Gateway 및 ILB ASE </br> 전용 끝점을 사용 하 여 Application Gateway </br> 서비스 엔드포인트가 있는 애플리케이션 게이트웨이 </br> 액세스 제한이 있는 Azure Front 도어 |
| 다른 지역의 앱에 트래픽 부하 분산 | 액세스 제한이 있는 Azure Front 도어 | 
| 동일한 지역에서 트래픽 부하 분산 | [서비스 엔드포인트가 있는 애플리케이션 게이트웨이][appgwserviceendpoints] | 

다음 아웃 바운드 사용 사례는 App Service 네트워킹 기능을 사용 하 여 앱에 대 한 아웃 바운드 액세스 요구를 해결 하는 방법을 제안 합니다.

| 아웃 바운드 사용 사례 | 기능 |
|---------------------|-------------------|
| 동일한 지역에 있는 Azure 가상 네트워크의 리소스에 액세스 | VNet 통합 </br> ASE |
| 다른 지역에 있는 Azure 가상 네트워크의 리소스에 액세스 | 필수 게이트웨이 VNet 통합 </br> ASE 및 가상 네트워크 피어 링 |
| 서비스 끝점으로 보안이 유지 되는 리소스에 액세스 | VNet 통합 </br> ASE |
| Azure에 연결 되지 않은 개인 네트워크의 리소스에 액세스 | 하이브리드 연결 |
| Azure Express 경로 회로에서 리소스 액세스 | VNet 통합 </br> ASE | 
| 웹 앱에서 아웃 바운드 트래픽 보호 | VNet 통합 및 네트워크 보안 그룹 </br> ASE | 
| 웹 앱에서 아웃 바운드 트래픽 라우팅 | VNet 통합 및 경로 테이블 </br> ASE | 


### <a name="default-networking-behavior"></a>기본 네트워킹 동작

Azure App Service 배율 단위는 각 배포에서 많은 고객을 지원 합니다. 무료 및 공유 SKU 요금제는 다중 테 넌 트 작업자의 고객 작업을 호스팅합니다. 기본 및 고급 계획은 하나의 App Service 요금제 전용 고객 워크 로드를 호스트 합니다. 표준 App Service 계획이 있는 경우 해당 계획의 모든 앱이 동일한 작업자에서 실행 됩니다. Worker를 확장 하는 경우 해당 App Service 계획의 모든 앱이 App Service 계획의 각 인스턴스에 대 한 새 작업자에 복제 됩니다. 

#### <a name="outbound-addresses"></a>아웃 바운드 주소

작업자 Vm은 App Service 계획에 의해 크게 분할 됩니다. 무료, 공유, 기본, 표준 및 프리미엄 요금제는 모두 동일한 작업자 VM 유형을 사용 합니다. PremiumV2 계획은 다른 VM 유형을 사용 합니다. PremiumV3은 아직 다른 VM 유형을 사용 합니다. VM 제품군을 변경 하는 경우 다른 아웃 바운드 주소 집합을 얻습니다. 표준에서 PremiumV2로 크기를 조정 하는 경우 아웃 바운드 주소가 변경 됩니다. PremiumV2에서 PremiumV3로 크기를 조정 하는 경우 아웃 바운드 주소가 변경 됩니다. 일부 이전 배율 단위에서는 표준에서 PremiumV2로 크기를 조정할 때 인바운드 및 아웃 바운드 주소가 모두 변경 됩니다. 

아웃 바운드 호출에 사용 되는 주소는 여러 가지가 있습니다. 아웃 바운드 호출을 수행 하기 위해 앱에서 사용 하는 아웃 바운드 주소는 앱에 대 한 속성에 나열 됩니다. 이러한 주소는 App Service 배포의 동일한 작업자 VM 제품군에서 실행 되는 모든 앱에서 공유 됩니다. 앱이 배율 단위에서 사용할 수 있는 모든 주소를 보려는 경우이를 `possibleOutboundAddresses` 나열 하는 라는 속성이 있습니다. 

![앱 속성을 보여 주는 스크린샷](media/networking-features/app-properties.png)

App Service에는 서비스를 관리 하는 데 사용 되는 여러 끝점이 있습니다.  이러한 주소는 별도 문서에 게시 되며 `AppServiceManagement` IP 서비스 태그에도 있습니다. `AppServiceManagement`태그는 이러한 트래픽을 허용 해야 하는 App Service 환경 에서만 사용 됩니다. App Service 인바운드 주소는 `AppService` IP 서비스 태그에서 추적 됩니다. App Service에서 사용 하는 아웃 바운드 주소를 포함 하는 IP 서비스 태그가 없습니다. 

![인바운드 및 아웃 바운드 트래픽을 App Service 표시 하는 다이어그램입니다.](media/networking-features/default-behavior.png)

### <a name="app-assigned-address"></a>앱 할당 주소 

앱 할당 주소 기능은 IP 기반 SSL 기능을 오프 하는 것입니다. 앱에서 SSL을 설정 하 여 액세스 합니다. IP 기반 SSL 호출에이 기능을 사용할 수 있습니다. 이를 사용 하 여 앱에만 있는 주소를 제공할 수도 있습니다. 

![앱 할당 주소를 보여 주는 다이어그램입니다.](media/networking-features/app-assigned-address.png)

앱 할당 주소를 사용 하는 경우 트래픽은 들어오는 모든 트래픽을 App Service 배율 단위로 처리 하는 동일한 프런트 엔드 역할을 계속 거칩니다. 하지만 앱에 할당 된 주소는 앱 에서만 사용 됩니다. 이 기능에 대 한 사용 사례:

* 앱에 대 한 IP 기반 SSL 요구 사항을 지원 합니다.
* 공유 되지 않는 앱에 대 한 전용 주소를 설정 합니다.

앱에서 주소를 설정 하는 방법을 알아보려면 [Azure App Service에서 TLS/SSL 인증서 추가][appassignedaddress]를 참조 하세요. 

### <a name="access-restrictions"></a>액세스 제한 

액세스 제한을 통해 *인바운드* 요청을 필터링 할 수 있습니다. 필터링 작업은 앱이 실행 되는 작업자 역할에서 업스트림 인 프런트 엔드 역할에 대해 수행 됩니다. 프런트 엔드 역할은 작업자의 업스트림 이므로 액세스 제한 사항을 앱에 대 한 네트워크 수준 보호로 간주할 수 있습니다. 

이 기능을 사용 하면 우선 순위에 따라 평가 되는 허용 및 거부 규칙 목록을 작성할 수 있습니다. Azure 네트워킹의 NSG (네트워크 보안 그룹) 기능과 유사 합니다. ASE 또는 다중 테 넌 트 서비스에서이 기능을 사용할 수 있습니다. ILB ASE 또는 개인 끝점에서 사용 하는 경우 개인 주소 블록에서 액세스를 제한할 수 있습니다.
> [!NOTE]
> 앱 당 최대 512 액세스 제한 규칙을 구성할 수 있습니다. 

![액세스 제한을 보여 주는 다이어그램입니다.](media/networking-features/access-restrictions.png)

#### <a name="ip-based-access-restriction-rules"></a>IP 기반 액세스 제한 규칙

IP 기반 액세스 제한 기능은 앱에 연결 하는 데 사용할 수 있는 IP 주소를 제한 하려는 경우에 유용 합니다. IPv4 및 IPv6 모두 지원됩니다. 이 기능의 몇 가지 사용 사례는 다음과 같습니다.
* 잘 정의 된 주소 집합에서 앱에 대 한 액세스를 제한 합니다. 
* Azure Front 도어와 같은 부하 분산 서비스를 통해 들어오는 트래픽에 대 한 액세스를 제한 합니다. Azure Front 도어로의 인바운드 트래픽을 잠그려면 147.243.0.0/16 및 2a01:111:2050:/44의 트래픽을 허용 하는 규칙을 만듭니다. 

이 기능을 사용 하도록 설정 하는 방법에 대 한 자세한 내용은 [액세스 제한 구성][iprestrictions]을 참조 하세요.

#### <a name="access-restriction-rules-based-on-service-endpoints"></a>서비스 끝점을 기반으로 하는 액세스 제한 규칙 

서비스 끝점을 사용 하 여 앱에 대 한 *인바운드* 액세스를 잠그고 원본 주소를 선택한 서브넷 집합에서 가져와야 합니다. 이 기능은 IP 액세스 제한과 함께 작동 합니다. 서비스 끝점은 원격 디버깅과 호환 되지 않습니다. 앱에서 원격 디버깅을 사용 하려는 경우 클라이언트는 서비스 끝점을 사용 하도록 설정 된 서브넷에 있을 수 없습니다. 서비스 끝점을 설정 하는 프로세스는 IP 액세스 제한을 설정 하는 프로세스와 비슷합니다. 가상 네트워크의 공용 주소 및 서브넷을 포함 하는 액세스 규칙의 허용/거부 목록을 작성할 수 있습니다. 

이 기능의 몇 가지 사용 사례는 다음과 같습니다.

* 앱을 사용 하 여 응용 프로그램 게이트웨이를 설정 하 여 앱에 대 한 인바운드 트래픽을 잠급니다.
* 가상 네트워크의 리소스로 앱에 대 한 액세스를 제한 합니다. 이러한 리소스에는 Vm, Ase 또는 VNet 통합을 사용 하는 다른 앱도 포함 될 수 있습니다. 

![Application Gateway에서 서비스 끝점을 사용 하는 방법을 보여 주는 다이어그램입니다.](media/networking-features/service-endpoints-appgw.png)

앱을 사용 하 여 서비스 끝점을 구성 하는 방법에 대 한 자세한 내용은 [Azure App Service 액세스 제한][serviceendpoints]을 참조 하세요.

### <a name="private-endpoint"></a>Private Endpoint

개인 끝점은 Azure 개인 링크를 통해 웹 앱에 안전 하 게 안전 하 게 연결 하는 네트워크 인터페이스입니다. 개인 끝점은 가상 네트워크의 개인 IP 주소를 사용 하 여 웹 앱을 가상 네트워크에 효과적으로 제공 합니다. 이 기능은 웹 앱에 대 한 *인바운드* 흐름에만 해당 됩니다.
자세한 내용은 [Azure 웹 앱에 대 한 개인 끝점 사용][privateendpoints]을 참조 하세요.

이 기능의 몇 가지 사용 사례는 다음과 같습니다.

* 가상 네트워크의 리소스에서 앱에 대 한 액세스를 제한 합니다. 
* 가상 네트워크의 개인 IP에 앱을 노출 합니다. 
* WAF를 사용 하 여 앱을 보호 합니다.

개인 끝점은 구성 된 앱 뿐 아니라 개인 끝점을 통해 도달할 수 있는 유일한 사항은 데이터 반출을 방지 합니다. 
 
### <a name="hybrid-connections"></a>하이브리드 연결

App Service 하이브리드 연결를 사용 하면 앱에서 지정 된 TCP 끝점에 대 한 *아웃 바운드* 호출을 수행할 수 있습니다. 끝점은 온-프레미스, 가상 네트워크 또는 포트 443에서 Azure로의 아웃 바운드 트래픽을 허용 하는 모든 곳에 있을 수 있습니다. 기능을 사용 하려면 Windows Server 2012 이상 호스트에 하이브리드 연결 관리자 라는 릴레이 에이전트를 설치 해야 합니다. 하이브리드 연결 관리자는 포트 443에서 Azure Relay에 도달할 수 있어야 합니다. 포털의 App Service 하이브리드 연결 UI에서 하이브리드 연결 관리자를 다운로드할 수 있습니다. 

![하이브리드 연결 네트워크 흐름을 보여 주는 다이어그램입니다.](media/networking-features/hybrid-connections.png)

App Service 하이브리드 연결 Azure Relay 하이브리드 연결 기능을 기반으로 합니다. App Service는 앱에서 TCP 호스트 및 포트에 대 한 아웃 바운드 호출을 지 원하는 특수 한 형식의 기능을 사용 합니다. 이 호스트 및 포트는 하이브리드 연결 관리자가 설치 된 호스트 에서만 확인 하면 됩니다. 

앱이 하이브리드 연결에 정의 된 호스트 및 포트에서 DNS 조회를 수행 하는 경우 트래픽은 자동으로 리디렉션되어 하이브리드 연결 및 하이브리드 연결 관리자를 통해 이동 App Service. 자세히 알아보려면 [App Service 하이브리드 연결][hybridconn]를 참조 하세요.

이 기능은 다음과 같은 경우에 일반적으로 사용 됩니다.

* VPN 또는 Express 경로를 사용 하 여 Azure에 연결 되지 않은 개인 네트워크의 리소스에 액세스 합니다.
* 지원 데이터베이스를 이동할 필요 없이 온-프레미스 앱을 App Service로 마이그레이션할 수 있습니다.  
* 하이브리드 연결당 단일 호스트 및 포트에 대 한 향상 된 보안 기능을 제공 합니다. 대부분의 네트워킹 기능에서는 네트워크에 대 한 액세스를 엽니다. 하이브리드 연결를 사용 하면 단일 호스트 및 포트에만 도달할 수 있습니다.
* 다른 아웃 바운드 연결 방법에서 다루지 않는 시나리오를 다룹니다.
* 앱이 온-프레미스 리소스를 쉽게 사용할 수 있도록 하는 방식으로 App Service에서 개발을 수행 합니다. 

이 기능은 인바운드 방화벽을 사용 하지 않고 온-프레미스 리소스에 대 한 액세스를 허용 하므로 개발자는 널리 사용 됩니다. 다른 아웃 바운드 App Service 네트워킹 기능은 Azure Virtual Network와 관련 되어 있습니다. 하이브리드 연결는 가상 네트워크를 통해 이동 하는 것에 의존 하지 않습니다. 광범위 한 네트워킹 요구 사항에 사용할 수 있습니다. 

App Service 하이브리드 연결는이를 기반으로 수행 하는 작업을 인식 하지 못합니다. 따라서이를 사용 하 여 데이터베이스, 웹 서비스 또는 메인프레임의 임의 TCP 소켓에 액세스할 수 있습니다. 이 기능은 기본적으로 TCP 패킷을 터널링 합니다. 

하이브리드 연결는 개발에 널리 사용 되지만 프로덕션 응용 프로그램 에서도 사용 됩니다. 웹 서비스 또는 데이터베이스에 액세스 하는 것이 좋지만 많은 연결을 만드는 경우에는 적합 하지 않습니다. 

### <a name="gateway-required-vnet-integration"></a>필수 게이트웨이 VNet 통합 

게이트웨이-앱이 Azure virtual network에 *아웃 바운드* 요청을 만들 수 있도록 VNet 통합 App Service 필요 합니다. 이 기능은 앱이 실행 되는 호스트를 지점 및 사이트 간 VPN을 사용 하 여 가상 네트워크의 Virtual Network 게이트웨이에 연결 하는 방식으로 작동 합니다. 기능을 구성할 때 앱은 각 인스턴스에 할당 된 지점 및 사이트 간 주소 중 하나를 가져옵니다. 이 기능을 사용 하면 모든 지역의 클래식 또는 Azure Resource Manager 가상 네트워크에 있는 리소스에 액세스할 수 있습니다. 

![게이트웨이 필수 VNet 통합을 설명 하는 다이어그램입니다.](media/networking-features/gw-vnet-integration.png)

이 기능은 다른 가상 네트워크에 있는 리소스에 액세스 하는 문제를 해결 합니다. 가상 네트워크를 통해 다른 가상 네트워크 또는 온-프레미스에 연결 하는 데도 사용할 수 있습니다. Express 경로 연결 가상 네트워크에서는 작동 하지 않지만 사이트 간 VPN 연결 네트워크와 함께 작동 합니다. ASE가 이미 가상 네트워크에 있으므로 ASE (App Service Environment)의 앱에서이 기능을 사용 하는 것은 일반적으로 적합 하지 않습니다. 이 기능에 대 한 사용 사례:

* Azure 가상 네트워크의 개인 Ip에 있는 리소스에 액세스 합니다. 
* 사이트 간 VPN을 사용 하는 경우 온-프레미스 리소스에 액세스 합니다. 
* 피어 링 가상 네트워크의 리소스에 액세스 합니다. 

이 기능을 사용 하도록 설정 하면 앱은 대상 가상 네트워크가 구성 된 DNS 서버를 사용 합니다. 이 기능에 대 한 자세한 내용은 [App Service VNet 통합][vnetintegrationp2s]을 참조 하세요. 

### <a name="vnet-integration"></a>VNet 통합

게이트웨이-필요한 VNet 통합이 유용 하지만 Express 경로에서 리소스에 액세스 하는 문제를 해결 하지는 않습니다. Express 경로 연결을 통해 연결 해야 하는 경우 앱이 서비스 끝점에 의해 보호 되는 서비스에 대 한 호출을 수행할 수 있어야 합니다. 다른 VNet 통합 기능이 이러한 요구 사항을 충족할 수 있습니다. 

새 VNet 통합 기능을 사용 하면 앱의 백 엔드를 앱과 동일한 지역에 있는 리소스 관리자 가상 네트워크의 서브넷에 둘 수 있습니다. 이 기능은 이미 가상 네트워크에 있는 App Service Environment에서 사용할 수 없습니다. 이 기능에 대 한 사용 사례:

* 동일한 지역에 있는 리소스 관리자 가상 네트워크의 리소스에 액세스 합니다.
* 서비스 끝점으로 보안이 유지 되는 리소스에 액세스 합니다. 
* Express 경로 또는 VPN 연결을 통해 액세스할 수 있는 리소스에 액세스 합니다.
* 모든 아웃 바운드 트래픽을 보호 하는 데 도움이 됩니다. 
* 모든 아웃 바운드 트래픽을 강제로 터널링 합니다. 

![VNet 통합을 보여 주는 다이어그램입니다.](media/networking-features/vnet-integration.png)

자세히 알아보려면 [App Service VNet 통합][vnetintegration]을 참조 하세요.

### <a name="app-service-environment"></a>App Service 환경 

ASE (App Service Environment)는 가상 네트워크에서 실행 되는 Azure App Service의 단일 테 넌 트 배포입니다. 이 기능에 대 한 몇 가지 경우는 다음과 같습니다.

* 가상 네트워크의 리소스에 액세스 합니다.
* Express 경로에서 리소스에 액세스 합니다.
* 가상 네트워크에서 개인 주소를 사용 하 여 앱을 노출 합니다. 
* 서비스 끝점에서 리소스에 액세스 합니다. 

Ase를 사용 하면 ASE가 이미 가상 네트워크에 있기 때문에 VNet 통합 또는 서비스 끝점과 같은 기능을 사용할 필요가 없습니다. 서비스 끝점을 통해 SQL 또는 Azure Storage 같은 리소스에 액세스 하려면 ASE 서브넷에서 서비스 끝점을 사용 하도록 설정 합니다. 가상 네트워크의 리소스에 액세스 하려는 경우에는 추가 구성을 수행할 필요가 없습니다. Express 경로에서 리소스에 액세스 하려는 경우 가상 네트워크에 이미 있는 것 이며 ASE 또는 그 안에 있는 앱에서 아무것도 구성할 필요가 없습니다. 

ILB ASE의 앱은 개인 IP 주소에 노출 될 수 있으므로, 인터넷에 추가 하려는 앱만 노출 하 고 나머지 보안을 유지 하기 위해 WAF 장치를 쉽게 추가할 수 있습니다. 이 기능을 사용 하면 다중 계층 응용 프로그램을 쉽게 개발할 수 있습니다. 

일부 항목은 현재 다중 테 넌 트 서비스에서 가능 하지 않지만 ASE에서 가능 합니다. 몇 가지 예제는 다음과 같습니다.

* 개인 IP 주소에 앱을 노출 합니다.
* 응용 프로그램의 일부가 아닌 네트워크 제어를 사용 하 여 모든 아웃 바운드 트래픽의 보안을 유지 합니다.
* 단일 테 넌 트 서비스에서 앱을 호스팅합니다. 
* 다중 테 넌 트 서비스에서 가능한 것 보다 많은 인스턴스를 확장 합니다. 
* 개인 ca 보안 끝점을 사용 하 여 앱에서 사용할 개인 CA 클라이언트 인증서를 로드 합니다.
* 앱 수준에서 사용 하지 않도록 설정 하는 기능 없이 시스템에서 호스트 되는 모든 앱에서 TLS 1.1을 강제 적용 합니다. 
* 고객과 공유 되지 않는 ASE의 모든 앱에 대 한 전용 아웃 바운드 주소를 제공 합니다. 

![가상 네트워크의 ASE를 설명 하는 다이어그램입니다.](media/networking-features/app-service-environment.png)

ASE는 격리 된 전용 앱 호스팅에 대 한 최상의 사례를 제공 하지만 일부 관리 문제도 포함 합니다. 작업 ASE를 사용 하기 전에 고려해 야 할 몇 가지 사항은 다음과 같습니다.
 
 * ASE는 가상 네트워크 내에서 실행 되지만 가상 네트워크 외부에 종속성이 있습니다. 이러한 종속성은 허용 되어야 합니다. 자세한 내용은 [App Service Environment 네트워킹 고려 사항][networkinfo]을 참조 하세요.
 * ASE는 다중 테 넌 트 서비스와 마찬가지로 즉시 확장 되지 않습니다. 대응적 크기 조정 보다는 크기 조정이 필요 합니다. 
 * ASE에는 사전 투자 비용이 더 높습니다. ASE를 최대한 활용 하려면 작은 노력에 사용 하는 것 보다 많은 워크 로드를 하나의 ASE로 배치 하도록 계획 해야 합니다.
 * ASE의 앱은 다른 사용자가 아닌 ASE의 일부 앱에 대 한 액세스를 선택적으로 제한할 수 없습니다.
 * ASE는 서브넷에 있고 모든 네트워킹 규칙은 해당 ASE로 들어오고 나가는 모든 트래픽에 적용 됩니다. 하나의 앱에 대해서만 인바운드 트래픽 규칙을 할당 하려면 액세스 제한을 사용 합니다. 

## <a name="combining-features"></a>기능 결합 

다중 테 넌 트 서비스에 대해 언급 된 기능을 함께 사용 하 여 보다 정교한 사용 사례를 해결할 수 있습니다. 이러한 두 가지 일반적인 사용 사례는 여기에 설명 되어 있지만 단지 예제입니다. 다양 한 기능을 이해 하면 거의 모든 시스템 아키텍처 요구 사항을 충족할 수 있습니다.

### <a name="place-an-app-into-a-virtual-network"></a>가상 네트워크에 앱 추가

앱을 가상 네트워크에 배치 하는 방법을 궁금할 수 있습니다. 앱을 가상 네트워크에 배치 하는 경우 앱에 대 한 인바운드 및 아웃 바운드 끝점은 가상 네트워크 내에 있습니다. ASE는이 문제를 해결 하는 가장 좋은 방법입니다. 하지만 기능을 결합 하 여 다중 테 넌 트 서비스 내에서 대부분의 요구 사항을 충족할 수 있습니다. 예를 들어 다음을 수행 하 여 전용 인바운드 및 아웃 바운드 주소로 인트라넷 전용 응용 프로그램을 호스트할 수 있습니다.

* 개인 인바운드 및 아웃 바운드 주소를 사용 하 여 응용 프로그램 게이트웨이 만들기
* 서비스 끝점을 사용 하 여 앱에 대 한 인바운드 트래픽 보안 
* 새 VNet 통합 기능을 사용 하 여 앱의 백 엔드가 가상 네트워크에 있습니다. 

이 배포 스타일은 인터넷에 대 한 아웃 바운드 트래픽의 전용 주소 또는 앱에서 모든 아웃 바운드 트래픽을 잠글 수 있는 기능을 제공 하지 않습니다. 다른 방법으로는 ASE를 사용 하 여 얻을 수 있는 기능을 많이 제공 합니다. 

### <a name="create-multitier-applications"></a>다중 계층 응용 프로그램 만들기

다중 계층 응용 프로그램은 프런트 엔드 계층 에서만 API 백 엔드 앱에 액세스할 수 있는 응용 프로그램입니다. 다중 계층 응용 프로그램을 만드는 방법에는 두 가지가 있습니다. 둘 다 VNet 통합을 사용 하 여 프런트 엔드 웹 앱을 가상 네트워크의 서브넷에 연결 합니다. 이렇게 하면 웹 앱에서 가상 네트워크에 대 한 호출을 수행할 수 있습니다. 프런트 엔드 앱이 가상 네트워크에 연결 된 후에는 API 응용 프로그램에 대 한 액세스를 잠그는 방법을 결정 해야 합니다. 다음을 수행할 수 있습니다.

* 동일한 ILB ASE에서 프런트 엔드 및 API 앱을 모두 호스팅하고 응용 프로그램 게이트웨이를 사용 하 여 프런트 엔드 앱을 인터넷에 노출 합니다.
* 다중 테 넌 트 서비스에서 프런트 엔드를 호스트 하 고 ILB ASE의 백 엔드를 호스트 합니다.
* 다중 테 넌 트 서비스에서 프런트 엔드 및 API 앱을 모두 호스팅합니다.

다중 계층 응용 프로그램에 대 한 프런트 엔드 및 API 앱을 모두 호스트 하는 경우 다음을 수행할 수 있습니다.

- 가상 네트워크에서 개인 끝점을 사용 하 여 API 응용 프로그램을 노출 합니다.

  ![2 계층 앱에서 전용 끝점을 사용 하는 방법을 보여 주는 다이어그램입니다.](media/networking-features/multi-tier-app-private-endpoint.png)

- 서비스 끝점을 사용 하 여 API 앱에 대 한 인바운드 트래픽이 프런트 엔드 웹 앱에서 사용 하는 서브넷 에서만 제공 되도록 합니다.

  ![서비스 끝점을 사용 하 여 앱의 보안을 유지 하는 방법을 보여 주는 다이어그램입니다.](media/networking-features/multi-tier-app.png)

사용할 방법을 결정 하는 데 도움이 되는 몇 가지 고려 사항은 다음과 같습니다.

* 서비스 끝점을 사용 하는 경우 API 앱에 대 한 트래픽을 통합 서브넷으로 보호 하기만 하면 됩니다. 이렇게 하면 API 앱을 보호 하는 데 도움이 되지만, 프런트 엔드 앱에서 app service의 다른 앱으로 데이터를 필터링 할 수 있습니다.
* 개인 끝점을 사용 하는 경우 두 개의 서브넷을 사용 하 여 복잡성이 증가 합니다. 또한 개인 끝점은 최상위 리소스 이며 관리 오버 헤드를 추가 합니다. 개인 끝점을 사용 하는 경우의 혜택은 데이터 exfiltration의 가능성이 없다는 것입니다. 

두 메서드는 여러 프런트 엔드에 대해 작동 합니다. 작은 규모의 경우 프런트 엔드 통합 서브넷에서 API 앱에 대 한 서비스 끝점을 사용 하도록 설정 하기 때문에 서비스 끝점을 사용 하는 것이 더 쉽습니다. 프런트 엔드 앱을 더 추가 하는 경우 통합 서브넷을 사용 하 여 서비스 끝점을 포함 하도록 모든 API 앱을 조정 해야 합니다. 개인 끝점을 사용 하는 경우 더 복잡 하지만 개인 끝점을 설정한 후에는 API 앱에서 아무것도 변경할 필요가 없습니다. 

### <a name="line-of-business-applications"></a>기간 업무 애플리케이션

LOB (기간 업무) 응용 프로그램은 인터넷에서 액세스 하기 위해 일반적으로 노출 되지 않는 내부 응용 프로그램입니다. 이러한 응용 프로그램은 액세스를 엄격 하 게 제어할 수 있는 회사 네트워크 내부에서 호출 됩니다. ILB ASE를 사용 하는 경우 lob (기간 업무) 응용 프로그램을 쉽게 호스트할 수 있습니다. 다중 테 넌 트 서비스를 사용 하는 경우 개인 끝점을 사용 하거나 응용 프로그램 게이트웨이와 결합 된 서비스 끝점을 사용할 수 있습니다. 개인 끝점을 사용 하는 대신 서비스 엔드포인트를 사용 하는 응용 프로그램 게이트웨이를 사용 하는 두 가지 이유는 다음과 같습니다.
* LOB 앱에 대해 WAF 보호가 필요 합니다.
* LOB 앱의 여러 인스턴스에 부하를 분산 하려고 합니다.

이러한 요구 사항이 적용 되지 않는 경우 개인 끝점을 사용 하는 것이 더 좋습니다. App Service에서 사용할 수 있는 개인 끝점을 사용 하면 가상 네트워크의 개인 주소에 앱을 노출할 수 있습니다. 가상 네트워크에 배치한 개인 끝점은 Express 경로 및 VPN 연결에서 연결할 수 있습니다. 

개인 끝점을 구성 하면 개인 주소에 앱이 노출 되지만 온-프레미스에서 해당 주소에 연결 하도록 DNS를 구성 해야 합니다. 이 구성이 작동 하려면 개인 끝점을 포함 하는 Azure DNS 개인 영역을 온-프레미스 DNS 서버에 전달 해야 합니다. Azure DNS 개인 영역은 영역 전달을 지원 하지 않지만 해당 목적으로 DNS 서버를 사용 하 여 영역 전달을 지원할 수 있습니다. [Dns 전달자](https://azure.microsoft.com/resources/templates/301-dns-forwarder/) 템플릿을 사용 하면 Azure DNS 개인 영역을 온-프레미스 DNS 서버에 쉽게 전달할 수 있습니다.

## <a name="app-service-ports"></a>App Service 포트

App Service를 검색 하는 경우 인바운드 연결에 대해 노출 되는 여러 포트를 찾을 수 있습니다. 다중 테 넌 트 서비스에서 이러한 포트에 대 한 액세스를 차단 하거나 제어 하는 방법은 없습니다. 표시 되는 포트 목록은 다음과 같습니다.

| 기능 | 포트 또는 포트 |
|----------|-------------|
|  HTTP/HTTPS  | 80, 443 |
|  관리 | 454, 455 |
|  FTP/FTPS    | 21, 990, 10001-10020 |
|  Visual Studio 원격 디버깅  |  4020, 4022, 4024 |
|  웹 배포 서비스 | 8172 |
|  인프라 사용 | 7654, 1221 |

<!--Links-->
[appassignedaddress]: https://docs.microsoft.com/azure/app-service/configure-ssl-certificate
[iprestrictions]: https://docs.microsoft.com/azure/app-service/app-service-ip-restrictions
[serviceendpoints]: https://docs.microsoft.com/azure/app-service/app-service-ip-restrictions
[hybridconn]: https://docs.microsoft.com/azure/app-service/app-service-hybrid-connections
[vnetintegrationp2s]: https://docs.microsoft.com/azure/app-service/web-sites-integrate-with-vnet
[vnetintegration]: https://docs.microsoft.com/azure/app-service/web-sites-integrate-with-vnet
[networkinfo]: https://docs.microsoft.com/azure/app-service/environment/network-info
[appgwserviceendpoints]: https://docs.microsoft.com/azure/app-service/networking/app-gateway-with-service-endpoints
[privateendpoints]: https://docs.microsoft.com/azure/app-service/networking/private-endpoint
