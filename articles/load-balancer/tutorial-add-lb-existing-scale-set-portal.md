---
title: '자습서: 기존 가상 머신 확장 집합에 Azure Load Balancer 추가 - Azure Portal'
description: 이 자습서에서는 Azure Portal을 사용하여 기존 가상 머신 확장 집합에 부하 분산 장치를 추가하는 방법을 알아봅니다.
author: asudbring
ms.author: allensu
ms.service: load-balancer
ms.topic: tutorial
ms.date: 4/21/2021
ms.custom: template-tutorial
ms.openlocfilehash: cb87efe8402d49463d10e25aa79c50fc3b9b4c6e
ms.sourcegitcommit: bd1a4e4df613ff24e954eb3876aebff533b317ae
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/23/2021
ms.locfileid: "107931044"
---
# <a name="tutorial-add-azure-load-balancer-to-an-existing-virtual-machine-scale-set-using-the-azure-portal"></a>자습서: Azure Portal을 사용하여 기존 가상 머신 확장 집합에 Azure Load Balancer 추가

이 작업은 Azure Load Balancer와 가상 머신 확장 집합이 연결되지 않은 경우에 필요할 수 있습니다. 

업데이트가 필요한 Azure Load Balancer와 함께 기존 가상 머신 확장 집합을 배포했을 수 있습니다.

Azure Portal을 사용하여 가상 머신 확장 집합과 연결된 Azure Load Balancer를 추가하거나 업데이트할 수 있습니다.  

이 자습서에서는 다음 작업 방법을 알아봅니다.

> [!div class="checklist"]
> * 가상 네트워크 만들기
> * 아웃바운드 연결에 대한 NAT 게이트웨이 만들기
> * 표준 SKU Azure Load Balancer 만들기
> * 부하 분산 장치를 사용하지 않고 가상 머신 확장 집합 만들기
> * 가상 머신 확장 집합에 Azure Load Balancer 추가

## <a name="prerequisites"></a>필수 구성 요소

- 활성 구독이 있는 Azure 계정. [체험 계정 만들기](https://azure.microsoft.com/free/?WT.mc_id=A261C142F)

## <a name="create-a-virtual-network"></a>가상 네트워크 만들기

이 섹션에서는 본 자습서에서 사용되는 확장 집합 및 기타 리소스에 대한 가상 네트워크를 만듭니다.

1. [Azure Portal](https://portal.azure.com)에 로그인합니다.

2. 포털 맨 위에 있는 검색 상자에 **가상 네트워크** 를 입력합니다.

3. 검색 결과에서 **가상 네트워크** 를 선택합니다.

4. **+ 만들기** 를 선택합니다.

5. **가상 네트워크 만들기** 의 **기본 사항** 탭에서 다음 정보를 입력하거나 선택합니다.

    | 설정 | 값 |
    | ------- | ------|
    | **프로젝트 세부 정보** |   |
    | Subscription | 구독을 선택합니다. |
    | Resource group | **새로 만들기** 를 선택합니다. </br> **이름** 에 **TutorLBVMSS-rg** 를 입력합니다. </br> **확인** 을 선택합니다. |
    | **인스턴스 세부 정보** |   |
    | 속성 | **myVNet** 을 입력합니다. |
    | 지역 | **미국 서부 2** 를 선택합니다. |

6. **IP 주소** 탭 또는 페이지 하단의 **다음: IP 주소** 단추를 선택합니다.

7. **IP 주소** 탭의 **서브넷 이름** 에서 **기본값** 을 선택합니다.

8. **서브넷 편집** 창의 **서브넷 이름** 에서 **myBackendSubnet** 을 입력합니다.

9. **저장** 을 선택합니다.

10. **보안** 탭 또는 페이지 하단에 있는 **다음: 보안** 단추를 선택합니다.

11. **보안** 탭의 **BastionHost** 에서 **사용** 을 선택합니다.

12. 다음 정보를 입력하거나 선택합니다.

    | 설정 | 값 |
    | ------- | ----- |
    | Bastion 이름 | **MyBastionHost** 를 입력합니다. |
    | AzureBastionSubnet 주소 공간 | **10.1.1.0/27** 을 입력합니다. |
    | 공용 IP 주소 | **새로 만들기** 를 선택합니다. </br> **이름** 에 **myBastionIP** 를 입력합니다. |

13. **검토 + 만들기** 탭 또는 페이지 아래쪽에 있는 파란색 **검토 + 만들기** 단추를 선택합니다.

14. **만들기** 를 선택합니다.

## <a name="create-nat-gateway"></a>NAT 게이트웨이 만들기 

이 섹션에서는 가상 머신의 아웃바운드 연결에 대한 NAT 게이트웨이를 만듭니다.

1. 포털 맨 위에 있는 검색 상자에 **NAT 게이트웨이** 를 입력합니다.

2. 검색 결과에서 **NAT 게이트웨이** 를 선택합니다.

3. **+ 만들기** 를 선택합니다.

4. **NAT(Network Address Translation) 게이트웨이 만들기** 의 **기본 사항** 탭에서 다음 정보를 입력하거나 선택합니다.

    | 설정 | 값 |
    | ------- | ----- |
    | **프로젝트 세부 정보** |   |
    | Subscription | 구독을 선택합니다. |
    | Resource group | **TutorLBVMSS-rg** 를 선택합니다. |
    | **인스턴스 세부 정보** |   |
    | NAT 게이트웨이 이름 | **myNATgateway** 를 입력합니다. |
    | 지역 | **미국 서부 2** 를 선택합니다. |
    | 가용성 영역 | **없음** 을 선택합니다. |
    | 유휴 제한 시간(분) | **15** 를 입력합니다. |

5. **아웃바운드 IP** 탭을 선택하거나 페이지 하단에 있는 **다음: 아웃바운드 IP** 단추를 선택합니다.

6. **아웃바운드 IP** 탭에서 **공용 IP 주소** 옆에 있는 **새 공용 IP 주소 만들기** 를 선택합니다.

7. **이름** 에 **myPublicIP-nat** 를 입력합니다.

8. **확인** 을 선택합니다.

9. **서브넷** 탭을 선택하거나 페이지 하단에 있는 **다음: 서브넷** 단추를 선택합니다.

10. 풀 다운 메뉴의 **가상 네트워크** 에서 **myVNet** 을 선택합니다.

11. **myBackendSubnet** 옆의 확인란을 선택합니다.

12. **검토 + 만들기** 탭을 선택하거나 페이지 하단에 있는 파란색 **검토 + 만들기** 단추를 선택합니다.

13. **만들기** 를 선택합니다.

## <a name="create-load-balancer"></a>부하 분산 장치 만들기

이 섹션에서는 가상 머신에 대한 부하 분산 장치를 만듭니다.

1. 포털 맨 위에 있는 검색 상자에 **부하 분산 장치** 를 입력합니다.

2. 검색 결과에서 **부하 분산 장치** 를 선택합니다.

3. **+ 만들기** 를 선택합니다.

4. **부하 분산 장치 만들기** 페이지의 **기본 사항** 탭에서 다음 정보를 입력하거나 선택합니다.

    | 설정 | 값 |
    | ------- | ----- |
    | **프로젝트 세부 정보** |   |
    | Subscription | 구독을 선택합니다. |
    | Resource group | **TutorLBVMSS-rg** 를 선택합니다. |
    | **인스턴스 세부 정보** |   |
    | 속성 | **myLoadBalancer** 를 입력합니다. |
    | 지역 | **미국 서부 2** 를 선택합니다. |
    | Type | **공용**(기본값)을 그대로 둡니다. |
    | SKU | 기본값인 **표준** 을 그대로 둡니다. |
    | 계층 | **지역**(기본값)을 그대로 둡니다. |
    | **공용 IP 주소** |   |
    | 공용 IP 주소 | **새로 만들기**(기본값)를 그대로 둡니다. |
    | 공용 IP 주소 이름 | **myPublicIP-lb** 를 입력합니다. |
    | 가용성 영역 | **영역 중복** 을 선택합니다. |
    | 공용 IPv6 주소 추가 | **아니요**(기본값)를 그대로 둡니다. |
    | 라우팅 기본 설정 | **Microsoft 네트워크** 의 기본값을 그대로 둡니다. |

5. **검토 + 만들기** 탭을 선택하거나 페이지 하단에 있는 파란색 **검토 + 만들기** 단추를 선택합니다.

6. **만들기** 를 선택합니다.

### <a name="configure-load-balancer-settings"></a>부하 분산 장치 설정 구성

이 섹션에서는 **myLoadBalancer** 에 대한 백 엔드 풀을 만듭니다.

**HTTP** 및 **포트 80** 을 모니터링하는 상태 프로브를 만듭니다. 상태 프로브는 백 엔드 풀에 있는 가상 머신의 상태를 모니터링합니다. 

아웃바운드 SNAT를 사용하지 않도록 설정하여 **포트 80** 에 대한 부하 분산 규칙을 만듭니다. 앞에서 만든 NAT 게이트웨이가 가상 머신의 아웃바운드 연결을 처리합니다.

1. 포털 맨 위에 있는 검색 상자에 **부하 분산 장치** 를 입력합니다.

2. 검색 결과에서 **부하 분산 장치** 를 선택합니다.

3. **myLoadBalancer** 를 선택합니다.

4. **myLoadBalancer** 의 **설정** 에서 **백 엔드 풀** 을 선택합니다.

5. **백 엔드 풀** 에서 **+ 추가** 를 선택합니다.

6. **백 엔드 풀 추가** 에서 다음 정보를 입력하거나 선택합니다.

    | 설정 | 값 |
    | ------- | ----- |
    | 이름 | **myBackendPool** 을 입력합니다. |
    | 가상 네트워크 | **myVNet** 을 선택합니다. |
    | 백 엔드 풀 구성 | **NIC**(기본값)를 그대로 둡니다. |
    | IP 버전 | **IPv4**(기본값)를 그대로 둡니다. |

7. **추가** 를 선택합니다.

8. **상태 프로브** 를 선택합니다.

9. **+추가** 를 선택합니다.

10. **상태 프로브 추가** 에서 다음 정보를 입력하거나 선택합니다.

    | 설정 | 값 |
    | ------- | ----- |
    | 속성 | **myHTTPProbe** 를 입력합니다. |
    | 프로토콜 | **HTTP** 를 선택합니다. |
    | 포트 | **80**(기본값)을 그대로 둡니다. |
    | 경로 | **/** (기본값)를 그대로 둡니다. |
    | 간격 | **5** 초(기본값)를 그대로 둡니다. |
    | 비정상 임계값 | **2** 회 연속 실패(기본값)를 그대로 둡니다. |

11. **추가** 를 선택합니다.

12. **부하 분산 규칙** 을 선택합니다. 

13. **+추가** 를 선택합니다.

14. **부하 분산 장치 규칙** 에서 다음 정보를 입력하거나 선택합니다.

    | 설정 | 값 |
    | ------- | ----- |
    | 속성 | **myHTTPRule** 을 입력합니다. |
    | IP 버전 | **IPv4**(기본값)를 그대로 둡니다. |
    | 프런트 엔드 IP 주소 | **LoadBalancerFrontEnd** 를 선택합니다. |
    | 프로토콜 | **TCP**(기본값)를 선택합니다. |
    | 포트 | **80** 을 입력합니다. |
    | 백 엔드 포트 | **80** 을 입력합니다. |
    | 백 엔드 풀 | **myBackendPool** 을 선택합니다. |
    | 상태 프로브 | **myHTTPProbe** 를 선택합니다. |
    | 세션 지속성 | **없음** 의 기본값을 그대로 둡니다. |
    | 유휴 제한 시간(분) | 슬라이더를 **15** 로 변경합니다. |
    | TCP 재설정 | **사용** 을 선택합니다. |
    | 부동 IP | **사용 안 함**(기본값)을 그대로 둡니다. |
    | 아웃바운드 SNAT(Source Network Address Translation) | **(권장) 아웃바운드 규칙을 사용하여 백 엔드 풀 멤버에 인터넷 액세스 권한을 제공합니다.** (기본값)를 그대로 둡니다. |

5. **추가** 를 선택합니다.

## <a name="create-virtual-machine-scale-set"></a>가상 머신 확장 집합 만들기

이 섹션에서는 부하 분산 장치 없이 가상 머신 확장 집합을 만듭니다. 나중에 Azure Portal에서 이 확장 집합에 부하 분산 장치를 추가합니다.

1. 포털 맨 위에 있는 검색 상자에 **가상 머신 확장** 을 입력합니다.

2. 검색 결과에서 **가상 머신 확장 집합** 을 선택합니다.

3. **+추가** 를 선택합니다.

4. **가상 머신 확장 집합 만들기** 의 **기본 사항** 탭에서 다음 정보를 입력하거나 선택합니다.

    | 설정 | 값 |
    | ------- | ----- |
    | **프로젝트 세부 정보** |   |
    | Subscription | 구독을 선택합니다. |
    | Resource group | **TutorLBVMSS-rg** 를 선택합니다. |
    | **확장 집합 세부 정보** |   |
    | 가상 머신 확장 집합 이름 | **myVMScaleSet** 를 입력합니다. |
    | 지역 | **미국 서부 2** 를 선택합니다. |
    | 가용성 영역 | **없음** 의 기본값을 그대로 둡니다. |
    | **오케스트레이션** |   |
    | 오케스트레이션 모드 | 기본값인 **균일: 동일한 인스턴스를 사용하는 대규모 상태 비저장 워크로드에 최적화됨** 을 그대로 둡니다. |
    | **인스턴스 세부 정보** |   |
    | 이미지 | **Windows Server 2019 Datacenter - Gen1** 을 선택합니다. |
    | Azure Spot 인스턴스 | 기본값 그대로 확인란을 선택하지 않은 상태로 둡니다. |
    | 크기 | 크기를 선택합니다. |
    | **관리자 계정** |
    | 사용자 이름 | 사용자 이름을 입력합니다. |
    | 암호 | 암호를 입력합니다. |
    | 암호 확인 | 암호를 확인합니다. |

5. **네트워킹** 탭을 선택합니다.

6. **네트워킹** 탭에서 다음 정보를 입력하거나 선택합니다.

    | 설정 | 값 |
    | ------- | ----- |
    | **가상 네트워크 구성** |   |
    | 가상 네트워크 | **myVNet** 을 선택합니다. |

7. **검토 + 만들기** 탭을 선택하거나 페이지 하단에 있는 파란색 **검토 + 만들기** 단추를 선택합니다.

8. **만들기** 를 선택합니다.

## <a name="add-load-balancer-to-scale-set"></a>확장 집합에 부하 분산 장치 추가

이 섹션에서는 Azure Portal의 확장 집합으로 이동하여 확장 집합에 부하 분산 장치를 추가합니다.

1. 포털 맨 위에 있는 검색 상자에 **가상 머신 확장** 을 입력합니다.

2. 검색 결과에서 **가상 머신 확장 집합** 을 선택합니다.

3. **myVMScaleSet** 를 선택합니다.

4. **myVMScaleSet** 의 **설정** 섹션에서 **네트워킹** 을 선택 합니다.

5. **myVMScaleSet** 의 **네트워킹** 설정 **개요** 페이지에서 **부하 분산** 탭을 선택합니다.

    :::image type="content" source="./media/tutorial-add-lb-existing-scale-set-portal/load-balancing-tab.png" alt-text="네트워킹에서 부하 분산 탭을 선택합니다." border="true":::

6. 파란색 **부하 분산 추가** 단추를 선택합니다.

7. **부하 분산 추가** 에서 다음 정보를 입력하거나 선택합니다.

    | 설정 | 값 |
    | ------- | ----- |
    | 부하 분산 옵션 | **Azure Load Balancer** 를 선택합니다. |
    | 부하 분산 장치 선택 | **myLoadBalancer** 를 선택합니다. |
    | 백 엔드 풀 | **기존 항목 사용** 을 선택합니다. |
    | 백 엔드 풀 선택 | **myBackendPool** 을 선택합니다. |

8. **저장** 을 선택합니다.

## <a name="clean-up-resources"></a>리소스 정리

이 애플리케이션을 계속 사용할 계획이 없으면 다음 단계에 따라 부하 분산 장치 및 지원 리소스를 삭제합니다.

1. 포털 맨 위에 있는 검색 상자에 **리소스 그룹** 을 입력합니다.

2. 검색 결과에서 **리소스 그룹** 을 선택합니다.

3. **TutorLBVMSS-rg** 를 선택합니다.

4. **TutorLBVMSS-rg** 의 개요 페이지에서 **리소스 그룹 삭제** 를 선택합니다.

5. **리소스 그룹 이름 입력** 에 **TutorLBVMSS-rg** 를 입력합니다.

6. **삭제** 를 선택합니다.

## <a name="next-steps"></a>다음 단계

이 자습서에서는 다음을 수행합니다.

* 가상 네트워크 및 Azure Bastion 호스트를 만들었습니다.
* Azure 표준 Load Balancer를 만들었습니다.
* 가상 머신 확장 집합을 만들었습니다.
* 가상 머신 확장 집합에 부하 분산 장치를 추가했습니다.

지역 간 Azure Load Balancer를 만드는 방법을 알아보려면 다음 문서로 계속 진행하세요.
> [!div class="nextstepaction"]
> [지역 간 부하 분산 장치 만들기](tutorial-cross-region-portal.md)