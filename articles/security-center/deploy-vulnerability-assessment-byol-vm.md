---
title: Azure Security Center의 BYOL VM 취약성 평가
description: Azure Virtual Machines에 BYOL 취약성 평가 솔루션을 배포하여 가상 머신을 보호하는 데 도움이 되는 Azure Security Center의 권장 사항을 가져옵니다.
author: memildin
manager: rkarlin
ms.service: security-center
ms.topic: how-to
ms.date: 03/17/2021
ms.author: memildin
ms.openlocfilehash: 61c3d6bfc517b5a6979ea8b7a8fe895a1b3aeb44
ms.sourcegitcommit: f28ebb95ae9aaaff3f87d8388a09b41e0b3445b5
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/30/2021
ms.locfileid: "104602471"
---
# <a name="deploy-a-bring-your-own-license-byol-vulnerability-assessment-solution"></a>BYOL(사용자 라이선스 필요) 취약성 평가 솔루션 배포

**서버용 Azure Defender** 를 사용하도록 설정한 경우 [가상 머신에 대한 통합 취약성 검사기](./deploy-vulnerability-assessment-vm.md)에 설명된 대로 Azure Security Center의 기본 제공 취약성 평가 도구를 사용할 수 있습니다. 이 도구는 Azure Defender에 통합되어 있으므로 외부 라이선스가 필요하지 않습니다. 모든 항목이 Security Center 내에서 원활하게 처리됩니다. 또한 통합 검사기는 Azure Arc 사용 머신을 지원합니다.

또는 [Qualys](https://www.qualys.com/lp/azure) 또는 [Rapid7](https://www.rapid7.com/products/insightvm/)에서 개인적으로 사용이 허가된 자체 취약성 평가 솔루션을 배포할 수 있습니다. 동일한 구독에 속한 여러 VM에 해당 파트너 솔루션 중 하나를 설치할 수 있지만 Azure Arc 사용 머신에는 설치할 수 없습니다.

## <a name="availability"></a>가용성

|양상|세부 정보|
|----|:----|
|릴리스 상태:|GA(일반 공급)|
|머신 종류:|![예](./media/icons/yes-icon.png) Azure 가상 머신<br>![예](./media/icons/no-icon.png) Azure Arc 지원 머신|
|가격 책정:|Free|
|필요한 역할 및 권한:|**리소스 소유자** 는 검사기를 배포할 수 있습니다.<br>**보안 읽기 권한자** 는 발견 사항을 볼 수 있습니다.|
|클라우드:|![예](./media/icons/yes-icon.png) 상용 클라우드<br>![아니요](./media/icons/no-icon.png) 국가/소버린(미국 정부, 중국 정부, 기타 정부)|
|||


## <a name="deploy-a-byol-solution-from-the-azure-portal"></a>Azure Portal에서 BYOL 솔루션 배포

BYOL 옵션은 지원되는 타사 취약성 평가 솔루션을 참조합니다. 현재 Qualys 및 Rapid7은 모두 지원되는 공급 기업입니다.

지원되는 솔루션은 파트너의 관리 플랫폼에 취약성 데이터를 보고합니다. 그러면 파트너의 관리 플랫폼은 취약성 및 상태 모니터링 데이터를 Security Center에 다시 제공합니다. Security Center 대시보드에서 취약한 VM을 식별하고 Security Center에서 직접 파트너 관리 콘솔로 전환하여 보고서 및 자세한 정보를 볼 수 있습니다.

1. [Azure Portal](https://azure.microsoft.com/features/azure-portal/)에서 **Security Center** 를 엽니다.

1. Security Center의 메뉴에서 **권장 사항** 페이지를 엽니다.

1. **가상 머신에서 취약성 평가 솔루션을 사용하도록 설정해야 함** 권장 사항을 선택합니다.

    :::image type="content" source="./media/deploy-vulnerability-assessment-vm/recommendation-page-machine-groupings.png" alt-text="**가상 머신에서 취약성 평가 솔루션을 사용하도록 설정해야 함** 권장 사항 페이지의 머신 그룹화" lightbox="./media/deploy-vulnerability-assessment-vm/recommendation-page-machine-groupings.png":::

    VM은 다음 그룹 중 하나 이상에 표시됩니다.

    * **정상 리소스** – Security Center는 해당 VM에서 실행되는 취약성 평가 솔루션을 검색했습니다.
    * **비정상 리소스** – 해당 VM에 취약성 검사기 확장을 배포할 수 있습니다. 
    * **해당하지 않는 리소스** - 해당 VM에는 취약성 검사기 확장을 배포할 수 없습니다.

1. 비정상 머신 목록에서 취약성 평가 솔루션을 받을 머신을 선택하고 **재구성** 을 선택합니다.

    >[!IMPORTANT]
    > 구성에 따라 이 목록의 하위 집합만 표시될 수 있습니다. 
    >
    > - 타사 취약성 검사기가 구성되지 않은 경우 배포할 기회가 제공되지 않습니다.
    > - 선택한 VM이 Azure Defender로 보호되지 않는 경우 ASC 통합 취약성 검사기 옵션을 사용할 수 없습니다.

    :::image type="content" source="./media/deploy-vulnerability-assessment-vm/recommendation-remediation-options.png" alt-text="**가상 머신에서 취약성 평가 솔루션을 사용하도록 설정해야 함** 권장 사항 페이지에 응답할 때 선택하려는 수정 흐름 유형에 대한 옵션":::

1. 새 BYOL 구성을 설정하는 경우 **새 타사 취약성 검사기 구성** 을 선택하고, 관련 확장을 선택하고, **계속** 을 선택한 다음, 공급 기업의 세부 정보를 다음과 같이 입력합니다.

    1. **리소스 그룹** 에 **기존 항목 사용** 을 선택합니다. 나중에 이 리소스 그룹을 삭제하는 경우 BYOL 솔루션을 사용할 수 없습니다.
    1. **위치** 에 솔루션의 지리적 위치를 선택합니다.
    1. Qualys의 경우 Qualys에서 제공한 라이선스를 **라이선스 코드** 필드에 입력합니다.
    1. Rapid7의 경우 **Rapid7 구성 파일** 을 업로드합니다.
    1. **퍼블릭 키** 상자에 파트너가 제공하는 퍼블릭 키 정보를 입력합니다.
    1. 이 솔루션의 구독에서 검색된 모든 VM에 이 취약성 평가 에이전트를 자동으로 설치하려면 **자동 배포** 를 선택합니다.
    1. **확인** 을 선택합니다.

1. BYOL 솔루션을 이미 설정한 경우에는 **구성된 타사 취약성 검사기 배포** 를 선택하고, 관련 확장을 선택한 다음 **계속** 을 선택합니다.

취약성 평가 솔루션이 대상 머신에 설치된 후에 Security Center는 검사를 실행하여 시스템 및 애플리케이션의 취약성을 탐지하고 식별합니다. 첫 번째 검색을 완료하려면 몇 시간이 걸릴 수 있습니다. 그 후 매시간 실행됩니다.



## <a name="deploy-a-byol-solution-using-powershell-and-the-rest-api"></a>PowerShell 및 REST API를 사용하여 BYOL 솔루션 배포

[Qualys](https://www.qualys.com/lp/azure) 또는 [Rapid7](https://www.rapid7.com/products/insightvm/)에서 개인적으로 사용이 허가된 자체 취약성 평가 솔루션을 프로그래밍 방식으로 배포하려면 제공된 스크립트 [PowerShell >취약성 솔루션](https://github.com/Azure/Azure-Security-Center/tree/master/Powershell%20scripts/Vulnerability%20Solution)을 사용합니다. 이 스크립트는 REST API를 사용하여 ASC로 새 보안 솔루션을 만듭니다. 서비스 공급 기업(Qualys 또는 Rapid7)이 제공하는 라이선스 및 키가 필요합니다.

> [!IMPORTANT] 
> 라이선스당 솔루션은 하나만 만들 수 있습니다. 동일한 이름/라이선스/키를 사용하여 다른 솔루션을 만들려고 하면 실패합니다.

### <a name="prerequisites"></a>사전 요구 사항

필수 PowerShell 모듈:

- Install-module Az
- Install-module Az.security

### <a name="run-the-script"></a>스크립트 실행

스크립트를 실행하려면 아래 매개 변수에 대한 관련 정보가 필요합니다.

| **매개 변수** | **필수** | **참고** |
|----|:----:|----|
|**SubscriptionId**|✔|분석하려는 리소스가 포함된 Azure 구독의 subscriptionID입니다.|
|**ResourceGroupName**|✔|리소스 그룹의 이름입니다. 기본값("DefaultResourceGroup-xxx")을 포함하여 기존 리소스 그룹을 사용합니다.<br>솔루션은 Azure 리소스가 아니므로 리소스 그룹에 나열되지 않지만, 여전히 연결되어 있습니다. 나중에 리소스 그룹을 삭제하면 BYOL 솔루션을 사용할 수 없게 됩니다.|
|**vaSolutionName**|✔|새 솔루션의 이름입니다.|
|**vaType**|✔|Qualys 또는 Rapid7입니다.|
|**licenseCode**|✔|공급 업체에서 제공하는 라이선스 문자열입니다.|
|**publicKey**|✔|공급 업체에서 제공하는 퍼블릭 키입니다.|
|**autoUpdate**|-|이 VA 솔루션에 대해 자동 배포를 사용(true) 또는 사용하지 않도록(false) 설정합니다. 사용하도록 설정하면 구독의 모든 새 VM이 자동으로 솔루션에 연결을 시도합니다.<br/>(기본값: False)|
||||

구문

```azurepowershell
.\New-ASCVASolution.ps1 -subscriptionId <Subscription Id> -resourceGroupName <RG Name>
-vaSolutionName <New solution name> -vaType <Qualys / Rapid7> -autoUpdate <true/false>
-licenseCode <License code from vendor> -publicKey <Public Key received from vendor>
```

예(이 예제에는 유효한 라이선스 정보가 포함되어 있지 않음):

```azurepowershell
.\New-ASCVASolution.ps1 -subscriptionId 'f4cx1b69-dtgb-4ch6-6y6f-ea2e95373d3b' -resourceGroupName 'DefaultResourceGroup-WEU' -vaSolutionName 'QualysVa001' -vaType 'Qualys' -autoUpdate 'false' `
-licenseCode 'eyJjaWQiOiJkZDg5OTYzXe4iMTMzLWM4NTAtODM5FD2mZWM1N2Q3ZGU5MjgiLCJgbTYuOiIyMmM5NDg3MS1lNTVkLTQ1OGItYjhlMC03OTRhMmM3YWM1ZGQiLCJwd3NVcmwiOiJodHRwczovL3FhZ3B1YmxpYy1wMDEuaW50LnF1YWx5cy5jb20vQ2xvdSKJY6VudC8iLCJwd3NQb3J0IjoiNDQzIn0=' `
-publicKey 'MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCOiOLXjOywMfLZIBGPZLwSocf1Q64GASLK9OHFEmanBl1nkJhZDrZ4YD5lM98fThYbAx1Rde2iYV1ze/wDlX4cIvFAyXuN7HbdkeIlBl6vWXEBZpUU17bOdJOUGolzEzNBhtxi/elEZLghq9Chmah82me/okGMIhJJsCiTtglVQIDAQAB'
```

## <a name="faq---byol-vulnerability-scanner"></a>FAQ - BYOL 취약성 검사기

- [Qualys 에이전트를 배포하는 경우 필요한 통신 설정은 무엇인가요?](#if-i-deploy-a-qualys-agent-what-communications-settings-are-required)
- [BYOL 솔루션을 구성할 때 리소스 그룹을 지정해야 하는 이유는 무엇인가요?](#why-do-i-have-to-specify-a-resource-group-when-configuring-a-byol-solution)


### <a name="if-i-deploy-a-qualys-agent-what-communications-settings-are-required"></a>Qualys 에이전트를 배포하는 경우 필요한 통신 설정은 무엇인가요?

Qualys 클라우드 에이전트는 업데이트를 위해 정기적으로 Qualys의 SOC와 통신하고 제품 기능에 필요한 다양한 작업을 수행하도록 설계되었습니다. 이 에이전트가 SOC와 원활하게 통신할 수 있도록 하려면 Qualys SOC CIDR 및 URL에 대한 인바운드 및 아웃바운드 트래픽을 허용하도록 네트워크 보안을 구성합니다.

다양한 지리적 위치에 여러 Qualys 플랫폼이 있습니다. SOC CIDR 및 URL은 Qualys 구독의 호스트 플랫폼에 따라 달라집니다. Qualys 호스트 플랫폼을 식별하려면 이 페이지 https://www.qualys.com/platform-identification/ 를 사용합니다.


### <a name="why-do-i-have-to-specify-a-resource-group-when-configuring-a-byol-solution"></a>BYOL 솔루션을 구성할 때 리소스 그룹을 지정해야 하는 이유는 무엇인가요?

솔루션을 설정하는 경우 연결할 리소스 그룹을 선택해야 합니다. 솔루션은 Azure 리소스가 아니므로 리소스 그룹의 리소스 목록에 포함되지 않습니다. 그럼에도 불구하고 해당 리소스 그룹에 연결됩니다. 나중에 리소스 그룹을 삭제하면 BYOL 솔루션을 사용할 수 없게 됩니다.



## <a name="next-steps"></a>다음 단계

> [!div class="nextstepaction"]
> [취약성 평가 솔루션에서 발견된 내용 수정](remediate-vulnerability-findings-vm.md)


Security Center는 다음에 대한 취약성 분석도 제공합니다.

- SQL 데이터베이스 - [취약성 평가 대시보드에서 취약성 평가 보고서 탐색](defender-for-sql-on-machines-vulnerability-assessment.md#explore-vulnerability-assessment-reports)을 참조하세요.
- Azure Container Registry 이미지 - [컨테이너 레지스트리용 Azure Defender를 사용하여 이미지에서 취약성 검사](defender-for-container-registries-usage.md) 참조