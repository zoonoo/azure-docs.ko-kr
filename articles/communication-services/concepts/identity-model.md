---
title: ID 모델
titleSuffix: An Azure Communication Services concept
description: Id 및 액세스 토큰에 대해 알아보기
author: tomaschladek
manager: nmurav
services: azure-communication-services
ms.author: tchladek
ms.date: 10/26/2020
ms.topic: conceptual
ms.service: azure-communication-services
ms.openlocfilehash: f172bfcb6e4f11520eb9082052968626efe6fecb
ms.sourcegitcommit: 8e7316bd4c4991de62ea485adca30065e5b86c67
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 11/17/2020
ms.locfileid: "94651246"
---
# <a name="identity-model"></a>ID 모델

Azure 통신 서비스는 id와 관계 없는 서비스입니다. 이 디자인은 다음과 같은 여러 이점을 제공 합니다.

- Id 관리 시스템에서 기존 id 재사용
- 통합 시나리오의 유연성을 제공 합니다.
- Azure 통신 서비스에서 id를 개인으로 유지

시스템에서 정보를 복제 하는 대신 비즈니스 사례에 필요한 매핑 관계를 유지 관리 합니다. 예를 들어 id 1:1, 1: N, N:1, N:M.를 매핑할 수 있습니다. 전화 번호, 사용자, 장치, 응용 프로그램 및 Guid와 같은 외부 식별자는 Azure 통신 서비스의 id에 사용할 수 없습니다. Azure Communication Services id에 대해 생성 된 액세스 토큰은 채팅 또는 호출과 같은 기본 형식에 액세스 하는 데 사용 됩니다.

## <a name="identity"></a>ID

Azure 통신 서비스 관리 라이브러리를 사용 하 여 id를 만들 수 있습니다. Id는 대화에서 식별자 역할을 합니다. 액세스 토큰을 만드는 데 사용 됩니다. 동일한 id가 여러 장치에서 동시에 여러 세션에 참여할 수 있습니다. Id에 여러 활성 액세스 토큰이 동시에 있을 수 있습니다. 

Id, 리소스 또는 구독을 삭제 하면 모든 액세스 토큰이 무효화 됩니다. 이 작업은 또한 id에 대해 저장 된 모든 데이터를 삭제 합니다. 삭제 된 id는 새 액세스 토큰을 만들거나 이전에 저장 된 데이터에 액세스할 수 없습니다 (예: 채팅 메시지). 

보유 한 id의 수에 대 한 요금이 청구 되지 않습니다. 대신 기본 형식의 사용에 대 한 요금이 청구 됩니다. Id의 수는 응용 프로그램 id를 Azure Communication Services id에 매핑하는 방법을 제한할 필요가 없습니다. 

매핑의 자유는 개인 정보 취급 방침을 제공 합니다. 사용자를 시스템에서 삭제 하려는 경우 해당 사용자와 연결 된 모든 id를 삭제 해야 합니다.

Azure 통신 서비스는 익명 사용자에 게 특별 한 id를 제공 하지 않습니다. 사용자와 id 간의 매핑을 유지 하지 않으며, id가 익명 인지 여부를 확인할 수 없습니다. 사용자의 요구에 맞게 id 개념을 디자인할 수 있습니다. 각 응용 프로그램에서 각 익명 사용자에 대 한 새 id를 만드는 것이 좋습니다. 

유효한 액세스 토큰을 가진 사용자는 현재 id 내용에 액세스할 수 있습니다. 예를 들어 사용자는 보낸 채팅 메시지에 액세스할 수 있습니다. 액세스는 액세스 토큰의 일부인 범위로만 제한 됩니다. 자세한 내용은이 문서의 [액세스 토큰](#access-tokens) 섹션을 참조 하세요.

### <a name="identity-mapping"></a>ID 매핑

Azure 통신 서비스는 Azure id 관리 시스템의 기능을 복제 하지 않습니다. 고객이 특정 id를 사용 하는 방법은 제공 하지 않습니다. 예를 들어 고객은 전화 번호 또는 전자 메일 주소를 사용할 수 없습니다. 대신, Azure Communication Services에서 고유한 식별자를 제공 합니다. 응용 프로그램의 id에 이러한 고유 식별자를 할당할 수 있습니다. Azure 통신 서비스는 사용자의 실제 id를 표시할 수 있는 모든 종류의 정보를 저장 하지 않습니다.

시스템에서 정보가 중복 되지 않도록 하려면 사용자를 id 도메인에서 Azure Communication Services id로 매핑하는 방법을 계획 합니다. 모든 종류의 패턴을 따를 수 있습니다. 예를 들어 1:1, 1: N, N:1 또는 M:N. 사용할 수 있습니다. 단일 사용자가 단일 id 또는 여러 id에 매핑되는지 여부를 결정 합니다. 

새 id가 만들어지면 응용 프로그램의 사용자 또는 사용자에 게 해당 매핑을 저장 합니다. Id는 기본 형식을 사용 하기 위해 액세스 토큰을 요구 하기 때문에 응용 프로그램의 사용자 또는 사용자에 게 id를 알고 있어야 합니다.

관계형 데이터베이스를 사용 하 여 사용자 정보를 저장 하는 경우 매핑 시나리오에 따라 디자인을 조정할 수 있습니다. 1:1 또는 N:1를 매핑하는 시나리오의 경우 테이블에 열을 추가 하 여 `CommunicationServicesId` Azure Communication Services id를 저장 하는 것이 좋습니다. 관계 1: N 또는 N:M을 사용 하는 시나리오에서는 관계형 데이터베이스에 별도의 테이블을 만들 수 있습니다.

## <a name="access-tokens"></a>액세스 토큰

액세스 토큰은 Azure Communication Service 기본 형식에 액세스 하는 데 사용할 수 있는 JWT (JSON Web Token)입니다. 발급 된 액세스 토큰에는 무결성 보호가 있습니다. 즉, 발급 된 후에는 해당 클레임을 변경할 수 없습니다. 따라서 id, 만료, 범위 등의 속성을 수동으로 변경 하면 액세스 토큰이 무효화 됩니다. 기본 형식이 무효화 된 토큰과 함께 사용 되는 경우 기본 형식에 대 한 액세스가 거부 됩니다. 

액세스 토큰의 속성은 다음과 같습니다.
* 신분을.
* Expiration.
* 영역.

액세스 토큰은 항상 24 시간 동안 유효 합니다. 만료 되 면 액세스 토큰이 무효화 되 고 기본 형식에 액세스 하는 데 사용할 수 없습니다. 

Id는 서버 쪽 서비스에서 새 액세스 토큰을 요청 하는 방법이 필요 합니다. *범위* 매개 변수는 사용할 수 있는 비어 있지 않은 기본 형식 집합을 정의 합니다. Azure 통신 서비스는 액세스 토큰에 대해 다음과 같은 범위를 지원 합니다.

|Name|설명|
|---|---|
|채팅|  채팅에 참여할 수 있는 기능 부여|
|VoIP|  Id와 전화 번호를 호출 하는 기능을 부여 합니다.|


만료 시간 전에 액세스 토큰을 해지 하려면 Azure 통신 서비스 관리 라이브러리를 사용 합니다. 토큰 해지가 즉시 실행 되지 않습니다. 전파 하는 데 최대 15 분이 걸립니다. Id, 리소스 또는 구독을 제거 하면 모든 액세스 토큰이 해지 됩니다. 

특정 기능에 액세스 하는 사용자의 기능을 제거 하려면 모든 액세스 토큰을 취소 합니다. 그런 다음 범위 집합이 보다 제한 된 새 액세스 토큰을 발급 합니다.

Azure 통신 서비스에서 액세스 키를 회전 하면 이전 액세스 키를 사용 하 여 만든 모든 활성 액세스 토큰이 해지 됩니다. 모든 id는 Azure 통신 서비스에 대 한 액세스 권한을 상실 하 고 새 액세스 토큰을 발급 해야 합니다. 

클라이언트의 응용 프로그램이 아닌 서버 쪽 서비스에서 액세스 토큰을 발급 하는 것이 좋습니다. 이를 위해서는 발급에 액세스 키 또는 관리 id가 필요 합니다. 보안상의 이유로, 클라이언트 응용 프로그램을 사용 하 여 액세스 키를 공유 하지 않는 것이 좋습니다. 

클라이언트 응용 프로그램은 클라이언트를 인증할 수 있는 신뢰할 수 있는 서비스 끝점을 사용 해야 합니다. 끝점은 대신 액세스 토큰을 발급 해야 합니다. 자세한 내용은 [클라이언트 및 서버 아키텍처](./client-and-server-architecture.md)를 참조 하세요.

백업 저장소에 액세스 토큰을 캐시 하는 경우 암호화를 사용 하는 것이 좋습니다. 액세스 토큰은 중요 한 데이터입니다. 보호 되지 않는 경우 악의적인 활동에 사용할 수 있습니다. 액세스 토큰이 있는 사용자는 SDK를 시작 하 고 API에 액세스할 수 있습니다. 액세스 가능한 API는 액세스 토큰에 포함 된 범위에 따라 제한 됩니다. 필요한 범위만 포함 하는 액세스 토큰을 발급 하는 것이 좋습니다.

## <a name="next-steps"></a>다음 단계

* 액세스 토큰 관리에 대 한 소개는 [액세스 토큰 만들기 및 관리](https://docs.microsoft.com/azure/communication-services/quickstarts/access-tokens)를 참조 하세요.
* 인증에 대 한 소개는 [Azure 통신 서비스에 인증](https://docs.microsoft.com/azure/communication-services/concepts/authentication)을 참조 하세요.
* 데이터 상주 및 개인 정보에 대 한 소개는 [지역 가용성 및 데이터 상주](https://docs.microsoft.com/azure/communication-services/concepts/privacy)를 참조 하세요.
