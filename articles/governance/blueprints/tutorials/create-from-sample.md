---
title: 청사진 샘플에서 환경 만들기
description: 청사진 샘플을 사용하여 두 개의 리소스 그룹을 설정하고 각각의 역할 할당을 구성하는 청사진 정의를 만듭니다.
author: DCtheGeek
ms.author: dacoulte
ms.date: 03/05/2019
ms.topic: tutorial
ms.service: blueprints
manager: carmonm
ms.openlocfilehash: b0d5d96ff897ac1710206eb49bca785e8809cb7d
ms.sourcegitcommit: 36c50860e75d86f0d0e2be9e3213ffa9a06f4150
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 05/16/2019
ms.locfileid: "65798308"
---
# <a name="tutorial-create-an-environment-from-a-blueprint-sample"></a>자습서: 청사진 샘플을 사용하여 환경 만들기

샘플 청사진은 Azure Blueprints를 사용하여 수행할 수 있는 작업 예제를 제공합니다. 각각은 특정 의도나 용도가 있는 샘플이지만 단독으로 완벽한 환경을 만들지는 못합니다. 각각은 포함된 아티팩트, 디자인 및 매개 변수의 다양한 조합으로 Azure Blueprints를 사용할 수 있는 시작점으로 사용됩니다.

다음 자습서는 **RBAC가 포함된 리소스 그룹** 청사진 샘플을 사용하여 Blueprints 서비스의 다양한 측면을 보여 줍니다. 다음 단계가 설명됩니다.

> [!div class="checklist"]
> - 샘플에서 새 청사진 정의 만들기
> - 샘플 사본을 **게시됨**으로 표시
> - 기존 구독에 청사진 사본 할당
> - 할당에 대해 배포한 리소스 검사
> - 청사진을 할당 취소하여 잠금 제거

## <a name="prerequisites"></a>필수 조건

이 자습서를 완료하려면 Azure 구독이 필요합니다. Azure 구독이 아직 없는 경우 시작하기 전에 [체험 계정](https://azure.microsoft.com/free/)을 만듭니다.

## <a name="create-blueprint-definition-from-sample"></a>샘플에서 청사진 정의 만들기

먼저 청사진 샘플을 구현합니다. 가져올 경우 샘플을 기준으로 작업 환경에서 새 청사진이 생성됩니다.

1. 왼쪽 창에서 **모든 서비스**를 선택합니다. **청사진**을 검색하고 선택합니다.

1. **시작** 페이지 왼쪽에서 _청사진 만들기_ 아래의 **만들기** 단추를 선택합니다.

1. _다른 샘플_에서 **RBAC가 포함된 리소스 그룹** 청사진 샘플을 찾은 후 **이 샘플 사용**을 선택합니다.

1. 청사진 샘플의 _기본 사항_을 입력합니다.

   - **청사진 이름**: 청사진 샘플 사본의 이름을 지정합니다. 이 자습서에서는 이름 _two-rgs-with-role-assignments_를 사용합니다.
   - **정의 위치**: 줄임표를 사용하고 샘플 사본을 저장할 관리 그룹 또는 구독을 선택합니다.

1. 페이지 위쪽의 _아티팩트_ 탭 또는 페이지 아래쪽의 **다음: 아티팩트**를 선택합니다.

1. 청사진 샘플을 구성하는 아티팩트 목록을 검토합니다. 이 샘플은 표시 이름이 _ProdRG_ 및 _PreProdRG_인 두 개의 리소스 그룹을 정의합니다. 청사진 할당 중에 각 리소스 그룹의 최종 이름과 위치가 설정됩니다. _ProdRG_ 리소스 그룹에는 _참가자_ 역할이 할당되고 _PreProdRG_ 리소스 그룹에는 _소유자_ 및 _읽기 권한자_ 역할이 할당됩니다. 정의에 할당된 역할은 정적이지만, 역할이 할당된 그룹은 청사진 할당 중에 설정됩니다.

1. 청사진 샘플 검토가 끝나면 **초안 저장**을 선택합니다.

이 단계에서는 선택한 관리 그룹 또는 구독에 샘플 청사진 정의 사본을 만듭니다. 저장된 청사진 정의는 처음부터 새로 만든 청사진처럼 관리됩니다. 관리 그룹 또는 구독에 필요한 횟수만큼 샘플을 저장할 수 있습니다. 그러나 각 복사본에는 고유한 이름을 지정해야 합니다.

**청사진 정의를 저장함** 포털 알림이 나타나면 다음 단계로 이동합니다.

## <a name="publish-the-sample-copy"></a>샘플 사본 게시

이제 작업 환경에 청사진 샘플 사본이 만들어졌습니다. 이 청사진 정의는 **초안** 모드로 만들어졌으며 먼저 **게시**해야만 할당하고 배포할 수 있습니다. Blueprint 샘플의 복사본을 작업 환경 및 요구에 맞게 사용자 지정할 수 있습니다. 이 자습서에서는 어떤 변경도 수행하지 않습니다.

1. 왼쪽 창에서 **모든 서비스**를 선택합니다. **청사진**을 검색하고 선택합니다.

1. 왼쪽 페이지에서 **청사진 정의**를 선택합니다. 필터를 사용하여 _two-rgs-with-role-assignments_ 청사진 정의를 찾은 후 선택합니다.

1. 페이지 맨 위에서 **청사진 게시**를 선택합니다. 오른쪽의 새 창에서 청사진 샘플 사본의 **버전**으로 _1.0_을 지정합니다. 이 속성은 나중에 수정할 경우에 유용합니다. "첫 번째 버전이 RBAC 청사진 샘플이 있는 리소스 그룹에서 게시됨"과 같은 **변경 메모**를 제공합니다. 그런 후 페이지 아래쪽의 **게시**를 선택합니다.

이 단계에서 구독에 청사진을 할당할 수 있습니다. 게시한 후에도 여전히 변경할 수 있습니다. 추가로 변경하려면 동일한 청사진 정의의 다른 버전 간 차이를 추적할 수 있도록 새 **버전** 값으로 게시해야 합니다.

**청사진 정의를 게시하는 중** 포털 알림이 나타나면 다음 단계로 이동합니다.

## <a name="assign-the-sample-copy"></a>샘플 사본 할당

청사진 샘플 사본이 **게시**되면 저장된 관리 그룹 내의 구독에 할당할 수 있습니다. 이 단계에서는 청사진 샘플 사본의 배포를 고유하게 만들기 위해 매개 변수가 제공됩니다.

1. 왼쪽 창에서 **모든 서비스**를 선택합니다. **청사진**을 검색하고 선택합니다.

1. 왼쪽 페이지에서 **청사진 정의**를 선택합니다. 필터를 사용하여 _two-rgs-with-role-assignments_ 청사진 정의를 찾은 후 선택합니다.

1. 청사진 정의 페이지 위쪽에서 **청사진 할당**을 선택합니다.

1. 청사진 할당의 매개 변수 값을 지정합니다.

   - 기본 사항

     - **구독**: 청사진 샘플 사본을 저장한 관리 그룹에 있는 하나 이상의 구독을 선택합니다. 둘 이상의 구독을 선택하면 입력한 매개 변수를 사용하여 각 구독의 할당이 생성됩니다.
     - **할당 이름**: 청사진 정의의 이름에 따라 이 이름이 미리 채워집니다.
     - **위치**: 관리 ID를 만들 지역을 선택합니다. Azure Blueprints는 이 관리 ID를 사용하여 할당된 청사진의 모든 아티팩트를 배포합니다. 자세히 알아보려면 [Azure 리소스의 관리 ID](../../../active-directory/managed-identities-azure-resources/overview.md)를 참조하세요.
       이 자습서에서는 _미국 동부 2_를 선택합니다.
     - **청사진 정의 버전**: 샘플 청사진 정의의 사본에 대해 **게시된** 버전 _1.0_을 선택합니다.

   - 할당 잠금

     _읽기 전용_ 청사진 잠금 모드를 선택입니다. 자세한 내용은 [청사진 리소스 잠금](../concepts/resource-locking.md)을 참조하세요.

   - 관리 ID

     기본값인 _시스템 할당_ 옵션을 그대로 둡니다. 자세한 내용은 [관리 ID](../../../active-directory/managed-identities-azure-resources/overview.md)를 참조하세요.

   - 아티팩트 매개 변수

     이 섹션에 정의된 매개 변수는 정의된 아티팩트에 적용됩니다. 이러한 매개 변수는 청사진 할당 중에 정의되므로 [동적 매개 변수](../concepts/parameters.md#dynamic-parameters)입니다. 각 아티팩트에 대해 매개 변수 값을 **값** 열에 정의된 값으로 설정합니다. `{Your ID}`로 Azure 사용자 계정을 선택합니다.

     |아티팩트 이름|아티팩트 형식|매개 변수 이름|값|설명|
     |-|-|-|-|-|
     |ProdRG 리소스 그룹|리소스 그룹|Name|ProductionRG|첫 번째 리소스 그룹의 이름을 정의합니다.|
     |ProdRG 리소스 그룹|리소스 그룹|위치|미국 서부 2|첫 번째 리소스 그룹의 위치를 설정합니다.|
     |참가자|역할 할당|사용자 또는 그룹|{Your ID}|첫 번째 리소스 그룹 내에서 _참가자_ 역할 할당을 부여할 사용자 또는 그룹을 정의합니다.|
     |PreProdRG 리소스 그룹|리소스 그룹|Name|PreProductionRG|두 번째 리소스 그룹의 이름을 정의합니다.|
     |PreProdRG 리소스 그룹|리소스 그룹|위치|미국 서부|두 번째 리소스 그룹의 위치를 설정합니다.|
     |소유자|역할 할당|사용자 또는 그룹|{Your ID}|두 번째 리소스 그룹 내에서 _소유자_ 역할 할당을 부여할 사용자 또는 그룹을 정의합니다.|
     |읽기 권한자|역할 할당|사용자 또는 그룹|{Your ID}|두 번째 리소스 그룹 내에서 _읽기 권한자_ 역할 할당을 부여할 사용자 또는 그룹을 정의합니다.|

1. 모든 매개 변수를 입력한 후에는 페이지 아래쪽에서 **할당**을 선택합니다.

이 단계에서는 정의된 리소스를 배포하고 선택한 **할당 잠금**을 구성합니다. 청사진 잠금을 적용하는 데 최대 30분이 걸릴 수 있습니다.

**청사진 정의를 할당함** 포털 알림이 나타나면 다음 단계로 이동합니다.

## <a name="inspect-resources-deployed-by-the-assignment"></a>할당에서 배포한 리소스 검사

청사진 할당은 청사진 정의에 정의된 아티팩트를 만들고 추적합니다. 청사진 할당 페이지에서 리소스를 직접 확인하여 리소스 상태를 파악할 수 있습니다.

1. 왼쪽 창에서 **모든 서비스**를 선택합니다. **청사진**을 검색하고 선택합니다.

1. 왼쪽에서 **할당된 청사진** 페이지를 선택합니다. 필터를 사용하여 _Assignment-two-rgs-with-role-assignments_ 청사진 할당을 찾은 후 선택합니다.

   이 페이지에서 할당이 성공했음을 알 수 있으며 만든 리소스와 해당 청사진의 잠금 상태 목록이 표시됩니다. 할당이 업데이트되면 **할당 작업** 드롭다운에 각 정의 버전 배포에 대한 세부 정보가 표시됩니다. 목록에서 생성된 각 리소스를 클릭하면 해당 리소스 속성 페이지가 열립니다.

1. **ProductionRG** 리소스 그룹을 선택합니다.

   리소스 그룹의 이름은 **ProductionRG**인데 아티팩트 표시 이름은 _ProdRG_가 아니라는 것을 확인할 수 있습니다. 이 이름은 청사진 할당 동안 설정된 값과 일치됩니다.

1. 왼쪽에서 **액세스 제어(IAM)** 페이지를 선택하고, **역할 할당** 탭을 선택합니다.

   여기에서는 _이 리소스_ 범위에서 계정에 _참가자_ 역할이 부여되었음을 확인할 수 있습니다. _Assignment-two-rgs-with-role-assignments_ 청사진 할당은 리소스 그룹을 만드는 데 사용되었으므로 _소유자_ 역할이 있습니다. 이러한 권한은 구성된 청사진 잠금을 사용하여 리소스를 관리하는 데도 사용됩니다.

1. Azure Portal 이동 경로에서 **Assignment-two-rgs-with-role-assignments**를 선택하여 한 페이지 뒤로 돌아간 후 **PreProductionRG** 리소스 그룹을 선택합니다.

1. 왼쪽에서 **액세스 제어(IAM)** 페이지를 선택하고, **역할 할당** 탭을 선택합니다.

   여기에서는 _이 리소스_ 범위에서 계정에 _소유자_ 및 _읽기 권한자_ 역할이 둘 다 부여되었음을 확인할 수 있습니다. 청사진 할당에도 첫 번째 리소스 그룹과 마찬가지로 _소유자_ 역할이 있습니다.

1. **거부 할당** 탭을 선택합니다.

   청사진 할당은 _읽기 전용_ 청사진 잠금 모드를 적용하기 위해 배포된 리소스 그룹에서 [거부 할당](../../../role-based-access-control/deny-assignments.md)을 만들었습니다. 거부 할당은 _역할 할당_ 탭에서 적절한 권한이 있는 사람이 특정 작업을 수행하지 못하게 합니다. 거부 할당은 _모든 보안 주체_에 영향을 미칩니다.

1. 거부 할당을 선택한 다음, 왼쪽의 **거부된 사용 권한** 페이지를 선택합니다.

   거부 할당은 **\*** 및 **동작** 구성의 모든 작업을 방지하지만, **NotActions**를 통해 **\*/read**를 제외하여 읽기 액세스를 허용합니다.

1. Azure Portal 탐색 경로에서 **PreProductionRG - 액세스 제어(IAM)** 를 선택합니다. 그런 후 왼쪽에서 **개요** 페이지를 선택한 후 **리소스 그룹 삭제** 단추를 선택합니다. 이름 _PreProductionRG_를 입력하여 삭제를 확인하고 창 아래쪽에서 **삭제**를 선택합니다.

   포털 알림 **리소스 그룹 PreProductionRG 삭제 실패**가 표시됩니다. 이 오류는 사용자 계정에 리소스 그룹을 삭제하기 위한 권한이 있지만 청사진 할당이 액세스를 거부했음을 나타냅니다. 청사진 할당 동안 _읽기 전용_ 청사진 잠금 모드를 선택했다는 사실을 기억하세요. 청사진 잠금은 권한이 있는 계정(_소유자_의 경우도 해당)이 리소스를 삭제할 수 없도록 합니다. 자세한 내용은 [청사진 리소스 잠금](../concepts/resource-locking.md)을 참조하세요.

이러한 단계는 권한이 있는 계정을 사용하는 경우라도 리소스가 정의된 대로 생성되고, 청사진 잠금이 원치 않는 삭제를 방지한다는 것을 보여 줍니다.

## <a name="unassign-the-blueprint"></a>청사진 할당 취소

마지막 단계는 청사진 및 배포된 리소스의 할당을 제거하는 것입니다.
할당을 제거해도 배포한 아티팩트는 제거되지 않습니다.

1. 왼쪽 창에서 **모든 서비스**를 선택합니다. **청사진**을 검색하고 선택합니다.

1. 왼쪽에서 **할당된 청사진** 페이지를 선택합니다. 필터를 사용하여 _Assignment-two-rgs-with-role-assignments_ 청사진 할당을 찾은 후 선택합니다.

1. 페이지 위쪽의 **청사진 할당 취소** 단추를 선택합니다. 확인 대화 상자에서 경고를 읽은 다음, **확인**을 선택합니다.

   청사진 할당이 제거되면 청사진 잠금도 제거됩니다. 권한이 있는 계정으로 삭제된 리소스는 다시 만들 수 있습니다.

1. Azure 메뉴에서 **리소스 그룹**을 선택하고 **ProductionRG**를 선택합니다.

1. 왼쪽에서 **액세스 제어(IAM)** 페이지를 선택하고, **역할 할당** 탭을 선택합니다.

각 리소스 그룹에 대한 보안에는 아직 배포된 역할 할당이 있지만 청사진 할당에는 더 이상 _소유자_ 액세스 권한이 없습니다.

**청사진 할당을 제거함** 포털 알림이 나타나면 다음 단계로 이동합니다.

## <a name="clean-up-resources"></a>리소스 정리

이 자습서를 완료하면 다음 리소스를 삭제합니다.

- 리소스 그룹 _ProductionRG_
- 리소스 그룹 _PreProductionRG_
- 청사진 정의 _two-rgs-with-role-assignments_

## <a name="next-steps"></a>다음 단계

- [청사진 수명 주기](../concepts/lifecycle.md)에 대해 알아보기
- [정적 및 동적 매개 변수](../concepts/parameters.md) 사용 방법 이해
- [청사진 리소스 잠금](../concepts/resource-locking.md)을 활용하는 방법 알아보기
- [청사진 시퀀싱 순서](../concepts/sequencing-order.md)를 사용자 지정하는 방법 알아보기
- [기존 할당을 업데이트](../how-to/update-existing-assignments.md)하는 방법 알아보기
- [일반 문제 해결 방법](../troubleshoot/general.md)을 통해 청사진 할당 중에 발생하는 문제 해결