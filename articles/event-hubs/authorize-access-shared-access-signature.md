---
title: Azure Event Hubs에서 공유 액세스 서명을 사용 하 여 액세스 권한 부여
description: 이 문서에서는 SAS (공유 액세스 서명)를 사용 하 여 Azure Event Hubs 리소스에 대 한 액세스 권한 부여에 대 한 정보를 제공 합니다.
services: event-hubs
ms.service: event-hubs
documentationcenter: ''
author: spelluru
ms.topic: conceptual
ms.date: 08/22/2019
ms.author: spelluru
ms.openlocfilehash: bdb1896f8a40c6de21ae76b536bfccec316341cd
ms.sourcegitcommit: 6a4fbc5ccf7cca9486fe881c069c321017628f20
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/27/2020
ms.locfileid: "69992797"
---
# <a name="authorizing-access-to-event-hubs-resources-using-shared-access-signatures"></a>공유 액세스 서명을 사용 하 여 Event Hubs 리소스에 대 한 액세스 권한 부여
SAS (공유 액세스 서명)는 Event Hubs 네임 스페이스의 리소스에 대 한 제한 된 액세스 권한을 부여 하는 방법을 제공 합니다. SAS는 권한 부여 규칙에 따라 Event Hubs 리소스에 대 한 액세스를 보호 합니다. 이러한 규칙은 네임 스페이스 또는 엔터티 (이벤트 허브 또는 토픽)에서 구성 됩니다. 이 문서에서는 SAS 모델의 개요를 제공 하 고 SAS 모범 사례를 검토 합니다.

## <a name="what-are-shared-access-signatures"></a>공유 액세스 서명 이란?
공유 액세스 서명 (SAS)은 권한 부여 규칙에 따라 Event Hubs 리소스에 대 한 위임 된 액세스를 제공 합니다. 권한 부여 규칙에는 특정 권한과 연결된 이름이 있으며 암호화 키 쌍을 전달합니다. Event Hubs 클라이언트 또는 사용자 고유의 코드를 통해 규칙 이름 및 키를 사용 하 여 SAS 토큰을 생성 합니다. 그러면 클라이언트는 Event Hubs에 토큰을 전달 하 여 요청 된 작업에 대 한 권한 부여를 증명할 수 있습니다.

SAS는 단순 토큰을 사용 하는 클레임 기반 권한 부여 메커니즘입니다. SAS를 사용하여 키는 연결 중에 전달되지 않습니다. 키는 서비스에 의해 나중에 확인될 수 있는 정보를 암호화하여 서명하는 데 사용됩니다. SAS는 클라이언트가 권한 부여 규칙 이름 및 일치 키를 즉시 소유하는 사용자 이름 및 암호 구성표와 유사하게 사용될 수 있습니다. SAS는 페더레이션 보안 모델과 유사 하 게 사용할 수 있습니다. 여기서 클라이언트는 서명 키를 소유 하지 않고 보안 토큰 서비스에서 시간 제한 및 서명 된 액세스 토큰을 수신 합니다.

> [!NOTE]
> Azure Event Hubs는 Azure Active Directory (Azure AD)를 사용 하 여 리소스 Event Hubs에 대 한 권한을 부여 합니다. Azure AD에서 반환 된 OAuth 2.0 토큰을 사용 하는 사용자 또는 응용 프로그램에 대 한 권한 부여는 SAS (공유 액세스 서명)를 통해 뛰어난 보안과 사용 편의성을 제공 합니다. Azure AD를 사용 하는 경우 코드에 토큰을 저장 하 고 잠재적인 보안 취약점을 초래할 필요가 없습니다.
>
> 가능 하면 Azure Event Hubs 응용 프로그램에서 Azure AD를 사용 하는 것이 좋습니다. 자세한 내용은 [Azure Active Directory를 사용 하 여 Azure Event Hubs 리소스에 대 한 액세스 권한 부여](authorize-access-azure-active-directory.md)를 참조 하세요.

> [!IMPORTANT]
> SAS (공유 액세스 서명) 토큰은 리소스를 보호 하는 데 중요 합니다. 단위를 제공 하는 동안 SAS는 클라이언트에 Event Hubs 리소스에 대 한 액세스 권한을 부여 합니다. 공개적으로 공유 해서는 안 됩니다. 문제 해결을 위해 필요한 경우 공유 하는 경우 로그 파일의 축소 된 버전을 사용 하거나 로그 파일에서 SAS 토큰 (있는 경우)을 삭제 하는 것이 좋습니다. 그리고 스크린샷에 SAS 정보가 포함 되지 않았는지 확인 합니다.

## <a name="shared-access-authorization-policies"></a>공유 액세스 권한 부여 정책
각 Event Hubs 네임 스페이스와 각 Event Hubs 엔터티 (이벤트 허브 인스턴스 또는 Kafka 토픽)에는 규칙으로 구성 된 공유 액세스 권한 부여 정책이 있습니다. 네임스페이스 수준에서 정책은 개별 정책 구성에 관계 없이 네임스페이스 내부의 모든 엔터티에 적용됩니다.
각각의 권한 부여 정책 규칙의 경우 이름, 범위 및 권한 등, 3가지 정보를 결정합니다. 이름은 해당 범위에서 고유한 이름입니다. 범위는 해당 리소스의 URI입니다. Event Hubs 네임 스페이스의 경우 범위는와 `https://<yournamespace>.servicebus.windows.net/`같은 FQDN (정규화 된 도메인 이름)입니다.

정책 규칙에서 제공 하는 권한은 다음의 조합일 수 있습니다.
- **Send** – 엔터티에 메시지를 보낼 수 있는 권한을 부여 합니다.
- **수신 대기** -엔터티를 수신 하거나 받을 수 있는 권한을 부여 합니다.
- **관리** – 엔터티 만들기 및 삭제를 포함 하 여 네임 스페이스의 토폴로지를 관리할 수 있는 권한을 부여 합니다.

> [!NOTE]
> **관리** 권한에는 **보내기** 및 **수신** 권한이 포함 됩니다.

네임 스페이스 또는 엔터티 정책에는 세 가지 규칙 집합을 위한 공간을 제공 하는 공유 액세스 권한 부여 규칙을 최대 12 개까지 포함할 수 있습니다. 각 규칙 집합에는 기본 권한 및 전송 및 수신 조합이 포함 됩니다. 이 제한은 SAS 정책 저장소가 사용자 또는 서비스 계정 저장소가 아님을 나타내는 것입니다. 응용 프로그램에서 사용자 또는 서비스 id를 기반으로 Event Hubs 리소스에 대 한 액세스 권한을 부여 해야 하는 경우 인증 및 액세스 검사 후 SAS 토큰을 발급 하는 보안 토큰 서비스를 구현 해야 합니다.

권한 부여 규칙에는 **기본 키** 와 **보조 키**가 할당 됩니다. 이러한 키는 암호화 된 강력한 키입니다. 이러한 항목을 분실 하거나 누설 하지 마십시오. Azure Portal에서 항상 사용할 수 있습니다. 생성된 키 중 하나를 사용할 수 있으며 언제든지 다시 생성할 수 있습니다. 정책에서 키를 다시 생성하거나 변경하는 경우 해당 키에 기반한 이전에 발급된 모든 토큰은 즉시 무효화됩니다. 그러나 이러한 토큰에 따라 생성된 진행 중인 연결은 토큰이 만료될 때까지 작업을 계속합니다.

Event Hubs 네임 스페이스를 만들 때 네임 스페이스에 대해 **RootManageSharedAccessKey** 라는 정책 규칙이 자동으로 만들어집니다. 이 정책에는 전체 네임 스페이스에 대 한 **관리** 권한이 있습니다. 이 규칙은 관리 루트 계정 처럼 처리 하 고 응용 프로그램에서 사용 하지 않는 것이 좋습니다. PowerShell 또는 Azure CLI를 통해 포털에서 네임 스페이스에 대 한 **구성** 탭에서 추가 정책 규칙을 만들 수 있습니다.

## <a name="best-practices-when-using-sas"></a>SAS를 사용하는 경우 모범 사례
애플리케이션에서 공유 액세스 서명을 사용할 경우 다음과 같은 두 가지 잠재적 위험에 대해 잘 알고 있어야 합니다.

- SAS가 유출 되 면이를 가져오는 모든 사용자가 SAS를 사용 하 여 Event Hubs 리소스를 손상 시킬 수 있습니다.
- 클라이언트 응용 프로그램에 제공 된 SAS가 만료 되 고 응용 프로그램이 서비스에서 새 SAS를 검색할 수 없는 경우 응용 프로그램의 기능이 저하 될 수 있습니다.

다음은 공유 액세스 서명을 사용하여 이러한 위험을 완화하는 데 도움이 될 수 있는 권장 사항입니다.

- **필요한 경우 클라이언트가 sas를 자동으로 갱신 하도록**지정: 클라이언트에서 sas를 제공 하는 서비스를 사용할 수 없는 경우 다시 시도할 수 있도록 만료 되기 전에 sas를 갱신 해야 합니다. SAS가 만료 기간 내에 완료 될 것으로 예상 되는 적은 수의 즉각적인 단기 작업에 사용 될 것으로 예상 되는 경우 SAS가 갱신 되지 않으므로 필요 하지 않을 수 있습니다. 하지만 클라이언트가 SAS를 통해 일상 요청을 수행하는 경우에는 중간에 만료될 수 있습니다. 핵심 고려 사항은, 이전에 설명한 대로 SAS가 정상적으로 갱신을 요청 하 고 있는지 확인 하는 것이 좋습니다 (이전에 언급 한 것 처럼).
- **Sas 시작 시간을 사용 하 여 주의 해야 합니다**. sas의 시작 시간을 **지금**으로 설정 하면 클럭 오차 (다른 컴퓨터에 따라 현재 시간의 차이)로 인해 처음 몇 분 동안 오류가 간헐적으로 발생할 수 있습니다. 일반적으로 시작 시간을 최소 15분 이전으로 설정하거나 또는 전혀 설정 하지 마세요. 그러면 모든 경우에 즉시 유효 해 집니다. 이는 만료 시간에도 일반적으로 적용 됩니다. 모든 요청에 대해 어느 방향에서 든 최대 15 분의 클록을 왜곡할 수 있습니다. 
- **액세스할 리소스와 관련 되어 있어야**합니다. 보안 모범 사례는 사용자에 게 필요한 최소 권한을 제공 하는 것입니다. 사용자가 단일 엔터티에 대한 읽기 권한만 필요한 경우 해당 엔터티에 대한 읽기 권한만 부여하고 모든 엔터티에 대한 읽기/쓰기/삭제 권한은 부여하지 않습니다. 또한 sas가 공격자의 도움을 줄 수 있기 때문에 SAS가 손상 되 면 손상을 줄일 수 있습니다.
- **항상 sas를 사용 하지 않음**: Event Hubs에 대해 특정 작업과 관련 된 위험이 sas의 이점 보다 더 큽니다. 이러한 작업의 경우 비즈니스 규칙 유효성 검사, 인증 및 감사 후에 Event Hubs에 기록 하는 중간 계층 서비스를 만듭니다.
- **항상 https 사용**: 항상 https를 사용 하 여 SAS를 만들거나 배포 합니다. HTTP를 통해 SAS를 전달 하 고 가로채는 경우 메시지 가로채기 (man-in-the-middle) 연결을 수행 하는 공격자가 SAS를 읽은 다음 의도 된 사용자가 보유 하는 것과 마찬가지로, 중요 한 데이터를 손상 시키거나 악의적인 사용자의 데이터 손상을 허용할 수 있습니다.

## <a name="conclusion"></a>결론
공유 액세스 서명은 클라이언트에 Event Hubs 리소스에 대 한 제한 된 권한을 제공 하는 데 유용 합니다. Azure Event Hubs를 사용 하는 모든 응용 프로그램에 대 한 보안 모델의 중요 한 부분입니다. 이 문서에 나열 된 모범 사례를 따르면 응용 프로그램의 보안을 손상 시 키 지 않고 SAS를 사용 하 여 리소스에 대 한 더 많은 유연성을 제공할 수 있습니다.

## <a name="next-steps"></a>다음 단계
다음 관련 문서를 참조 하세요. 

- [Azure Active Directory를 사용 하 여 응용 프로그램에서 Azure Event Hubs에 대 한 요청 인증](authenticate-application.md)
- [Event Hubs 리소스에 액세스 하기 위해 Azure Active Directory를 사용 하 여 관리 id 인증](authenticate-managed-identity.md)
- [공유 액세스 서명을 사용 하 여 Azure Event Hubs에 대 한 요청 인증](authenticate-shared-access-signature.md)
- [Azure Active Directory를 사용 하 여 Event Hubs 리소스에 대 한 액세스 권한 부여](authorize-access-azure-active-directory.md)


