---
title: '모델 교차 유효성 검사: 모듈 참조'
titleSuffix: Azure Machine Learning
description: Azure Machine Learning 디자이너의 모델 교차 유효성 검사 모듈을 사용하여 분류 또는 회귀 모델에 대한 매개 변수 예상치를 교차 유효성 검사합니다.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 02/11/2020
ms.openlocfilehash: d4099ecf6e6bcc6654391e54292878393fb22914
ms.sourcegitcommit: f28ebb95ae9aaaff3f87d8388a09b41e0b3445b5
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/30/2021
ms.locfileid: "93421348"
---
# <a name="cross-validate-model"></a>모델 교차 유효성 검사

이 문서에서는 Azure Machine Learning 디자이너에서 모델 교차 유효성 검사 모듈을 사용하는 방법을 설명합니다. *교차 유효성 검사* 는 데이터 집합의 산포도와 해당 데이터를 통해 학습된 모델의 안정성을 모두 평가하기 위해 기계 학습에서 자주 사용되는 기술입니다.  

모델 교차 유효성 검사 모듈은 학습되지 않은 분류 또는 회귀 모델과 함께 레이블이 지정된 데이터 집합을 입력으로 사용합니다. 데이터 집합을 일부 하위 집합(*폴드*)으로 나누고 각 폴드에서 모델을 빌드한 다음 각 폴드의 정확도 통계 집합을 반환합니다. 모든 폴드에 대한 정확도 통계를 비교하여 데이터 집합의 품질을 해석할 수 있습니다. 그런 다음 모델이 데이터의 변형에 취약한지 여부를 파악할 수 있습니다.  

또한 교차 유효성 검사 모델은 예측의 안정성을 평가할 수 있도록 데이터 집합에 대한 예측 결과 및 확률을 반환합니다.  

### <a name="how-cross-validation-works"></a>교차 유효성 검사의 작동 방식

1. 교차 유효성 검사는 학습 데이터를 무작위 폴드로 나눕니다. 

   이전에 데이터 집합을 분할하지 않은 경우 이 알고리즘은 기본적으로 10개의 접기가 됩니다. 데이터 집합을 여러 폴드로 나누려면 [파티션 및 샘플](partition-and-sample.md) 모듈을 사용하며, 사용할 폴드 수를 표시할 수 있습니다.  

2.  모듈은 유효성 검사에 사용할 데이터를 폴드 1로 따로 설정합니다. (간혹 *홀드아웃 폴드* 라고도 합니다.) 모듈은 나머지 폴드를 사용하여 모델을 학습 합니다. 

    예를 들어 5개의 폴드를 만들면 모듈은 교차 유효성 검사 중에 5개의 모델을 생성합니다. 이 모듈은 데이터의 4/5를 사용하여 각 모델을 학습합니다. 나머지 1/5의 데이터에서 각 모델을 테스트합니다.  

3.  각 폴드에 대해 모델을 테스트하는 동안 모듈은 여러 정확도 통계를 평가합니다. 모듈에서 사용하는 통계는 평가 중인 모델 유형에 따라 달라집니다. 분류 모델 및 회귀 모델 평가에는 다른 통계가 사용됩니다.  

4.  모든 폴드에서 빌드 및 평가 프로세스가 완료되면 모델 교차 유효성 검사에서 모든 데이터의 성능 메트릭 및 평가 결과 집합을 생성합니다. 이러한 메트릭을 검토하여 단일 폴드에서 정확도가 높거나 낮은지 확인합니다. 

### <a name="advantages-of-cross-validation"></a>교차 유효성 검사의 이점

모델을 평가하는 다른 일반적인 방법은 [데이터 분할](split-data.md)을 사용하여 데이터를 학습 및 테스트 집합으로 나눈 다음 학습 데이터에서 모델의 유효성을 검사하는 방식이 있습니다. 그러나 교차 유효성 검사에는 다음과 같은 몇 가지 이점이 있습니다.  

-   교차 유효성 검사에서는 더 많은 테스트 데이터를 사용합니다.

    교차 유효성 검사는 더 큰 데이터 공간에서 지정된 매개 변수를 사용하여 모델의 성능을 측정합니다. 즉, 교차 유효성 검사는 학습 및 평가 모두에 부분이 아닌 전체 학습 데이터 집합을 사용합니다. 반면, 임의 분할에서 생성된 데이터를 사용하여 모델의 유효성을 검사하는 경우 일반적으로 사용 가능한 데이터의 30% 이하에서만 모델을 평가합니다.  

    그러나 교차 유효성 검사는 더 큰 데이터 집합을 통해 모델을 여러 번 학습하고 유효성을 검사하기 때문에 훨씬 더 계산 집약적입니다. 임의 분할에서의 유효성 검사보다 훨씬 더 오래 걸립니다.  

-   교차 유효성 검사는 데이터 집합과 모델을 모두 평가합니다.

    교차 유효성 검사는 단순히 모델의 정확도만 측정하지 않습니다. 또한 데이터 집합의 대표성 및 모델의 데이터 변형에 대한 중요도를 파악할 수 있습니다.  

## <a name="how-to-use-cross-validate-model"></a>교차 유효성 검사 모델 사용법

데이터 집합이 큰 경우 교차 유효성 검사를 실행하는 데 시간이 오래 걸릴 수 있습니다.  그래서 모델을 빌드하고 테스트하는 초기 단계에서 모델 교차 유효성 검사를 사용할 수 있습니다. 이 단계에서는 모델 매개 변수의 적합성을 평가할 수 있습니다(계산 시간을 사용할 수 있다고 가정). 그런 다음 모델 학습 및 모델 평가 모듈에서 설정된 매개 변수를 사용하여 [모델을 학습시키고](train-model.md) 또 [평가할](evaluate-model.md) 수 있습니다.

이 시나리오에서는 교차 유효성 검사 모델을 사용하여 모델을 학습시키고 테스트합니다.

1. 파이프라인에 모델 교차 유효성 검사 모듈을 추가합니다. Azure Machine Learning 디자이너의 **모델 채점 및 평가** 범주에서 찾을 수 있습니다. 

2. 분류 또는 회귀 모델의 출력을 연결합니다. 

    예를 들어 분류 목적으로 **두 개의 승격된 의사 결정 트리** 를 사용하는 경우 원하는 매개 변수를 사용하여 모델을 구성합니다. 그런 다음 분류자의 **학습되지 않은 모델** 포트에서 교차 유효성 검사 모델과 일치하는 포트로 커넥터를 드래그합니다. 

    > [!TIP] 
    > 교차 유효성 검사 모델은 평가의 일환으로 모델을 자동으로 훈련시키므로 모델을 학습시킬 필요가 없습니다.  
3.  교차 유효성 검사 모델의 **데이터 집합** 포트에서 레이블이 지정된 학습 데이터 집합을 연결합니다.  

4.  교차 유효성 검사 모델의 오른쪽 패널에서 **열 편집** 을 클릭합니다. 클래스 레이블이 포함된 단일 열 또는 예측 가능한 값을 선택합니다. 

5. 동일한 데이터에서 연속 실행에 대한 교차 유효성 검사의 결과를 반복하려면 **임의 시드** 매개 변수 값을 설정합니다.  

6. 파이프라인을 제출합니다.

7. 보고서에 대한 설명은 [결과](#results) 섹션을 참조하세요.

## <a name="results"></a>결과

모든 반복이 완료된 후 모델 교차 유효성 검사에서는 전체 데이터 집합에 대한 점수를 작성합니다. 또한 모델의 품질을 평가하는 데 사용할 수 있는 성능 메트릭을 만듭니다.

### <a name="scored-results"></a>점수가 매겨진 결과

모듈의 첫 출력은 각 행에 대한 원본 데이터와 함께 예측된 값 및 관련 확률을 제공합니다. 

결과를 보려면 파이프라인에서 교차 유효성 검사 모델 모듈을 마우스 오른쪽 단추로 클릭합니다. **채점 결과 시각화** 를 선택합니다.

| 새 열 이름      | 설명                              |
| -------------------- | ---------------------------------------- |
| 점수가 매겨진 레이블        | 이 열은 데이터 집합의 끝에 추가됩니다. 각 행에 대한 예측 값을 포함합니다. |
| 채점된 확률 | 이 열은 데이터 집합의 끝에 추가됩니다. **채점된 레이블** 의 값에 대한 예상 확률을 나타냅니다. |
| 폴드 번호          | 교차 유효성 검사 중에 각 데이터 행이 할당된 폴드의 인덱스(0 기반)를 나타냅니다. |

 ### <a name="evaluation-results"></a>평가 결과

두 번째 보고서는 폴드 별로 그룹화됩니다. 실행 중에 모델 교차 유효성 검사는 학습 데이터를 임의로 *n* 폴드로 분할합니다(기본적으로 10). 데이터 집합에 대한 각 반복에서 교차 유효성 검사 모델에서는 유효성 검사 데이터 집합으로 하나의 폴드를 사용합니다. 나머지 *n-1* 폴드를 사용하여 모델을 훈련시킵니다. 각 *n* 모델은 다른 모든 폴드의 데이터로 테스트됩니다.

이 보고서에서 폴드는 인덱스 값으로 오름차순으로 나열됩니다.  다른 열에서 정렬하려면 결과를 데이터 집합으로 저장할 수 있습니다.

결과를 보려면 파이프라인에서 교차 유효성 검사 모델 모듈을 마우스 오른쪽 단추로 클릭합니다. **폴드를 통한 평가 결과 시각화** 를 선택합니다.


|열 이름| 설명|
|----|----|
|폴드 번호| 각 폴드 식별자입니다. 5개의 폴드를 만든 경우 0부터 4까지 번호가 매겨진 5개의 데이터 하위 집합이 생성됩니다.
|폴드의 예제 수|각 폴드에 할당된 행 수입니다. 거의 같아야 합니다. |


또한 이 모듈에는 평가 중인 모델 유형에 따라 각 폴드 마다 다음 메트릭이 포함됩니다. 

+ **분류 모델**: 정밀도, 재현율, F 점수, AUC, 정확도  

+ **회귀 모델**: 평균 절대 오차, 제곱 평균 오차, 상대 절대 오차, 상대 제곱 오차 및 결정 계수


## <a name="technical-notes"></a>기술 정보  

+ 교차 유효성 검사에 사용하기 전에 데이터 집합을 정규화 하기를 권합니다. 

+ 교차 유효성 검사 모델은 계산 집약적이며 임의로 분할된 데이터 집합을 사용하여 모델의 유효성을 검사한 경우보다 완료하는 데 시간이 더 오래 걸립니다. 그 이유는 교차 유효성 검사 모델에서 모델을 여러 번 학습시키고 유효성을 검사하기 때문입니다.

+ 교차 유효성 검사를 사용하여 모델의 정확도를 측정할 때 학습 및 테스트 집합으로 데이터 집합을 분할할 필요가 없습니다. 


## <a name="next-steps"></a>다음 단계

Azure Machine Learning에서 [사용 가능한 모듈 세트](module-reference.md)를 참조하세요. 

