---
title: 원격 데스크톱 프로토콜 대역폭 요구 사항 Windows Virtual Desktop - Azure
titleSuffix: Azure
description: Windows Virtual Desktop에 대한 RDP 대역폭 요구 사항 이해
author: gundarev
ms.topic: conceptual
ms.date: 11/16/2020
ms.author: denisgun
ms.openlocfilehash: 6fe12c985f5d9a519380d1d9b5a7d6c2820630c6
ms.sourcegitcommit: 32e0fedb80b5a5ed0d2336cea18c3ec3b5015ca1
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/30/2021
ms.locfileid: "105932338"
---
# <a name="remote-desktop-protocol-rdp-bandwidth-requirements"></a>RDP(원격 데스크톱 프로토콜) 대역폭 요구 사항

RDP(원격 데스크톱 프로토콜)는 다양한 기술을 사용하여 클라이언트 디바이스에 대한 서버의 원격 그래픽 제공을 완벽하게 지원하는 정교한 기술입니다. RDP는 사용 사례, 컴퓨팅 리소스의 가용성 및 네트워크 대역폭에 따라 최적의 사용자 환경을 제공하기 위해 다양한 매개 변수를 동적으로 조정합니다.

원격 데스크톱 프로토콜은 여러 DVC(동적 가상 채널)를 여러 네트워크 전송을 통해 전송되는 단일 데이터 채널로 멀티플렉싱합니다. 원격 그래픽, 입력, 디바이스 리디렉션, 인쇄 등을 위한 별도의 DVC가 있습니다. Windows Virtual Desktop 파트너는 DVC 인터페이스를 사용하는 확장도 사용할 수 있습니다.

RDP를 통해 전송되는 데이터의 양은 사용자 활동에 따라 달라집니다. 예를 들어, 사용자는 대부분의 세션에 대해 기본 텍스트 내용으로 작업하고 최소 대역폭을 사용할 수 있지만 200페이지 문서의 인쇄물을 로컬 프린터로 생성할 수 있습니다. 이 인쇄 작업에는 상당한 양의 네트워크 대역폭이 사용됩니다.

원격 세션을 사용하는 경우 네트워크의 사용 가능한 대역폭이 환경의 품질에 동적으로 영향을 줍니다. 애플리케이션과 디스플레이 해상도가 다르면 다른 네트워크 구성이 필요하므로 네트워크를 요구 사항에 맞게 구성해야 합니다.

## <a name="estimating-bandwidth-utilization"></a>대역폭 사용률 예측

RDP는 다양한 형식의 데이터에 대해 다양한 압축 알고리즘을 사용합니다. 다음 표에서는 데이터 전송의 예측을 안내합니다.

| 데이터의 형식 | Direction | 예측 방법 |
|---|---|---|
| 원격 그래픽 | 세션 호스트-클라이언트 | [자세한 지침 참조](#estimating-bandwidth-used-by-remote-graphics) |
| 하트비트 | 양방향 | 5초마다 20바이트 이하  |
| 입력 | 클라이언트-세션 호스트 | 데이터의 양은 대부분의 작업에 대해 100바이트 미만의 사용자 활동을 기준으로 합니다.  |
| 파일 전송 | 양방향 | 파일 전송에서 대량 압축을 사용하고 있습니다. 근사값에 .zip 압축을 사용합니다. |
| 인쇄 | 세션 호스트-클라이언트 | 인쇄 작업 전송은 드라이버에 따라 다르며 대량 압축을 사용하여 근사값에 .zip 압축을 사용합니다. |

다음과 같은 다른 시나리오의 대역폭 요구 사항은 사용하는 방법에 따라 달라질 수 있습니다.

* 음성 또는 화상 회의
* 실시간 통신
* 4K 비디오 스트리밍

## <a name="estimating-bandwidth-used-by-remote-graphics"></a>원격 그래픽에서 사용되는 대역폭 예측

원격 데스크톱에서 대역폭 사용량을 예측하는 것은 매우 어렵습니다. 사용자 작업은 대부분의 원격 데스크톱 트래픽을 생성합니다. 모든 사용자는 고유하며 작업 패턴의 차이로 인해 네트워크 사용이 크게 변경될 수 있습니다.

대역폭 요구 사항을 이해하는 가장 좋은 방법은 실제 사용자 연결을 모니터링하는 것입니다. 모니터링은 기본 제공 성능 카운터 또는 네트워크 장비에서 수행할 수 있습니다.

그러나 대부분의 경우 원격 데스크톱 프로토콜이 작동하는 방식을 이해하고 사용자의 작업 패턴을 분석하여 네트워크 사용률을 예상할 수 있습니다.

원격 프로토콜은 원격 서버에서 생성된 그래픽을 로컬 모니터에 표시하기 위해 제공합니다. 보다 구체적으로 말하면 서버에 완전히 구성된 데스크톱 비트맵을 제공합니다.
데스크톱 비트맵을 보내는 작업은 첫 번째 방법의 단순한 작업처럼 보이지만 상당한 양의 리소스가 필요합니다. 예를 들어 압축되지 않은 형식의 1080p 데스크톱 이미지는 크기가 8Mb입니다. 화면 주사율이 적절한 30Hz인 로컬 연결된 모니터에 이 이미지를 표시하려면 약 237MB/s의 대역폭이 필요합니다.

네트워크를 통해 전송되는 데이터의 양을 줄이기 위해 RDP는 다음을 포함하되 이에만 국한되지 않는 여러 기술의 조합을 사용합니다.

* 프레임 속도 최적화
* 화면 콘텐츠 분류
* 콘텐츠 관련 코덱
* 프로그레시브 이미지 인코딩
* 클라이언트 쪽 캐싱

원격 그래픽을 보다 잘 이해하려면 다음을 고려하십시오.

* 그래픽이 풍부할수록 더 많은 대역폭이 사용됩니다.
  * 텍스트, 창 UI 요소 및 단색 영역은 다른 항목보다 더 적은 대역폭을 사용합니다.
  * 자연 이미지는 대역폭을 사용하는 가장 중요한 원인 제공자입니다. 그러나 클라이언트 쪽 캐싱은 대역폭 사용 감소에 도움이 됩니다.
* 변경된 화면 부분만 전송됩니다. 화면에 표시되는 업데이트가 없으면 업데이트가 전송되지 않습니다.
* 비디오 재생 및 기타 높은 프레임 속도 콘텐츠는 기본적으로 이미지 슬라이드쇼입니다. RDP는 적절한 비디오 코덱을 동적으로 사용하여 원래 프레임 속도에 가까운 속도로 제공합니다. 그러나 여전히 그래픽이며 대역폭 사용률의 가장 중요한 원인 제공자입니다.
* 원격 데스크톱의 유휴 시간은 화면 업데이트가 없거나 최소한이라는 의미입니다. 따라서 유휴 시간 동안 네트워크 사용이 최소화됩니다.
* 원격 데스크톱 클라이언트 창이 최소화되면 세션 호스트에서 그래픽 업데이트가 전송되지 않습니다.

네트워크에 가해지는 스트레스는 앱 워크로드의 출력 프레임 속도와 디스플레이 해상도에 따라 달라집니다. 프레임 속도 또는 디스플레이 해상도가 증가하면 대역폭 요구 사항도 증가합니다. 예를 들어 고해상도 디스플레이가 있는 경량 워크로드에는 사용 가능한 대역폭이 일반 해상도 또는 저해상도인 경량 워크로드보다 더 많이 필요합니다. 다른 디스플레이 해상도를 사용하려면 다른 사용 가능한 대역폭이 필요합니다.

아래 표에서는 다양한 그래픽 시나리오에서 사용하는 데이터의 예측 방법을 안내합니다. 이러한 숫자는 1920x1080 해상도를 사용하고 기본 그래픽 모드와 H.264/AVC 444 그래픽 모드를 모두 사용하는 단일 모니터 구성에 적용됩니다.

| 시나리오 | 기본 모드 | H.264/AVC 444 모드 | 미리 보기 | 시나리오에 대한 설명 |
|:---|---:|---:|---|---|
| 유휴 상태 | 0.3Kbps | 0.3Kbps |:::image type="content" source="media/idle.png" alt-text="유휴 연결의 스크린샷":::| 사용자가 작업을 일시 중지하고 활성 화면 업데이트가 없음 |
| Microsoft Word | 100~150Kbps | 200~300Kbps |:::image type="content" source="media/word.gif" alt-text="Microsoft Word의 애니메이션":::| 사용자가 Microsoft Word로 활발하게 작업하여 타이핑, 그래픽 붙여넣기, 문서 간 전환을 수행하고 있습니다. |
| Microsoft Excel | 150~200Kbps | 400~500Kbps |:::image type="content" source="media/excel.gif" alt-text="Microsoft Excel의 애니메이션":::| 사용자가 Microsoft Excel로 활발하게 작업하고 있고 수식과 차트가 있는 여러 셀이 동시에 업데이트됩니다. |
| Microsoft PowerPoint | 4~4.5Mbps | 1.6~1.8Mbps |:::image type="content" source="media/powerpoint.gif" alt-text="Microsoft PowerPoint의 애니메이션":::| 사용자가 Microsoft PowerPoint로 활발하게 작업하여 타이핑, 붙여넣기를 수행 중입니다. 사용자는 또한 서식 있는 그래픽을 수정하고 슬라이드 전환 효과를 사용하고 있습니다. |
| 웹 검색 | 6~6.5Mbps | 0.9~1Mbps |:::image type="content" source="media/web.gif" alt-text="웹 검색의 애니메이션":::| 사용자가 현재 여러 정적 및 애니메이션 이미지를 포함하는 그래픽이 풍부한 웹 사이트로 작업하고 있습니다. 사용자가 가로 및 세로로 페이지를 스크롤합니다. |
| 이미지 갤러리 | 3.3~3.6Mbps | 0.7~0.8Mbps |:::image type="content" source="media/image-gallery.gif" alt-text="이미지 갤러리의 애니메이션":::| 사용자가 이미지 갤러리 애플리케이션에서 활발하게 작업 중입니다. 이미지 찾아보기, 확대/축소, 크기 조정 및 회전 |
| 비디오 재생 | 8.5-9.5Mbps | 2.5-2.8Mbps |:::image type="content" source="media/video.gif" alt-text="비디오 재생의 애니메이션":::| 사용자가 화면 1/2를 사용하는 30FPS 비디오를 시청하고 있습니다. |
| 전체 화면 비디오 재생 | 7.5-8.5Mbps | 2.5-3.1Mbps |:::image type="content" source="media/fullscreen-video.gif" alt-text="전체 화면 비디오 재생의 애니메이션":::| 사용자가 전체 화면으로 최대화된 30FPS 비디오를 시청하고 있습니다. |

## <a name="dynamic-bandwidth-allocation"></a>동적 대역폭 할당

원격 데스크톱 프로토콜은 변화하는 네트워크 조건을 동적으로 조정하도록 설계된 최신 프로토콜입니다.
대역폭 사용률에 대한 하드 한도를 사용하는 대신 RDP는 사용 가능한 네트워크 대역폭과 패킷 라운드트립 시간을 적극적으로 모니터링하는 지속적인 네트워크 검색을 사용합니다. 결과에 따라 RDP는 동적으로 그래픽 인코딩 옵션을 선택하고 디바이스 리디렉션 및 기타 가상 채널에 대한 대역폭을 할당합니다.  
이 기술을 통해 RDP는 사용 가능할 때 전체 네트워크 파이프를 사용하고 다른 작업에 네트워크가 필요할 때 빠르게 백오프할 수 있습니다.
RDP는 이를 감지하고 다른 애플리케이션이 네트워크를 요청하는 경우 이미지 품질, 프레임 속도 또는 압축 알고리즘을 조정합니다.

## <a name="limit-network-bandwidth-use-with-throttle-rate"></a>스로틀 속도로 네트워크 대역폭 사용 제한

대부분의 시나리오에서는 제한에 따라 사용자 환경이 영향을 받을 수 있으므로 대역폭 사용률을 제한할 필요가 없습니다. 그러나 제한된 네트워크에서는 네트워크 사용률을 제한하는 것이 좋습니다. 또 다른 예로는 사용되는 트래픽 양에 대해 청구되는 임대 네트워크가 있습니다.

이러한 경우 QoS 정책에 스로틀 속도를 지정하여 RDP 아웃바운드 네트워크 트래픽을 제한할 수 있습니다.

  >[!NOTE]
  > [RDP Shortpath가 사용하도록 설정되어 있는지 확인](./shortpath.md) - 스로틀 속도 제한은 역방향 연결 전송에 대해서는 지원되지 않습니다.

### <a name="implement-throttle-rate-limiting-on-session-host-using-group-policy"></a>그룹 정책을 사용하여 세션 호스트에서 스로틀 속도 제한 구현

그룹 정책 내에서 정책 기반 QoS(서비스 품질)를 사용하여 미리 정의된 스로틀 속도를 설정할 수 있습니다.

도메인에 가입된 세션 호스트에 대한 QoS 정책을 만들려면 먼저 그룹 정책 관리가 설치된 컴퓨터에 로그인합니다. 그룹 정책 관리(시작을 선택하고 관리 도구를 가리킨 다음 그룹 정책 관리 선택)를 연 다음 다음 단계를 완료합니다.

1. 그룹 정책 관리에서 새 정책을 만들어야 하는 컨테이너를 찾습니다. 예를 들어 모든 세션 호스트 컴퓨터가 이름이 **세션 호스트** 인 OU에 있으면 새 정책은 세션 호스트 OU에 만들어야 합니다.

2. 적절한 컨테이너를 마우스 오른쪽 단추로 클릭하고 **이 도메인에서 GPO를 만들어 여기에 연결** 을 선택합니다.

3. **새 GPO** 대화 상자의 **이름** 상자에 새 그룹 정책 개체의 이름을 입력한 다음 **확인** 을 선택합니다.

4. 새로 만든 정책을 마우스 오른쪽 단추로 클릭한 다음 **편집** 을 선택합니다.

5. 그룹 정책 관리 편집기에서 **컴퓨터 구성**, **Windows 설정** 을 차례로 확장하고 **정책 기반 QoS** 를 마우스 오른쪽 단추로 클릭한 다음 **새 정책 만들기** 를 선택합니다.

6. **정책 기반 QoS** 대화 상자의 열기 페이지에서 **이름** 상자에 새 정책의 이름을 입력합니다. **아웃바운드 스로틀 속도 지정** 을 선택하고 필요한 값을 설정한 후 **다음** 을 선택합니다.

7. 다음 페이지에서 **이 실행 파일 이름이 있는 애플리케이션만** 을 선택하고 이름 **svchost.exe** 를 입력한 후 **다음** 을 선택합니다. 이 설정은 정책에서 원격 데스크톱 서비스의 일치하는 트래픽의 우선 순위만 지정하도록 지시합니다.

8. 세 번째 페이지에서 **원본 IP 주소** 와 **대상 IP 주소** 가 모두 선택되어 있는지 확인합니다. **다음** 을 선택합니다. 이러한 두 설정에서 패킷을 전송한 컴퓨터(IP 주소)와 패킷을 수신할 컴퓨터(IP 주소)에 관계없이 패킷이 관리되는지 확인합니다.

9. 4페이지의 **이 QoS 정책이 적용되는 프로토콜 선택** 드롭다운 목록에서 **UDP** 를 선택합니다.

10. **원본 포트 번호 지정** 제목 아래에서 **이 원본 포트 또는 범위** 를 선택합니다. 함께 제공되는 텍스트 상자에서 **3390** 을 입력합니다. **마침** 을 선택합니다.

사용자가 만든 새 정책은 세션 호스트 컴퓨터에서 그룹 정책이 새로 고쳐질 때까지 적용되지 않습니다. 그룹 정책은 정기적으로 자체적으로 새로 고침되지만 다음 단계를 수행하여 새로 고침을 즉시 강제로 수행할 수 있습니다.

1. 그룹 정책을 새로 고칠 각 세션 호스트에서 관리자로 명령 프롬프트를 엽니다(*관리자 권한으로 실행*).

2. 명령 프롬프트에 다음을 입력합니다.

   ```console
   gpupdate /force
   ```

### <a name="implement-throttle-rate-limiting-on-session-host-using-powershell"></a>PowerShell을 사용하여 세션 호스트에서 스로틀 속도 제한 구현

아래 PowerShell cmdlet를 사용하여 RDP Shortpath의 스로틀 속도를 설정할 수 있습니다.

```powershell
New-NetQosPolicy -Name "RDP Shortpath" -AppPathNameMatchCondition "svchost.exe" -IPProtocolMatchCondition UDP -IPSrcPortStartMatchCondition 3390 -IPSrcPortEndMatchCondition 3390 -DSCPAction 46 -NetworkProfile All
```

## <a name="next-steps"></a>다음 단계

* Windows Virtual Desktop의 대역폭 요구 사항에 대한 자세한 내용은 [Windows Virtual Desktop에 대한 RDP(원격 데스크톱 프로토콜) 대역폭 요구 사항 이해](rdp-bandwidth.md)를 참조하세요.
* Windows Virtual Desktop 네트워크 연결에 대한 자세한 정보는 [Windows Virtual Desktop 네트워크 연결 이해](network-connectivity.md)를 참조하세요.
* Windows Virtual Desktop의 QoS(서비스 품질)를 시작하려면 [Windows Virtual Desktop용 QoS(서비스 품질) 구현](rdp-quality-of-service-qos.md)을 참조하세요.
