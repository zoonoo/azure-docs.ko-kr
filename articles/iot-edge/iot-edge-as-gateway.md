---
title: Azure IoT Edge 디바이스를 게이트웨이로 사용 | Microsoft Docs
description: Azure IoT Edge를 사용하여 데이터를 여러 다운스트림 디바이스에서 클라우드로 보내거나 로컬로 처리하는 투명, 불투명 또는 프록시 게이트웨이 디바이스를 만듭니다.
author: kgremban
manager: philmea
ms.author: kgremban
ms.date: 11/01/2017
ms.topic: conceptual
ms.service: iot-edge
services: iot-edge
ms.openlocfilehash: 53f0f1e77f8879807b2fb93b86d825e3bd044f41
ms.sourcegitcommit: 6b7c8b44361e87d18dba8af2da306666c41b9396
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 11/12/2018
ms.locfileid: "51567216"
---
# <a name="how-an-iot-edge-device-can-be-used-as-a-gateway"></a>IoT Edge 디바이스를 게이트웨이로 사용하는 방법

IoT 솔루션의 게이트웨이는 디바이스 연결성 및 에지 분석을 이러한 기능이 없는 IoT 디바이스에 제공합니다. Azure IoT Edge는 연결, ID 또는 에지 분석과의 관련성에 관계없이 IoT 게이트웨이에 대한 모든 요구를 충족하는 데 사용할 수 있습니다. 이 문서의 게이트웨이 패턴은 디바이스 데이터가 게이트웨이에서 처리되는 방식이 아닌 다운스트림 디바이스 연결 및 디바이스 ID의 특징만을 참조합니다.

## <a name="patterns"></a>패턴

IoT Edge 디바이스를 게이트웨이로 사용하는 세 가지 패턴은 투명, 프로토콜 변환 및 ID 변환입니다.
* **투명** – 이론적으로 IoT Hub에 연결할 수 있는 장치는 게이트웨이 장치에도 연결할 수 있습니다. 다운스트림 디바이스는 고유한 IoT Hub ID를 갖고, MQTT, AMQP 또는 HTTP 프로토콜 중 하나를 사용합니다. 게이트웨이는 단순히 디바이스와 IoT Hub 사이에서 통신을 전달합니다. 디바이스는 게이트웨이를 통해 클라우드와 통신한다는 사실을 모르고, IoT Hub의 디바이스와 상호 작용하는 사용자는 중간에 존재하는 게이트웨이 디바이스를 인식하지 못합니다. 따라서 게이트웨이가 투명합니다. IoT Edge 디바이스를 투명 게이트웨이로 사용하는 자세한 방법은 [투명 게이트웨이 만들기](how-to-create-transparent-gateway.md)를 참조하세요.
* **프로토콜 변환** – MQTT, AMQP 또는 HTTP를 지원하지 않는 디바이스는 불투명 게이트웨이 패턴이라고도 하며, 게이트웨이 디바이스를 사용하여 데이터를 대신하여 IoT Hub에 보냅니다. 게이트웨이는 다운스트림 디바이스에서 사용하는 프로토콜을 이해할 수 있지만 IoT Hub에서 ID가 있는 유일한 디바이스입니다. 모든 정보는 하나의 디바이스인 게이트웨이에서 오는 것처럼 보입니다. 클라우드 애플리케이션에서 디바이스별로 데이터를 분석하기를 원하는 경우 다운스트림 디바이스가 해당 메시지에 추가 식별 정보를 포함해야 합니다. 또한 쌍 및 메서드 같은 IoT Hub 기본 형식은 게이트웨이 디바이스에만 제공되고 다운스트림 디바이스에는 제공되지 않습니다.
* **ID 변환** - IoT Hub에 연결할 수 없는 디바이스는 대신 게이트웨이 디바이스에 연결할 수 있습니다. 게이트웨이는 다운스트림 디바이스 대신 IoT Hub ID 및 프로토콜 변환을 제공합니다. 게이트웨이는 다운스트림 디바이스에서 사용하는 프로토콜을 이해하고, 디바이스에 ID를 제공하고, IoT Hub 기본 형식을 변환합니다. 다운스트림 디바이스는 IoT Hub에 트윈 앤 메서드를 사용하는 클래스 1 디바이스로 표시됩니다. 사용자는 중간에 있는 게이트웨이 디바이스를 인식하지 못하면서 IoT Hub의 디바이스와 상호 작용할 수 있습니다.

![게이트웨이 패턴 다이어그램](./media/iot-edge-as-gateway/edge-as-gateway.png)

## <a name="use-cases"></a>사용 사례
모든 게이트웨이 패턴은 다음과 같은 이점을 제공합니다.
* **에지 분석** – 클라우드에 전체 충실도 원격 분석 데이터를 보내지 않고 AI 서비스를 로컬로 사용하여 다운스트림 디바이스로부터 들어오는 데이터를 처리합니다. 고급 정보를 로컬로 검색하여 대응하고 IoT Hub에는 데이터 하위 집합만 보냅니다. 
* **다운스트림 장치 격리** – 게이트웨이 장치는 모든 다운스트림 장치를 인터넷에 노출되지 않도록 보호할 수 있습니다. 연결 기능이 없는 OT 네트워크와 웹 액세스를 제공하는 IT 네트워크 사이에 배치할 수 있습니다. 
* **연결 멀티플렉싱** - IoT Edge 게이트웨이를 통해 IoT Hub에 연결하는 모든 디바이스는 동일한 기본 연결을 사용합니다.
* **트래픽 다듬기** - IoT Hub가 트래픽을 제한할 경우 IoT Edge 장치는 메시지를 로컬로 유지하면서 지수 백오프를 자동으로 구현합니다. 이를 통해 트래픽이 급증할 때 솔루션에 복원력을 제공합니다.
* **제한된 오프라인 지원** - 게이트웨이 디바이스는 IoT Hub로 전달할 수 없는 메시지 및 쌍 업데이트를 저장합니다.

프로토콜 변환을 수행하는 게이트웨이는 에지 분석, 디바이스 격리, 트래픽 다듬기와 함께, 리소스 제약 조건이 있는 기존 디바이스 및 새 디바이스에 대한 오프라인 지원도 수행할 수 있습니다. 많은 기존 디바이스가 비즈니스 통찰력을 얻을 수 있는 데이터를 생산하지만, 클라우드 연결을 염두에 두고 개발되지는 않았습니다. 불투명 게이트웨이는 종단 간 IoT 솔루션에서 이 데이터를 잠금 해제하고 사용할 수 있습니다.

ID를 변환하는 게이트웨이는 프로토콜 변환의 이점을 제공할 뿐 아니라 클라우드에서 다운스트림 디바이스를 완벽하게 관리할 수 있습니다. IoT 솔루션의 모든 디바이스는 사용하는 프로토콜에 관계없이 IoT Hub에 표시됩니다.

## <a name="cheat-sheet"></a>참고 자료
다음은 투명, 불투명(프로토콜) 및 프록시 게이트웨이를 사용할 때의 IoT Hub 기본 형식을 비교한 간략한 참고 자료입니다.

| &nbsp; | 투명 게이트웨이 | 프로토콜 변환 | ID 변환 |
|--------|-------------|--------|--------|
| IoT Hub ID 레지스트리에 저장된 ID | 연결된 모든 디바이스의 ID | 게이트웨이 디바이스의 ID만 | 연결된 모든 디바이스의 ID |
| 디바이스 쌍 | 연결된 각 디바이스에 자체 디바이스 쌍이 있음 | 게이트웨이에만 디바이스 및 모듈 쌍이 있음 | 연결된 각 디바이스에 자체 디바이스 쌍이 있음 |
| 직접 방식 및 클라우드-장치 메시지 | 클라우드가 연결된 각 디바이스를 개별적으로 처리할 수 있음 | 클라우드가 게이트웨이 디바이스만 처리할 수 있음 | 클라우드가 연결된 각 디바이스를 개별적으로 처리할 수 있음 |
| [IoT Hub 제한 및 할당량](../iot-hub/iot-hub-devguide-quotas-throttling.md) | 각 디바이스에 적용 | 게이트웨이 디바이스에 적용 | 각 디바이스에 적용 |

불투명 게이트웨이(프로토콜 변환) 패턴을 사용하는 경우 해당 게이트웨이 통해 연결되는 모든 디바이스는 최대 50개의 메시지를 포함할 수 있는 동일한 클라우드-디바이스 큐를 공유합니다. 따라서 불투명 게이트웨이 패턴은 각 필드 게이트웨이를 통해 연결되는 디바이스 수가 매우 적고 해당 클라우드-디바이스 트래픽이 낮을 경우에만 사용해야 합니다.

## <a name="next-steps"></a>다음 단계
IoT Edge 디바이스를 [투명 게이트웨이](how-to-create-transparent-gateway-linux.md)로 작동하도록 구성하는 방법을 알아봅니다.
