---
title: Azure 개인 링크 서비스 란?
description: Azure 개인 링크 서비스에 대해 알아봅니다.
services: private-link
author: sumeetmittal
ms.service: private-link
ms.topic: conceptual
ms.date: 09/16/2019
ms.author: sumi
ms.openlocfilehash: a6bbb2abe24eba96fd2c55b7aaf15ccd8ae33530
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/09/2020
ms.locfileid: "87760953"
---
# <a name="what-is-azure-private-link-service"></a>Azure 개인 링크 서비스 란?

Azure Private Link 서비스는 Azure Private Link에서 제공하는 자체 서비스에 대한 참조입니다. [Azure 표준 Load Balancer](../load-balancer/load-balancer-standard-overview.md) 뒤에 실행 되는 서비스를 개인 링크 액세스에 사용 하도록 설정 하 여 서비스의 소비자가 자신의 vnet에서 개인용으로 액세스할 수 있습니다. 고객은 자신의 VNet 내에서 개인 끝점을 만들고이 서비스에 매핑할 수 있습니다. 이 문서에서는 서비스 공급자 쪽과 관련 된 개념을 설명 합니다. 

:::image type="content" source="./media/private-link-service-overview/consumer-provider-endpoint.png" alt-text="개인 링크 서비스 워크플로" border="true":::

*그림: Azure 개인 링크 서비스.*

## <a name="workflow"></a>워크플로

![개인 링크 서비스 워크플로](media/private-link-service-overview/private-link-service-workflow.png)


*그림: Azure 개인 링크 서비스 워크플로.*

### <a name="create-your-private-link-service"></a>개인 링크 서비스 만들기

- 가상 네트워크의 표준 부하 분산 장치 뒤에서 실행 되도록 응용 프로그램을 구성 합니다. 표준 부하 분산 장치 뒤에 응용 프로그램을 이미 구성한 경우이 단계를 건너뛸 수 있습니다.   
- 위의 부하 분산 장치를 참조 하는 개인 링크 서비스를 만듭니다. 부하 분산 장치 선택 프로세스에서 트래픽을 수신 하려는 프런트 엔드 IP 구성을 선택 합니다. 개인 링크 서비스에 대 한 NAT IP 주소에 대 한 서브넷을 선택 합니다. 서브넷에서 사용 가능한 NAT IP 주소를 8 개 이상 사용 하는 것이 좋습니다. 모든 소비자 트래픽은이 개인 IP 주소 풀에서 서비스 공급자로 시작 된 것으로 나타납니다. 개인 링크 서비스에 대 한 적절 한 속성/설정을 선택 합니다.    

    > [!NOTE]
    > Azure 개인 링크 서비스는 표준 Load Balancer 에서만 지원 됩니다. 
    
### <a name="share-your-service"></a>서비스 공유

개인 링크 서비스를 만든 후에는 서비스에 제공 하는 이름을 기반으로 "별칭" 이라는 전역적으로 이름이 지정 된 모니커를 Azure에서 생성 합니다. 서비스의 별칭 또는 리소스 URI를 고객과 오프 라인으로 공유할 수 있습니다. 소비자는 별칭 또는 리소스 URI를 사용 하 여 개인 링크 연결을 시작할 수 있습니다.
 
### <a name="manage-your-connection-requests"></a>연결 요청 관리

소비자가 연결을 시작한 후에는 서비스 공급자가 연결 요청을 수락 하거나 거부할 수 있습니다. 모든 연결 요청은 개인 링크 서비스의 **privateendpointconnections** 속성 아래에 나열 됩니다.
 
### <a name="delete-your-service"></a>서비스 삭제

개인 링크 서비스를 더 이상 사용 하지 않는 경우 해당 서비스를 삭제할 수 있습니다. 그러나 서비스를 삭제 하기 전에 연결 된 개인 끝점 연결이 없는지 확인 합니다. 모든 연결을 거부 하 고 서비스를 삭제할 수 있습니다.

## <a name="properties"></a>속성

개인 링크 서비스는 다음 속성을 지정 합니다. 

|속성 |설명  |
|---------|---------|
|프로 비전 상태 (provisioningState)  |개인 링크 서비스에 대 한 현재 프로 비전 상태를 나열 하는 읽기 전용 속성입니다. 적용 가능한 프로 비전 상태는 "삭제 중;입니다. 오류가 열었습니다 업데이트 중 ". 프로 비전 상태가 "성공" 인 경우 개인 링크 서비스를 프로 비전 했습니다.        |
|별칭 (별칭)     | 별칭은 서비스에 대 한 전역적으로 고유한 읽기 전용 문자열입니다. 서비스에 대 한 고객 데이터를 마스킹하는 동시에 서비스에 대 한 공유 하기 쉬운 이름을 만들 수 있습니다. 개인 링크 서비스를 만들 때 Azure는 고객과 공유할 수 있는 서비스에 대 한 별칭을 생성 합니다. 고객은이 별칭을 사용 하 여 서비스에 대 한 연결을 요청할 수 있습니다.          |
|표시 유형 (표시 유형)     | 표시 유형은 개인 링크 서비스에 대 한 노출 설정을 제어 하는 속성입니다. 서비스 공급자는 RBAC (역할 기반 액세스 제어) 권한, 제한 된 구독 집합 또는 모든 Azure 구독을 사용 하 여 해당 서비스에 대 한 구독에 대 한 노출을 제한 하도록 선택할 수 있습니다.          |
|자동 승인 (autoApproval)    |   자동 승인은 개인 링크 서비스에 대 한 자동화 된 액세스를 제어 합니다. 자동 승인 목록에 지정 된 구독은 해당 구독의 개인 끝점에서 연결이 요청 될 때 자동으로 승인 됩니다.          |
|Load Balancer 프런트 엔드 IP 구성 (loadBalancerFrontendIpConfigurations)    |    개인 링크 서비스는 표준 Load Balancer의 프런트 엔드 IP 주소에 연결 됩니다. 서비스를 대상으로 하는 모든 트래픽은 SLB의 프런트 엔드에 도달 합니다. 응용 프로그램이 실행 되 고 있는 적절 한 백 엔드 풀로이 트래픽을 보내도록 SLB 규칙을 구성할 수 있습니다. 부하 분산 장치 프런트 엔드 IP 구성은 NAT IP 구성과 다릅니다.      |
|NAT IP 구성 (ipConfigurations)    |    이 속성은 개인 링크 서비스에 대 한 NAT (네트워크 주소 변환) IP 구성을 참조 합니다. NAT IP는 서비스 공급자의 가상 네트워크에 있는 모든 서브넷에서 선택할 수 있습니다. 개인 링크 서비스는 개인 링크 트래픽에 대 한 대상 측 NAT를 수행 합니다. 이렇게 하면 소스 (소비자 측)와 대상 (서비스 공급자) 주소 공간 간에 IP 충돌이 발생 하지 않습니다. 대상 측 (서비스 공급자 쪽)에서, 서비스에서 받는 모든 패킷에 대해 NAT IP 주소는 서비스에서 받는 모든 패킷에 대해 원본 IP로 표시 되 고, 서비스에서 보낸 모든 패킷에 대 한 대상 IP로 표시 됩니다.       |
|개인 끝점 연결 (privateEndpointConnections)     |  이 속성은 개인 링크 서비스에 연결 하는 개인 끝점을 나열 합니다. 여러 개인 끝점은 동일한 개인 링크 서비스에 연결할 수 있으며, 서비스 공급자는 개별 개인 끝점의 상태를 제어할 수 있습니다.        |
|TCP 프록시 V2 (EnableProxyProtocol)     |  이 속성을 통해 서비스 공급자는 tcp 프록시 v2를 사용 하 여 서비스 소비자에 대 한 연결 정보를 검색할 수 있습니다. 서비스 공급자는 프록시 프로토콜 v2 헤더를 구문 분석할 수 있도록 수신자 configs를 설정 해야 합니다.        |
|||


### <a name="details"></a>세부 정보

- 개인 링크 서비스는 모든 공용 지역의 승인 된 개인 끝점에서 액세스할 수 있습니다. 개인 VPN 또는 Express 경로 연결을 사용 하 여 동일한 가상 네트워크, 지역적으로 피어 링 Vnet, 글로벌 피어 링 Vnet 및 온-프레미스에서 개인 끝점에 연결할 수 있습니다. 
 
- 개인 링크 서비스를 만들 때 리소스 수명 주기에 대 한 네트워크 인터페이스가 생성 됩니다. 이 인터페이스는 고객이 관리할 수 없습니다.
 
- 개인 링크 서비스는 가상 네트워크 및 표준 Load Balancer와 동일한 지역에 배포 되어야 합니다.  
 
- 여러 Vnet, 구독 및/또는 Active Directory 테 넌 트에 속하는 여러 개인 끝점에서 단일 개인 링크 서비스에 액세스할 수 있습니다. 연결은 연결 워크플로를 통해 설정 됩니다. 
 
- 다른 프런트 엔드 IP 구성을 사용 하 여 동일한 표준 Load Balancer에 여러 개인 링크 서비스를 만들 수 있습니다. 표준 Load Balancer 및 구독 당 만들 수 있는 개인 링크 서비스 수에는 제한이 있습니다. 자세한 내용은  [Azure 제한](https://docs.microsoft.com/azure/azure-resource-manager/management/azure-subscription-service-limits#networking-limits)을 참조하세요.
 
- 개인 링크 서비스는 둘 이상의 NAT IP 구성을 연결할 수 있습니다. NAT IP 구성을 두 개 이상 선택 하면 서비스 공급자가 크기를 조정 하는 데 도움이 될 수 있습니다. 현재, 서비스 공급자는 개인 링크 서비스 당 최대 8 개의 NAT IP 주소를 할당할 수 있습니다. 각 NAT IP 주소를 사용 하 여 TCP 연결에 더 많은 포트를 할당 하 고 확장할 수 있습니다. 개인 링크 서비스에 여러 NAT IP 주소를 추가한 후에는 NAT IP 주소를 삭제할 수 없습니다. NAT IP 주소를 삭제 하는 동안 활성 연결에 영향을 주지 않도록 하기 위한 작업입니다.


## <a name="alias"></a>Alias

**별칭** 은 서비스에 대 한 전역적으로 고유한 이름입니다. 서비스에 대 한 고객 데이터를 마스킹하는 동시에 서비스에 대 한 공유 하기 쉬운 이름을 만들 수 있습니다. 개인 링크 서비스를 만들 때 Azure는 고객과 공유할 수 있는 서비스에 대 한 별칭을 생성 합니다. 고객은이 별칭을 사용 하 여 서비스에 대 한 연결을 요청할 수 있습니다.

별칭은 *접두사*라는 세 부분으로 구성 됩니다. *GUID*입니다. *접미사*

- 접두사는 서비스 이름입니다. 사용자 고유의 접두사를 선택할 수 있습니다. "별칭"을 만든 후에는 변경할 수 없으므로 접두사를 적절 하 게 선택 합니다.  
- GUID는 플랫폼에서 제공 됩니다. 이렇게 하면 이름을 전역적으로 고유 하 게 만들 수 있습니다. 
- Azure: privatelinkservice에서 접미사를 추가 *합니다.* 

전체 별칭:  *접두사*입니다. {GUID}. *region*privatelinkservice  

## <a name="control-service-exposure"></a>제어 서비스 노출

개인 링크 서비스는 "가시성" 설정을 통해 서비스의 노출을 제어 하는 옵션을 제공 합니다. 소유 하 고 있는 다른 Vnet (RBAC 권한만 해당)에서 사용할 수 있도록 서비스를 개인으로 설정 하거나, 신뢰 하는 제한 된 구독 집합으로 노출을 제한 하거나, 모든 Azure 구독이 개인 링크 서비스에서 연결을 요청할 수 있도록 공개로 설정할 수 있습니다. 표시 유형 설정은 소비자가 서비스에 연결할 수 있는지 여부를 결정 합니다. 

## <a name="control-service-access"></a>서비스 액세스 제어

개인 링크 서비스에 대 한 노출 (표시 유형 설정에 의해 제어 됨)이 있는 소비자는 자신의 Vnet에 개인 끝점을 만들고 개인 링크 서비스에 대 한 연결을 요청할 수 있습니다. 개인 끝점 연결은 개인 링크 서비스 개체에 대 한 "보류 중" 상태로 생성 됩니다. 서비스 공급자는 연결 요청에 대 한 동작을 담당 합니다. 연결을 승인 하거나, 연결을 거부 하거나, 연결을 삭제할 수 있습니다. 승인 된 연결만 개인 링크 서비스로 트래픽을 보낼 수 있습니다.

개인 링크 서비스의 자동 승인 속성을 사용 하 여 연결 승인 작업을 자동화할 수 있습니다. 자동 승인은 서비스 공급자가 서비스에 대 한 자동화 된 액세스를 위해 구독 집합을 사전 승인 하는 기능입니다. 고객은 서비스 공급자가 자동 승인 목록에 추가 하기 위해 구독을 오프 라인으로 공유 해야 합니다. 자동 승인은 표시 유형 배열의 하위 집합입니다. 표시 유형은 노출 설정을 제어 하는 반면 자동 승인은 서비스에 대 한 승인 설정을 제어 합니다. 고객이 자동 승인 목록의 구독에서 연결을 요청 하면 연결이 자동으로 승인 되 고 연결이 설정 됩니다. 서비스 공급자는 더 이상 요청을 수동으로 승인할 필요가 없습니다. 반면, 고객이 자동 승인 배열이 아닌 표시 유형 배열의 구독에서 연결을 요청 하는 경우 요청은 서비스 공급자에 도달 하지만 서비스 공급자는 연결을 수동으로 승인 해야 합니다.

## <a name="getting-connection-information-using-tcp-proxy-v2"></a>TCP 프록시 v2를 사용 하 여 연결 정보 가져오기

개인 링크 서비스를 사용 하는 경우 개인 끝점에서 들어오는 패킷의 원본 IP 주소는 공급자의 가상 네트워크에서 할당 된 NAT IP를 사용 하 여 서비스 공급자 측의 NAT (network address 번역본)입니다. 따라서 응용 프로그램은 서비스 소비자의 실제 원본 IP 주소 대신 할당 된 NAT IP 주소를 수신 합니다. 응용 프로그램에 소비자 측의 실제 원본 IP 주소가 필요한 경우 서비스에서 프록시 프로토콜을 사용 하도록 설정 하 고 프록시 프로토콜 헤더에서 정보를 검색할 수 있습니다. 원본 IP 주소 외에도 프록시 프로토콜 헤더는 개인 끝점의 LinkID을 전달 합니다. 원본 IP 주소와 LinkID를 조합 하면 서비스 공급자가 소비자를 고유 하 게 식별 하는 데 도움이 될 수 있습니다. 프록시 프로토콜에 대 한 자세한 내용은 [여기](https://www.haproxy.org/download/1.8/doc/proxy-protocol.txt)를 참조 하세요. 

이 정보는 다음과 같이 사용자 지정 TLV (형식 길이 값) 벡터를 사용 하 여 인코딩됩니다.

사용자 지정 TLV 세부 정보:

|필드 |길이 (8 진수)  |설명  |
|---------|---------|----------|
|Type  |1        |PP2_TYPE_AZURE (0xEE)|
|길이  |2      |값의 길이|
|값  |1     |PP2_SUBTYPE_AZURE_PRIVATEENDPOINT_LINKID (0x01)|
|  |4        |UINT32 (4 바이트)-개인 끝점의 LINKID을 나타냅니다. Little endian 형식으로 인코딩됩니다.|

 > [!NOTE]
 > 서비스 공급자는 표준 부하 분산 장치 뒤에 있는 서비스가 개인 링크 서비스에서 프록시 프로토콜을 사용 하도록 설정 된 경우 [사양](https://www.haproxy.org/download/1.8/doc/proxy-protocol.txt) 에 따라 프록시 프로토콜 헤더를 구문 분석 하도록 구성 되었는지 확인 해야 합니다. 개인 링크 서비스에서 프록시 프로토콜 설정을 사용 하도록 설정 했지만 서비스 공급자의 서비스가 헤더를 구문 분석 하도록 구성 되지 않은 경우 요청이 실패 합니다. 마찬가지로 개인 링크 서비스에서 설정을 사용 하도록 설정 하지 않은 상태에서 서비스 공급자의 서비스가 프록시 프로토콜 헤더를 필요로 하는 경우 요청이 실패 합니다. 프록시 프로토콜 설정을 사용 하도록 설정 하면 헤더에 클라이언트 정보가 없는 경우에도 프록시 프로토콜 헤더가 호스트에서 백 엔드 가상 머신으로 HTTP/TCP 상태 프로브에 포함 됩니다. 

## <a name="limitations"></a>제한 사항

다음은 개인 링크 서비스를 사용할 때의 알려진 제한 사항입니다.
- 표준 Load Balancer 에서만 지원 됨 
- IPv4 트래픽만 지원 합니다.
- TCP 트래픽만 지원 합니다.

## <a name="next-steps"></a>다음 단계
- [Azure PowerShell를 사용 하 여 개인 링크 서비스 만들기](create-private-link-service-powershell.md)
- [Azure CLI를 사용 하 여 개인 링크 서비스 만들기](create-private-link-service-cli.md)
