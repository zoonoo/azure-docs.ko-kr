---
title: Azure Database for PostgreSQL 유연한 서버의 백업 및 복원
description: Azure Database for PostgreSQL 유연한 서버를 사용한 백업 및 복원의 개념에 대해 알아보기
author: mksuni
ms.author: sumuth
ms.service: mysql
ms.topic: conceptual
ms.date: 09/21/2020
ms.openlocfilehash: 2d69427f9f11a47cedeccb4b1da38b770952f029
ms.sourcegitcommit: f28ebb95ae9aaaff3f87d8388a09b41e0b3445b5
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/29/2021
ms.locfileid: "93240769"
---
# <a name="backup-and-restore-in-azure-database-for-mysql-flexible-server-preview"></a>Azure Database for PostgreSQL 유연한 서버의 백업 및 복원(미리 보기)

> [!IMPORTANT] 
> Azure Database for MySQL - 유연한 서버는 현재 공개 미리 보기로 제공됩니다.

Azure Database for MySQL 유연한 서버는 자동으로 서버 백업을 만들고 지역 내의 로컬 중복 스토리지에 안전하게 저장합니다. 백업을 사용하여 특정 시점의 서버를 복원할 수 있습니다. 백업 및 복원은 실수로 인한 손상이나 삭제로부터 데이터를 보호하므로 비즈니스 연속성 전략의 필수적인 부분입니다.

## <a name="backup-overview"></a>Backup 개요

유연한 서버는 데이터 파일의 스냅샷 백업을 사용하여 로컬 중복 스토리지에 저장합니다. 또한 서버는 트랜잭션 로그 백업을 수행하고 로컬 중복 스토리지에도 저장합니다. 이러한 백업을 사용하면 서버를 구성된 백업 보존 기간 내의 특정 시점으로 복원할 수 있습니다. 기본 백업 보존 기간은 7일입니다. 필요에 따라 데이터베이스 백업을 1-35일로 구성할 수 있습니다. 모든 백업은 저장된 미사용 데이터에 대한 AES 256비트 암호화를 사용하여 암호화됩니다.

이러한 백업 파일은 내보낼 수 없습니다. 백업은 유연한 서버의 복원 작업에만 사용할 수 있습니다. MySQL 클라이언트에서 [mysqldump](../concepts-migrate-dump-restore.md#dump-and-restore-using-mysqldump-utility)를 사용하여 데이터베이스를 복사할 수도 있습니다.

## <a name="backup-frequency"></a>Backup 주기

유연한 서버의 백업은 스냅샷 기반입니다. 첫 번째 전체 스냅샷 백업은 서버를 만든 직후에 예약됩니다. 첫 번째 전체 스냅샷 백업은 서버의 기본 백업으로 유지됩니다. 후속 스냅샷 백업은 차등 백업만 수행합니다.

차등 스냅샷 백업은 하루에 한 번 이상 발생합니다. 차등 스냅샷 백업은 정해진 일정으로 발생하지 않습니다. 차등 스냅샷 백업은 마지막 차등 백업 이후 MySQL의 이진 로그가 50GB를 초과하지 않는 한 24시간마다 발생합니다. 하루에 최대 6번의 차등 스냅샷이 허용됩니다. 트랜잭션 로그 백업은 5분마다 발생합니다.

## <a name="backup-retention"></a>백업 보존

데이터베이스 백업은 지역 내에서 3개의 복사본에 저장된 LRS(로컬 중복 스토리지)에 저장됩니다. 백업은 서버의 백업 보존 기간에 따라 보존됩니다. 1-35일의 보존 기간을 선택할 수 있고 기본 보존 기간은 7일입니다. 서버 생성 도중이나 Azure Portal을 사용하여 나중에 백업 구성을 업데이트하여 보존 기간을 설정할 수 있습니다.

백업 보존 기간은 사용 가능한 백업을 기반으로 하기 때문에 특정 시점 복원 작업을 수행할 수 있는 시간을 제어합니다. 백업 보존 기간은 복원 관점에서 복구 기간으로 취급될 수도 있습니다. 백업 보존 기간 내에 특정 시점 복원을 수행하기 위해 필요한 모든 백업이 백업 스토리지에 보존됩니다. 예를 들어 백업 보존 기간이 7일로 설정되었으면 복구 기간은 최근 7일로 간주됩니다. 이 시나리오에서는 최근 7일 동안 서버 복원에 필요한 모든 백업이 보존됩니다. 7일의 백업 보존 기간을 사용하는 경우 데이터베이스 스냅샷 및 트랜잭션 로그 백업은 마지막 8일 동안(기간 1일 전) 저장됩니다.

## <a name="backup-storage-cost"></a>백업 스토리지 비용

유연한 서버는 추가 비용 없이 최대 100%의 프로비저닝된 서버 스토리지를 백업 스토리지로 제공합니다. 사용되는 모든 추가 백업 스토리지는 매월 GB 단위로 청구됩니다. 예를 들어 250GB 스토리지 서버를 프로비전한 경우 서버 백업에 250GB의 스토리지를 추가 비용 없이 이용할 수 있습니다. 매일 백업 사용량이 25GB이면 최대 10일 동안 체험용 백업 스토리지를 사용할 수 있습니다. 250GB를 초과하여 백업에 소비된 스토리지는 [가격 책정 모델](https://azure.microsoft.com/pricing/details/mysql/)에 따라 비용이 청구됩니다.

Azure Portal에서 제공되는 Azure Monitor의 [사용된 백업 스토리지](../concepts-monitoring.md) 메트릭을 사용하여 서버에서 사용된 백업 스토리지를 모니터링할 수 있습니다. 사용된 **백업 스토리지** 메트릭은 서버에 대해 설정된 백업 보존 기간에 따라 유지되는 모든 데이터베이스 백업 및 로그 백업에서 사용하는 스토리지의 합계를 나타냅니다. 서버에서 과도한 트랜잭션 작업을 수행하면 전체 데이터베이스 크기에 관계없이 백업 스토리지 사용량이 증가할 수 있습니다.

백업 스토리지 비용을 제어하는 기본적인 방법은 적절한 백업 보존 기간을 설정하는 것입니다. 1-35일 사이의 보존 기간을 선택할 수 있습니다.

> [!IMPORTANT]
> 영역 중복 고가용성 구성으로 구성된 데이터베이스 서버에서의 백업은 스냅샷 백업의 경우 오버헤드가 최소한이므로 주 데이터베이스 서버에서 수행됩니다.

> [!IMPORTANT]
> 현재 유연한 서버에서는 지역 중복 백업이 지원되지 않습니다.

## <a name="point-in-time-restore"></a>지정 시간 복원

Azure Database for MySQL 유연한 서버에서 특정 시점 복원을 수행하면 원본 서버와 동일한 지역에 있는 유연한 서버의 백업에서 새 서버가 만들어집니다. 이 경우 컴퓨팅 계층, vCore 수, 스토리지 크기, 백업 보존 기간 및 백업 중복 옵션에 대한 원래 서버의 구성으로 만들어집니다. 또한 가상 네트워크 및 방화벽과 같은 태그와 설정은 원본 서버에서 상속됩니다. 복원이 완료된 후 복원된 서버의 컴퓨팅 및 스토리지 계층, 구성 및 보안 설정을 변경할 수 있습니다.

> [!NOTE]
> 복원 작업 후 기본값으로 재설정되는(그리고 주 서버에서 복사되지 않는) 두 개의 서버 매개변수가 있습니다.
> *   time_zone - 이 값은 기본값 SYSTEM으로 설정됩니다.
> *   event_scheduler - event_scheduler는 복원된 서버에서 OFF로 설정됩니다.

특정 시점 복원은 여러 시나리오에서 유용합니다. 몇 가지 일반적인 사용 사례는 다음과 같습니다.
-   사용자가 데이터베이스의 데이터를 실수로 삭제하는 경우
-   사용자가 중요한 테이블 또는 데이터베이스를 삭제
-   사용자 애플리케이션 결함으로 인해 실수로 적절한 데이터를 잘못된 데이터로 덮어쓸 수도 있습니다.

[Azure Portal](how-to-restore-server-portal.md)를 통해 최신 복원 지점과 사용자 지정 복원 지점 사이에서 선택할 수 있습니다.

-   **최신 복원 지점**: 최신 복원 지점을 사용하면 원본 서버에서 수행된 마지막 백업으로 서버를 복원할 수 있습니다. 복원에 대한 타임스탬프도 포털에 표시됩니다. 이 옵션은 서버를 가장 많이 업데이트된 상태로 신속하게 복원하는 데 유용합니다.
-   **사용자 지정 복원 지점**:이 옵션을 사용하면 유연한 서버에 대해 정의된 보존 기간 내의 시점을 선택할 수 있습니다. 이 옵션은 사용자 오류로부터 복구하기 위해 정확한 시점에 서버를 복원하는 데 유용합니다.

예상 복구 시간은 데이터베이스 크기, 트랜잭션 로그 백업 크기, SKU의 컴퓨팅 크기, 복원 시간까지 포함하여 여러 가지 요인에 따라 달라집니다. 트랜잭션 로그 복구는 복원 프로세스에서 가장 시간이 많이 소요되는 부분입니다. 복원 시간이 전체 또는 차등 스냅샷 백업 일정에 더 가깝게 선택된 경우 트랜잭션 로그 애플리케이션이 최소한이므로 복원이 더 빠릅니다. 서버에 대한 정확한 복구 시간을 추정하려면 환경별 변수가 너무 많기 때문에 사용자의 환경에서 테스트하는 것이 좋습니다.

> [!IMPORTANT]
> 영역 중복 고가용성을 사용하여 구성된 유연한 서버를 복원하는 경우 복원된 서버는 주 서버와 동일한 지역 및 영역에 구성되고 비 HA 모드에서 단일 유연한 서버로 배포됩니다. 유연한 서버에 대해서는 [영역 중복 고가용성](concepts-high-availability.md)을 참조하세요.

> [!IMPORTANT]
> 삭제된 서버는 복원할 수 **없습니다**. 서버를 삭제하면 해당 서버에 속한 모든 데이터베이스도 삭제되고 복구할 수 없습니다. 배포 후에 실수로 인한 삭제 또는 예기치 않은 변경에서 서버 리소스를 보호하려면 관리자는 [관리 잠금](../../azure-resource-manager/management/lock-resources.md)을 활용할 수 있습니다.

## <a name="perform-post-restore-tasks"></a>복원 후 작업 수행

**최신 복원 지점** 또는 **사용자 지정 복원 지점** 복구 메커니즘에서 복원한 후에 다음 작업을 수행하여 사용자 및 애플리케이션이 다시 백업 및 실행되도록 해야 합니다.

-   새 서버가 원래 서버를 교체하기 위한 것이라면 클라이언트와 클라이언트 애플리케이션을 새 서버로 리디렉션합니다.
-   사용자가 연결할 수 있도록 적절한 서버 수준 방화벽 및 가상 네트워크 규칙이 설정되어 있는지 확인합니다.
-   적절한 로그인 및 데이터베이스 수준 권한이 있는지 확인합니다.
-   필요에 따라 경고를 구성합니다.

## <a name="next-steps"></a>다음 단계

-   [비즈니스 연속성](./concepts-business-continuity.md)에 대한 자세한 정보
-   [영역 중복 고가용성](./concepts-high-availability.md)에 대한 자세한 정보
-   [백업 및 복구](./concepts-backup-restore.md)에 대한 자세한 정보
