---
title: Azure 파일의 공유 스냅숏 개요 | Microsoft Docs
description: 공유 스냅숏은 공유를 백업하는 방법으로 특정 시점에 생성된 Azure 파일 공유의 읽기 전용 버전입니다.
services: storage
author: roygara
ms.service: storage
ms.topic: article
ms.date: 01/17/2018
ms.author: rogarana
ms.subservice: files
ms.openlocfilehash: 7305c6a5047bd09f6c9bda018748643ff81fe893
ms.sourcegitcommit: 37343b814fe3c95f8c10defac7b876759d6752c3
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/24/2019
ms.locfileid: "63763498"
---
# <a name="overview-of-share-snapshots-for-azure-files"></a>Azure 파일의 공유 스냅숏 개요 
Azure 파일은 파일 공유의 공유 스냅숏을 생성하는 기능을 제공합니다. 공유 스냅숏은 특정 시점의 공유 상태를 캡처합니다. 이 문서에서는 공유 스냅숏이 제공하는 기능 및 사용자 지정 사용 사례에 이를 용할 수 있는 방법을 설명합니다.

## <a name="when-to-use-share-snapshots"></a>공유 스냅숏을 사용하는 경우

### <a name="protection-against-application-error-and-data-corruption"></a>애플리케이션 오류 및 데이터 손상으로부터 보호
파일 공유를 사용하는 애플리케이션은 쓰기, 읽기, 저장, 전송 및 처리 등의 작업을 수행합니다. 애플리케이션이 잘못 구성되거나 의도하지 않은 버그가 발생하여 일부 블록을 실수로 덮어쓰거나 손상시킬 수 있습니다. 이러한 시나리오를 방지하기 위해 새 애플리케이션 코드를 배포하기 전에 공유 스냅숏을 생성할 수 있습니다. 새 배포에서 버그 또는 애플리케이션 오류가 발생하면 해당 파일 공유에 있는 이전 버전의 데이터로 돌아갈 수 있습니다. 

### <a name="protection-against-accidental-deletions-or-unintended-changes"></a>실수로 삭제 또는 의도하지 않은 변경 방지
파일 공유의 텍스트 파일을 작업하고 있다고 가정하겠습니다. 텍스트 파일을 닫은 후에는 변경 내용을 취소할 수 없게 됩니다. 이런 경우에는 파일의 이전 버전을 복구해야 합니다. 실수로 파일 이름을 변경하거나 파일을 삭제한 경우 공유 스냅숏을 사용하여 파일의 이전 버전을 복구할 수 있습니다.

### <a name="general-backup-purposes"></a>일반 백업 목적
파일 공유를 만든 후에는 파일 공유의 공유 스냅숏을 주기적으로 만들어 데이터 백업에 사용할 수 있습니다. 공유 스냅숏을 주기적으로 만들면 나중에 감사 요구 사항이나 재해 복구에 사용할 수 있는 데이터의 이전 버전을 유지 관리하는 데 도움이 됩니다.

## <a name="capabilities"></a>기능
공유 스냅숏은 데이터의 특정 시점 읽기 전용 복사본입니다. REST API를 사용하여 스냅숏을 만들고 삭제하고 관리할 수 있습니다. 클라이언트 라이브러리, Azure CLI 및 Azure Portal에서도 같은 기능을 사용할 수 있습니다. 

REST API 및 SMB 둘 다를 사용하여 공유의 스냅숏을 볼 수 있습니다. 디렉터리 또는 파일의 버전 목록을 검색할 수 있으며 특정 버전을 드라이브로 직접 탑재할 수도 있습니다(Windows에서만 사용 가능 - [한도](#limits) 참조). 

공유 스냅숏이 생성된 후에는 읽거나 복사하거나 삭제할 수 있지만 수정할 수는 없습니다. 전체 공유 스냅숏을 다른 저장소 계정으로 복사할 수는 없습니다. AzCopy 또는 다른 복사 메커니즘을 사용하여 파일별로 작업을 수행해야 합니다.

공유 스냅숏 기능은 파일 공유 수준에서 제공됩니다. 검색은 개별 파일을 복원할 수 있도록 개별 파일 수준에서 제공됩니다. SMB, REST API, 포털, 클라이언트 라이브러리 또는 PowerShell/CLI 툴링을 사용하여 전체 파일 공유를 복원할 수 있습니다.

파일 공유의 공유 스냅숏은 기본 파일 공유와 동일합니다. 유일한 차이는 공유 스냅숏을 생성한 시간을 나타내기 위해 **DateTime** 값이 공유 URI에 추가되는 것입니다. 예를 들어 파일 공유 URI가 http://storagesample.core.file.windows.net/myshare이면 공유 스냅숏 URI는 다음과 유사합니다.
```
http://storagesample.file.core.windows.net/myshare?snapshot=2011-03-09T01:42:34.9360000Z
```

공유 스냅숏은 명시적으로 삭제하기 전까지 유지됩니다. 공유 스냅숏은 해당 기본 파일 공유보다 수명이 길 수 없습니다. 기본 파일 공유와 연결된 스냅숏을 열거하여 현재 스냅숏을 추적할 수 있습니다. 

파일 공유의 공유 스냅숏을 생성하면 공유의 시스템 속성에 있는 파일이 같은 값을 가진 공유 스냅숏에 복사됩니다. 만들 때 공유 스냅숏에 대한 별도의 메타데이터를 지정하지 않으면 기본 파일 및 파일 공유의 메타데이터도 공유 스냅숏에 복사됩니다.

먼저 모든 공유 스냅숏을 삭제하지 않으면 공유 스냅숏이 있는 공유를 삭제할 수 없습니다.

## <a name="space-usage"></a>공간 사용 
공유 스냅숏은 기본적으로 증분합니다. 가장 최근의 공유 스냅숏 이후에 변경된 데이터만 저장됩니다. 따라서 공유 스냅숏을 생성하는 데 필요한 시간이 최소화되어 저장소 비용이 절약됩니다. 개체 또는 속성 또는 메타데이터 업데이트 작업에 대한 쓰기 작업은 "변경한 콘텐츠"에 포함되어 공유 스냅숏에 저장됩니다. 

공간을 절약하기 위해 변동이 가장 큰 기간의 공유 스냅숏을 삭제할 수 있습니다.

공유 스냅숏이 증분식으로 저장되더라도 공유를 복원하려면 가장 최근의 공유 스냅숏만 유지해야 합니다. 공유 스냅숏을 삭제하면 해당 공유 스냅숏에 고유한 데이터만 제거됩니다. 활성 스냅숏에는 (공유 스냅숏을 생성한 시점부터) 데이터를 찾아서 원래 위치 또는 다른 위치로 복원하는 데 필요한 모든 정보가 들어 있습니다. 항목 수준에서 복원 할 수 있습니다.

스냅숏은 5TB 공유 제한에 포함되지 않습니다. 공유 스냅숏이 차지하는 총 공간에는 제한이 없습니다. 저장소 계정 제한은 여전히 적용됩니다.

## <a name="limits"></a>제한
Azure Files에서 허용하는 최대 공유 스냅숏 수는 200개입니다. 공유 스냅숏 200이후로 새 공유 스냅숏을 생성하려면 이전 공유 스냅숏을 삭제해야 합니다. 

공유 스냅숏 생성을 위한 동시 호출에는 제한이 없습니다. 특정 파일 공유의 공유 스냅숏이 사용할 수 있는 공간의 양에는 제한이 없습니다. 

오늘은 Linux에서 공유 스냅숏을 탑재할 수 없습니다. 이는 Linux SMB 클라이언트가 Windows와 같은 스냅숏 탑재를 지원하지 않기 때문입니다.

## <a name="copying-data-back-to-a-share-from-share-snapshot"></a>공유 스냅숏에서 공유로 데이터 다시 복사
파일 및 공유 스냅숏과 관련된 복사 작업에는 다음 규칙이 적용됩니다.

파일 공유 스냅숏의 개별 파일을 해당 기본 공유 또는 다른 위치에 덮어써서 복사할 수 있습니다. 공유 스냅숏에서 파일별로 복사하여 한 파일의 이전 버전을 복원하거나 전체 파일 공유를 복원할 수 있습니다. 공유 스냅숏은 기본 공유로 승격되지 않습니다. 

공유 스냅숏은 복사 후 그대로 유지되지만 기본 파일 공유는 공유 스냅숏에 사용할 수 있는 데이터 복사본으로 덮어씁니다. 모든 복원된 파일은 "변경한 콘텐츠"에 포함됩니다.

공유 스냅숏의 파일을 다른 이름으로 대상에 복사할 수 있습니다. 그 결과 생성되는 대상 파일은 공유 스냅숏이 아닌 쓰기 가능한 파일입니다.

대상 파일을 복사본으로 덮어쓸 때 원래 대상 파일과 연결된 공유 스냅숏은 그대로 유지됩니다.

## <a name="general-best-practices"></a>일반 모범 사례 
Azure에서 인프라를 실행할 때 데이터 복구를 위해 가능하면 언제나 백업을 자동화하십시오. 자동화된 작업은 수동 프로세스보다 더 안정적이므로 데이터 보호 및 복구 기능을 개선하는 데 도움이 됩니다. 자동화를 위해 REST API, 클라이언트 SDK 또는 스크립팅을 사용할 수 있습니다.

공유 스냅숏 스케줄러를 배포하기 전에 불필요한 요금이 발생하지 않도록 공유 스냅숏 빈도 및 보존 설정을 신중히 고려하십시오.

공유 스냅숏은 파일 수준 보호만 제공합니다. 공유 스냅숏은 파일 공유 또는 저장소 계정에서 키보드 입력 실수로 인한 삭제를 방지하지 않습니다. 저장소 계정이 실수로 삭제되지 않도록 보호하기 위해 저장소 계정이나 리소스 그룹을 잠글 수 있습니다.

## <a name="next-steps"></a>다음 단계
- 다음에서 공유 스냅숏으로 작업:
    - [PowerShell](storage-how-to-use-files-powershell.md)
    - [CLI](storage-how-to-use-files-cli.md)
    - [Windows](storage-how-to-use-files-windows.md#accessing-share-snapshots-from-windows)
    - [공유 스냅숏 FAQ](storage-files-faq.md#share-snapshots)
