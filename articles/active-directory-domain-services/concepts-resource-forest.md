---
title: Azure AD Domain Services에 대한 리소스 포리스트 개념 | Microsoft Docs
description: Azure Active Directory Domain Services에서 리소스 포리스트가 무엇인지와 이 기능이 제한된 사용자 인증 옵션 또는 보안 문제가 있는 하이브리드 환경의 조직에 어떤 혜택을 주는지 알아봅니다.
services: active-directory-ds
author: iainfoulds
manager: daveba
ms.service: active-directory
ms.subservice: domain-services
ms.workload: identity
ms.topic: conceptual
ms.date: 07/06/2020
ms.author: iainfou
ms.openlocfilehash: 88069c6ac90fce7e33cac6ed3c30accb18ded8bf
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/09/2020
ms.locfileid: "91396402"
---
# <a name="resource-forest-concepts-and-features-for-azure-active-directory-domain-services"></a>Azure Active Directory Domain Services에 대한 리소스 포리스트 개념 및 기능

Azure Active Directory Domain Services (Azure AD DS)는 레거시 온-프레미스 lob (기간 업무) 응용 프로그램에 대 한 로그인 환경을 제공 합니다. 온-프레미스 및 클라우드 사용자의 사용자, 그룹 및 암호 해시는 Azure AD DS 관리형 도메인과 동기화됩니다. 이러한 동기화 된 암호 해시는 사용자에 게 온-프레미스 AD DS, Microsoft 365 및 Azure Active Directory에 사용할 수 있는 단일 자격 증명 집합을 제공 합니다.

보안 및 추가 보안 이점을 제공하지만 일부 조직에서는 이러한 사용자 암호 해시를 Azure AD 또는 Azure AD DS와 동기화할 수 없습니다. 조직의 사용자는 스마트 카드 인증만 사용하기 때문에 암호를 알지 못할 수 있습니다. 이러한 제한 사항으로 인해 일부 조직에서는 Azure AD DS를 사용하여 온-프레미스 클래식 애플리케이션을 Azure로 리프트 앤 시프트하지 못합니다.

이러한 요구와 제한을 해결 하기 위해 리소스 포리스트를 사용 하는 관리 되는 도메인을 만들 수 있습니다. 이 개념 문서에서는 포리스트의 정의 및 포리스트가 다른 리소스를 신뢰하여 보안 인증 방법을 제공하는 방식을 설명합니다.

## <a name="what-are-forests"></a>포리스트란?

*포리스트*는 AD DS(Active Directory Domain Services)에서 하나 이상의 *도메인*을 그룹화하는 데 사용되는 논리적 구문입니다. 그런 다음, 도메인은 사용자 또는 그룹에 대한 개체를 저장하고 인증 서비스를 제공합니다.

Azure AD DS 관리 되는 도메인에서 포리스트는 도메인을 하나만 포함 합니다. 온-프레미스 AD DS 포리스트에는 여러 도메인이 포함되는 경우가 많습니다. 대기업은 인수 및 합병 후에 각각에 여러 도메인이 포함되는 여러 온-프레미스 포리스트가 구현될 수 있습니다.

기본적으로 관리 되는 도메인은 *사용자* 포리스트로 생성 됩니다. 이 유형의 포리스트는 온-프레미스 AD DS 환경에서 만든 모든 사용자 계정을 포함하여 Azure AD의 모든 개체를 동기화합니다. 도메인에 가입 된 VM에 로그인 하는 것과 같이 사용자 계정은 관리 되는 도메인에 대해 직접 인증할 수 있습니다. 사용자 포리스트는 암호 해시를 동기화할 수 있고 사용자가 스마트 카드 인증과 같은 독점적인 로그인 방법을 사용하지 않을 때 작동합니다.

관리 되는 도메인 *리소스* 포리스트에서는 사용자가 온-프레미스 AD DS에서 단방향 포리스트 *트러스트* 를 통해 인증 합니다. 이 방법을 사용 하면 사용자 개체 및 암호 해시가 관리 되는 도메인에 동기화 되지 않습니다. 사용자 개체 및 자격 증명은 온-프레미스 AD DS에만 존재합니다. 이 접근 방식을 통해 엔터프라이즈는 Azure에서 LDAPS, Kerberos 또는 NTLM 등의 클래식 인증에 의존하는 리소스 및 애플리케이션 플랫폼을 호스트할 수 있지만 인증 문제나 우려는 해소됩니다.

또한 리소스 포리스트는 애플리케이션을 한 번에 한 구성 요소씩 리프트 앤 시프트하는 기능을 제공합니다. 많은 레거시 온-프레미스 애플리케이션은 종종 웹 서버 또는 프런트 엔드와 많은 데이터베이스 관련 구성 요소를 사용하여 다중 계층으로 구성됩니다. 이와 같이 계층으로 구성되므로 전체 애플리케이션을 한번에 클라우드로 리프트 앤 시프트하는 것이 어렵습니다. 리소스 포리스트를 사용하면 애플리케이션을 Azure로 좀 더 쉽게 이동할 수 있는 단계별 접근 방식으로 애플리케이션을 클라우드로 전환할 수 있습니다.

## <a name="what-are-trusts"></a>트러스트란?

도메인이 둘 이상 있는 조직에서는 사용자가 다른 도메인의 공유 리소스에 액세스해야 하는 경우가 종종 있습니다. 이러한 공유 리소스에 액세스하려면 한 도메인의 사용자가 다른 도메인에서 인증을 받아야 합니다. 서로 다른 도메인의 클라이언트와 서버 간에 이러한 인증 및 권한 부여 기능을 제공하려면 두 도메인 간에 *트러스트*가 있어야 합니다.

도메인 트러스트를 사용하는 경우 각 도메인의 인증 메커니즘은 다른 도메인에서 들어오는 인증을 신뢰합니다. 트러스트는 들어오는 인증 요청이 신뢰할 수 있는 기관(*신뢰할 수 있는* 도메인)에서 가져온 것인지 확인하여 리소스 도메인(*트러스팅* 도메인)의 공유 리소스에 대해 제어된 액세스를 제공합니다. 트러스트는 유효성이 검사된 인증 요청만 도메인 간에 이동되도록 허용하는 브리지 역할을 합니다.

트러스트가 인증 요청을 통과하는 방식은 구성 방법에 따라 달라집니다. 트러스트는 다음 중 한 가지 방법으로 구성할 수 있습니다.

* **단방향** - 트러스트된 도메인에서 트러스팅 도메인의 리소스에 대한 액세스를 제공합니다.
* **양방향** - 각 도메인에서 다른 도메인의 리소스에 대한 액세스를 제공합니다.

다음 방법 중 하나를 통해 트러스트 관계를 추가로 처리하도록 트러스트를 구성할 수도 있습니다.

* **비전이적** - 트러스트는 두 트러스트 파트너 도메인 간에만 존재합니다.
* **전이적** - 트러스트는 한쪽 파트너가 신뢰하는 다른 모든 도메인으로 자동 확장됩니다.

도메인을 만들 때 트러스트 관계가 자동으로 설정되는 경우도 있습니다. 다른 경우에는 트러스트 유형을 선택하고 명시적으로 적절한 관계를 설정해야 합니다. 사용 되는 특정 트러스트 유형 및 이러한 트러스트 관계의 구조는 AD DS 디렉터리가 구성 된 방법 및 네트워크에 서로 다른 버전의 Windows가 있는지 여부에 따라 달라 집니다.

## <a name="trusts-between-two-forests"></a>두 포리스트 간 트러스트

단방향 또는 양방향 포리스트 트러스트를 수동으로 만들어 단일 포리스트 내의 도메인 트러스트를 다른 포리스트로 확장할 수 있습니다. 포리스트 트러스트는 한 포리스트 루트 도메인과 또 다른 포리스트 루트 도메인 간에 존재하는 전이적 트러스트입니다.

* 단방향 포리스트 트러스트는 한 포리스트의 모든 사용자가 다른 포리스트의 모든 도메인을 신뢰하도록 허용합니다.
* 양방향 포리스트 트러스트는 두 포리스트의 모든 도메인 간에 전이적 트러스트 관계를 형성합니다.

포리스트 트러스트의 전이성은 두 포리스트 파트너로 제한됩니다. 포리스트 트러스트가 파트너 중 하나에서 트러스트된 추가 포리스트로 확장되지 않습니다.

![Azure AD DS에서 온-프레미스 AD DS로의 포리스트 트러스트에 대한 다이어그램](./media/concepts-resource-forest/resource-forest-trust-relationship.png)

조직의 AD DS 구조에 따라 서로 다른 도메인 및 포리스트 트러스트 구성을 만들 수 있습니다. Azure AD DS는 단방향 포리스트 트러스트만 지원합니다. 이 구성에서 관리 되는 도메인의 리소스는 온-프레미스 포리스트의 모든 도메인을 신뢰할 수 있습니다.

## <a name="supporting-technology-for-trusts"></a>트러스트의 지원 기술

트러스트는 DNS와 같은 다양한 서비스 및 기능을 사용하여 파트너 포리스트에서 도메인 컨트롤러를 찾습니다. 또한 트러스트는 NTLM 및 Kerberos 인증 프로토콜과 Windows 기반 권한 부여 및 액세스 제어 메커니즘에 따라 AD DS 도메인 및 포리스트 간에 보안 통신 인프라를 제공 하는 데 도움이 됩니다. 다음 서비스 및 기능은 성공적인 트러스트 관계를 지원하는 데 유용합니다.

### <a name="dns"></a>DNS

AD DS에는 DC(도메인 컨트롤러) 위치 및 이름 지정을 위해 DNS가 필요합니다. AD DS가 성공적으로 작동하기 위해 DNS에서 다음 지원이 제공됩니다.

* 네트워크 호스트 및 서비스에서 DC를 찾을 수 있도록 하는 이름 확인 서비스
* 엔터프라이즈에서 해당 디렉터리 서비스 도메인의 이름에 조직 구조를 반영할 수 있도록 하는 명명 구조.

일반적으로 AD DS 도메인 네임스페이스를 미러링하는 DNS 도메인 네임스페이스가 배포됩니다. AD DS 배포 하기 전에 기존 DNS 네임 스페이스가 있는 경우 DNS 네임 스페이스는 일반적으로 AD DS를 위해 분할 되며, AD DS 포리스트 루트에 대 한 DNS 하위 도메인 및 위임이 만들어집니다. 그러면 각 AD DS 자식 도메인에 대 한 추가 DNS 도메인 이름이 추가 됩니다.

DNS는 AD DS Dc의 위치를 지 원하는 데에도 사용 됩니다. DNS 영역은 네트워크 호스트 및 서비스에서 AD DS Dc를 찾을 수 있도록 하는 DNS 리소스 레코드로 채워집니다.

### <a name="applications-and-net-logon"></a>애플리케이션 및 Net Logon

애플리케이션과 Net Logon 서비스는 모두 Windows 분산 보안 채널 모델의 구성 요소입니다. Windows Server 및 AD DS와 통합 된 응용 프로그램은 인증 프로토콜을 사용 하 여 인증을 수행할 수 있는 보안 경로를 설정할 수 있도록 Net Logon 서비스와 통신 합니다.

### <a name="authentication-protocols"></a>인증 프로토콜

AD DS Dc는 다음 프로토콜 중 하나를 사용 하 여 사용자 및 응용 프로그램을 인증 합니다.

* **Kerberos 버전 5 인증 프로토콜**
    * Kerberos 버전 5 프로토콜은 Windows를 실행하고 타사 운영 체제를 지원하는 온-프레미스 컴퓨터에서 사용하는 기본 인증 프로토콜입니다. 이 프로토콜은 RFC 1510에 지정 되어 있으며 이러한 프로토콜을 사용 하는 클라이언트 및 서버 응용 프로그램 뿐만 아니라 AD DS, SMB (서버 메시지 블록), HTTP 및 RPC (원격 프로시저 호출)와 완벽 하 게 통합 됩니다.
    * Kerberos 프로토콜을 사용하는 경우 서버는 DC에 연결할 필요가 없습니다. 대신, 클라이언트는 서버 계정 도메인의 DC에서 하나를 요청하여 서버에 대한 티켓을 가져옵니다. 그런 다음, 서버는 다른 인증 기관에 문의하지 않고 티켓이 유효한지 검사합니다.
    * 트랜잭션과 관련된 컴퓨터에서 Kerberos 버전 5 프로토콜을 지원하지 않는 경우 NTLM 프로토콜이 사용됩니다.

* **NTLM 인증 프로토콜**
    * NTLM 프로토콜은 이전 운영 체제에서 사용하는 클래식 네트워크 인증 프로토콜입니다. 호환성을 위해 AD DS 도메인에서 이전 Windows 기반 클라이언트 및 서버를 위해 설계 된 응용 프로그램에서 제공 하는 네트워크 인증 요청을 처리 하는 데 사용 되며 타사 운영 체제에도 사용 됩니다.
    * 클라이언트와 서버 간에 NTLM 프로토콜을 사용하는 경우 서버는 DC의 도메인 인증 서비스에 연결하여 클라이언트 자격 증명을 확인해야 합니다. 서버는 클라이언트 자격 증명을 클라이언트 계정 도메인의 DC에 전달하여 클라이언트를 인증합니다.
    * 두 개의 AD DS 도메인 또는 포리스트가 트러스트로 연결 된 경우 이러한 프로토콜을 사용 하 여 만든 인증 요청은 두 포리스트의 리소스에 대 한 액세스를 제공 하기 위해 라우팅될 수 있습니다.

## <a name="authorization-and-access-control"></a>권한 부여 및 액세스 제어

권한 부여 및 신뢰 기술은 함께 작동 하 여 AD DS 도메인 이나 포리스트 간에 보안 통신 인프라를 제공 합니다. 권한 부여는 도메인의 리소스에 대한 사용자의 액세스 수준을 결정합니다. 트러스트는 다른 도메인의 사용자를 인증하는 경로를 제공하여 사용자의 도메인 간 권한 부여를 용이하게 하므로 해당 도메인의 공유 리소스에 대한 요청을 인증할 수 있습니다.

트러스팅 도메인에서 만든 인증 요청이 트러스트된 도메인에서 유효하다고 확인되는 경우 대상 리소스에 전달됩니다. 그런 다음, 대상 리소스는 해당 액세스 제어 구성에 따라 트러스트된 도메인에 있는 사용자, 서비스 또는 컴퓨터의 특정 요청에 대해 권한을 부여할 것인지 여부를 결정합니다.

트러스트는 트러스팅 도메인에 전달되는 인증 요청의 유효성을 검사하는 메커니즘을 제공합니다. 리소스 컴퓨터의 액세스 제어 메커니즘은 트러스트된 도메인의 요청자에게 부여된 최종 액세스 수준을 결정합니다.

## <a name="next-steps"></a>다음 단계

트러스트에 대한 자세한 내용은 [Azure AD DS에서 포리스트 트러스트의 작동 방법][concepts-trust]을 참조하세요.

리소스 포리스트를 사용 하 여 관리 되는 도메인을 만드는 작업을 시작 하려면 [Azure AD DS 관리 되는 도메인 만들기 및 구성][tutorial-create-advanced]을 참조 하세요. 그런 다음 [온-프레미스 도메인에 대 한 아웃 바운드 포리스트 트러스트를 만들][create-forest-trust]수 있습니다.

<!-- LINKS - INTERNAL -->
[concepts-trust]: concepts-forest-trust.md
[tutorial-create-advanced]: tutorial-create-instance-advanced.md
[create-forest-trust]: tutorial-create-forest-trust.md
