---
title: Azure의 Windows VM용 Microsoft 맬웨어 방지 확장 | Microsoft Docs
description: 확장을 사용하여 Windows 가상 머신에 Azure 맬웨어 방지 확장을 배포합니다.
services: virtual-machines-windows
documentationcenter: ''
author: TomShinder
manager: jeconnoc
editor: ''
ms.assetid: ''
ms.service: virtual-machines-windows
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows
ms.workload: infrastructure-services
ms.date: 04/12/2018
ms.author: tomsh
ms.openlocfilehash: 7660ade6d3774c783c6874c75f6bc3556e19fa93
ms.sourcegitcommit: 94305d8ee91f217ec98039fde2ac4326761fea22
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/05/2019
ms.locfileid: "57410233"
---
# <a name="microsoft-antimalware-extension-for-windows"></a>Windows용 Microsoft 맬웨어 방지 확장

## <a name="overview"></a>개요

클라우드 환경에 대한 최신 위협 환경은 매우 동적이며 규정 준수 및 보안 요구 사항을 충족 하기 위해 비즈니스 IT 클라우드 구독자에 대한 압력을 늘려서 효과적으로 보호를 유지합니다. Azure용 Microsoft 맬웨어 방지 프로그램은 악성 또는 원치 않는 소프트웨어가 사용자의 Azure 시스템에서 스스로의 설치나 실행을 시도할 때 구성 가능한 알림을 통해 바이러스, 스파이웨어 및 기타 악성 소프트웨어를 식별 및 제거하는 데 도움이 되는 무료 실시간 보호 기능입니다. 이 솔루션은 Windows 8.0 이상용 MSE(Microsoft Security Essentials), Microsoft Forefront Endpoint Protection, Microsoft System Center Endpoint Protection, Windows Intune 및 Windows Defender와 동일한 맬웨어 방지 플랫폼을 기반으로 합니다.
Azure를 위한 Microsoft 맬웨어 방지는 애플리케이션 및 테넌트 환경에 대한 단일 에이전트 솔루션이며 사용자의 개입 없이 백그라운드에서 실행되도록 설계됩니다. 맬웨어 방지 프로그램 모니터링을 포함하여 기본 보안 또는 고급 사용자 지정 구성을 사용하여 애플리케이션 워크로드의 필요에 따라 보호를 배포할 수 있습니다.

## <a name="prerequisites"></a>필수 조건

### <a name="operating-system"></a>운영 체제

Azure용 Microsoft 맬웨어 방지 솔루션에는 Microsoft 맬웨어 방지 클라이언트와 서비스, 맬웨어 방지 클래식 배포 모델, 맬웨어 방지 PowerShell cmdlet 및 Azure 진단 확장이 포함되어 있습니다. Microsoft 맬웨어 방지 솔루션은 Windows Server 2008 R2, Windows Server 2012 및 Windows Server 2012 R2 운영 체제 제품군에서 지원됩니다. Windows Server 2008 운영 체제 및 Linux 둘 다에서 지원되지 않습니다. 

Windows Defender는 기본 제공되는 맬웨어 방지 프로그램이며 Windows Server 2016에서 사용하도록 설정되어 있습니다. Windows Defender 인터페이스는 일부 Windows Server 2016 SKU에서도 기본적으로 사용하도록 설정됩니다.
Azure VM 맬웨어 방지 확장은 Windows Defender를 사용하여 Windows Server 2016 Azure VM에 추가할 수 있지만, 이 시나리오에서 확장은 Windows Defender에서 사용할 선택적 구성 정책을 적용하며, 맬웨어 방지 서비스를 추가로 배포하지는 않습니다. 이 업데이트에 대한 자세한 내용은 [여기](https://blogs.msdn.microsoft.com/azuresecurity/2017/03/07/update-to-azure-antimalware-extension-for-cloud-services/)에서 확인할 수 있습니다.

### <a name="internet-connectivity"></a>인터넷 연결

Windows용 Microsoft 맬웨어 방지를 사용하려면 대상 가상 머신이 엔진과 서명 업데이트를 정기적으로 받기 위해 인터넷에 연결되어 있어야 합니다. 

## <a name="template-deployment"></a>템플릿 배포
Azure Resource Manager 템플릿을 사용하여 Azure VM 확장을 배포할 수 있습니다. Azure 맬웨어 방지에 등록하는 것처럼 배포 후 구성이 필요한 하나 이상의 가상 머신을 배포하는 경우 템플릿을 사용하는 것이 좋습니다.

가상 머신 확장에 대한 JSON 구성은 가상 머신 리소스 내에 중첩되거나 루트 또는 최상위 수준의 Resource Manager JSON 템플릿에 배치될 수 있습니다. JSON 구성의 배치는 리소스 이름 및 형식 값에 영향을 줍니다. 자세한 내용은 [자식 리소스의 이름 및 형식 설정](../../azure-resource-manager/resource-group-authoring-templates.md#child-resources)을 참조하세요. 

다음 예제에서는 VM 확장이 가상 머신 리소스 내에 중첩되어 있다고 가정합니다. 확장 리소스를 중첩하는 경우 JSON은 가상 머신의 `"resources": []` 개체에 배치됩니다.

```json
{
      "type": "Microsoft.Compute/virtualMachines/extensions",
      "name": "[concat(parameters('vmName'),'/', parameters('vmExtensionName'))]",
      "apiVersion": "2017-03-30",
      "location": "[resourceGroup().location]",
      "dependsOn": [
        "[concat('Microsoft.Compute/virtualMachines/', parameters('vmName'))]"
      ],

      "properties": {
        "publisher": "Microsoft.Azure.Security",
        "type": "IaaSAntimalware",
        "typeHandlerVersion": "1.3",
        "settings": {
          "AntimalwareEnabled": "true",
          "Exclusions": {
            "Extensions": ".log;.ldf",
            "Paths": "D:\\IISlogs;D:\\DatabaseLogs",
            "Processes": "mssence.svc"
          },

          "RealtimeProtectionEnabled": "true",
          "ScheduledScanSettings": {
            "isEnabled": "true",
            "scanType": "Quick",
            "day": "7",
            "time": "120"
          }
        },
        "protectedSettings": null
      }
}
```

## <a name="powershell-deployment"></a>PowerShell 배포
배포 유형에 따라 다르지만, 해당 명령을 사용하여 Azure 맬웨어 방지 가상 머신 확장을 기존 가상 머신에 배포합니다.

  * 클래식 IaaS 가상 머신 - https://docs.microsoft.com/powershell/module/servicemanagement/azure/set-azureserviceantimalwareextension
  * Azure Resource Manager 기반 가상 머신 - https://blogs.msdn.microsoft.com/azuresecurity/2016/02/24/update-on-microsoft-antimalware-and-azure-resource-manager-arm-vms/
  * Azure Service Fabric 클러스터 - https://blogs.msdn.microsoft.com/azuresecurity/2016/10/07/add-microsoft-antimalware-to-azure-service-fabric-clusters/
  * 클래식 클라우드 서비스 - https://docs.microsoft.com/powershell/module/servicemanagement/azure/set-azureserviceantimalwareextension

## <a name="troubleshoot-and-support"></a>문제 해결 및 지원

### <a name="troubleshoot"></a>문제 해결

Microsoft 맬웨어 방지 확장 로그는 %Systemdrive%\WindowsAzure\Logs\Plugins\Microsoft.Azure.Security.IaaSAntimalware(Or PaaSAntimalware)\1.5.5.x(version#)\CommandExecution.log에서 사용할 수 있습니다.

### <a name="error-codes-and-their-meanings"></a>오류 코드 및 해당 의미

| 오류 코드 | 의미 | 가능한 작업 |
| :---: | --- | --- |
| -2147156224 | 다른 설치에서 MSI를 사용하고 있습니다. | 나중에 설치를 다시 실행합니다. |
| -2147156221 | MSE 설치 프로그램이 이미 실행 중입니다. | 한 번에 하나의 인스턴스만 실행합니다. |
| -2147156208 | 200MB 미만으로 디스크 공간이 부족합니다. | 사용하지 않는 파일을 삭제하고 설치를 다시 시도합니다. |
| -2147156187 | 요청한 재부팅을 마지막으로 설치, 업그레이드, 업데이트 또는 제거합니다. | 다시 부팅하고 설치를 다시 시도합니다. |
| -2147156121 | 설치 프로그램에서 경쟁 업체 제품을 제거하려고 했습니다. 하지만 경쟁 업체 제품을 제거하지 못했습니다. | 경쟁 업체 제품을 수동으로 제거하고, 다시 부팅한 다음, 설치를 다시 시도합니다  |
| -2147156116 | 정책 파일 유효성 검사에 실패했습니다. | 유효한 정책 XML 파일을 설치 프로그램에 전달했는지 확인합니다.  |
| -2147156095 | 설치 프로그램에서 맬웨어 방지 서비스를 시작할 수 없습니다. | 모든 이진 파일이 올바르게 서명되고 올바른 라이선스 파일이 설치되었는지 확인합니다. |
| -2147023293 | 설치하는 동안 심각한 오류가 발생했습니다. 대부분의 경우 그렇습니다. EPP.msi에서 AM 서비스 또는 미니 필터 드라이버를 등록\시작\중지할 수 없습니다. | 향후 조사를 위해 EPP.msi의 MSI 로그가 필요합니다. |
| -2147023277 | 설치 패키지를 열 수 없습니다. | 패키지가 있고 액세스 가능한지 확인하거나, 애플리케이션 공급업체에 문의하여 올바른 Windows Installer 패키지인지 확인합니다. |
| -2147156109 | Defender가 필수 구성 요소로 필요합니다. |  |
| -2147205073 | websso 발급자가 지원되지 않습니다. | |
| -2147024893 | 시스템에서 지정한 경로를 찾을 수 없습니다. |  |
| -2146885619 | 암호화 메시지가 아니거나 암호화 메시지의 형식이 잘못되었습니다. |  |
| -1073741819 | 0x%p의 명령에서 0x%p의 메모리를 참조했습니다. 메모리는 %s일 수 없습니다. |  |
| 1 | 잘못된 함수입니다. |  |


### <a name="support"></a>지원

이 문서의 어디에서든 도움이 필요한 경우 [MSDN Azure 및 Stack Overflow 포럼](https://azure.microsoft.com/support/forums/)에서 Azure 전문가에게 문의할 수 있습니다. 또는 Azure 기술 지원 인시던트를 제출할 수 있습니다. [Azure 지원 사이트](https://azure.microsoft.com/support/options/)로 이동하여 [지원 받기]를 선택하세요. Azure 지원을 사용하는 방법에 대한 자세한 내용은 [Microsoft Azure 지원 FAQ](https://azure.microsoft.com/support/faq/)를 참조하세요.
