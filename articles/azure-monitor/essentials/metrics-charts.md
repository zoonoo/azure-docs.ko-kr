---
title: Azure 메트릭 탐색기의 고급 기능
description: Azure 메트릭 탐색기의 고급 사용에 대해 알아봅니다.
author: vgorbenko
services: azure-monitor
ms.topic: conceptual
ms.date: 01/22/2019
ms.author: vitalyg
ms.openlocfilehash: 8564f96ad311a07ccf4582f274e44e6ebd1e0c85
ms.sourcegitcommit: 02d443532c4d2e9e449025908a05fb9c84eba039
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 05/06/2021
ms.locfileid: "108758526"
---
# <a name="advanced-features-of-the-azure-metrics-explorer"></a>Azure 메트릭 탐색기의 고급 기능

> [!NOTE]
> 이 문서에서는 Azure Monitor의 Azure 메트릭 탐색기의 기본 기능에 대해 잘 알고 있다고 가정합니다. 신규 사용자이고 첫 번째 메트릭 차트를 만드는 방법을 알아보려면 [메트릭 탐색기 시작](./metrics-getting-started.md)을 참조하세요.

Azure Monitor에서 [메트릭](data-platform-metrics.md)은 시간이 지남에 따라 수집되고 저장되는 일련의 측정 값과 개수입니다. 메트릭은 표준("플랫폼"이라고도 함) 또는 사용자 지정일 수 있습니다. 

표준 메트릭은 Azure 플랫폼에서 제공됩니다. Azure 리소스의 상태 및 사용량 통계를 반영합니다. 

## <a name="resource-scope-picker"></a>리소스 범위 선택기
리소스 범위 선택기를 사용하면 단일 리소스 및 여러 리소스에 대한 메트릭을 볼 수 있습니다. 다음 섹션에서는 리소스 범위 선택기를 사용하는 방법을 설명합니다. 

### <a name="select-a-single-resource"></a>단일 리소스 선택
**Azure Monitor** 메뉴 또는 리소스 메뉴의 **모니터링** 섹션에서 **메트릭** 를 선택합니다. 그런 다음, **범위 선택** 을 선택하여 범위 선택기를 엽니다. 

범위 선택기를 사용하여 메트릭을 보려는 리소스를 선택합니다. 리소스 메뉴에서 Azure 메트릭 탐색기를 연 경우 범위를 채워야 합니다. 

![리소스 범위 선택기를 여는 방법을 보여주는 스크린샷](./media/metrics-charts/scope-picker.png)

일부 리소스는 리소스 메트릭을 한 번에 하나만 볼 수 있습니다. 이러한 리소스는 **리소스 종류** 메뉴에서 **모든 리소스 종류** 섹션에 있습니다.

![단일 리소스를 보여주는 스크린샷](./media/metrics-charts/single-resource-scope.png)

리소스를 선택하면 해당 리소스를 포함하는 모든 구독과 리소스 그룹이 표시됩니다.

![사용 가능한 리소스를 보여주는 스크린샷](./media/metrics-charts/available-single-resource.png)

> [!TIP]
> 여러 리소스에 대한 메트릭을 동시에 보거나 구독 또는 리소스 그룹의 메트릭을 볼 수 있는 기능이 필요하면 **찬성** 을 선택합니다.

선택이 완료되면 **적용** 을 선택합니다.

### <a name="view-metrics-across-multiple-resources"></a>여러 리소스에 대한 메트릭 보기
일부 리소스 종류는 여러 리소스에 대한 메트릭을 쿼리할 수 있습니다. 리소스는 동일한 구독 및 위치 내에 있어야 합니다. 이러한 리소스 종류는 **리소스 종류** 메뉴의 맨 위에서 찾을 수 있습니다. 

자세한 내용은 [여러 리소스 선택](./metrics-dynamic-scope.md#select-multiple-resources)을 참조하세요.

![교차 리소스 종류를 보여주는 스크린샷](./media/metrics-charts/multi-resource-scope.png)

여러 리소스와 호환되는 종류의 경우 구독 또는 여러 리소스 그룹에서 메트릭에 대해 쿼리할 수 있습니다. 자세한 내용은 [리소스 그룹 또는 구독 선택](./metrics-dynamic-scope.md#select-a-resource-group-or-subscription)을 참조하세요.

## <a name="multiple-metric-lines-and-charts"></a>여러 메트릭 선 및 차트

Azure 메트릭 탐색기에서 여러 메트릭 선을 그리는 차트를 만들거나 동시에 여러 메트릭 차트를 표시할 수 있습니다. 이 기능을 통해 다음을 수행할 수 있습니다.

- 동일한 그래프에서 관련 메트릭의 상관 관계를 설정하여 한 값이 다른 값과 어떻게 관련되는지 확인합니다.
- 서로 다른 측정 단위를 사용하는 메트릭을 가까이 표시합니다.
- 여러 리소스의 메트릭을 시각적으로 집계하고 비교합니다.

예를 들어 5개의 스토리지 계정이 있고 이들이 함께 사용하는 공간의 크기를 알아보려 한다고 가정해 보겠습니다. 개별 값과 특정 시점의 모든 값의 합계를 보여주는 (누적) 영역 차트를 만들 수 있습니다.

### <a name="multiple-metrics-on-the-same-chart"></a>동일한 차트의 여러 메트릭

동일한 차트에서 여러 메트릭을 보려면 먼저 [새 차트를 만듭니다](./metrics-getting-started.md#create-your-first-metric-chart). 그런 다음, **메트릭 추가** 를 선택합니다. 동일한 차트에 다른 메트릭을 추가하려면 이 단계를 반복합니다.

> [!NOTE]
> 일반적으로 차트는 다른 측정 단위를 사용하는 메트릭을 혼합해서는 안 됩니다. 예를 들어 밀리초를 사용하는 하나의 메트릭과 킬로바이트를 사용하는 다른 메트릭을 혼합하지 마십시오. 또한 척도가 상당히 다른 메트릭을 혼합하지 마십시오. 
>
> 이런 경우에는 대신 여러 차트를 사용하는 것이 좋습니다. 메트릭 탐색기에서 **새 차트** 를 선택하여 새 차트를 만듭니다.

![여러 메트릭을 보여주는 스크린샷.](./media/metrics-charts/multiple-metrics-chart.png)

### <a name="multiple-charts"></a>여러 차트

다른 메트릭을 사용하는 다른 차트를 만들려면 **새 차트** 를 선택합니다.

여러 차트의 순서를 변경하거나 삭제하려면 줄임표( **...** ) 단추를 선택하여 차트 메뉴를 엽니다. 그런 다음, **위로 이동**, **아래로 이동** 또는 **삭제** 를 선택합니다.

![여러 차트를 보여주는 스크린샷.](./media/metrics-charts/multiple-charts.png)

## <a name="time-range-controls"></a>시간 범위 컨트롤

[시간 선택 패널](metrics-getting-started.md#select-a-time-range)을 사용하여 시간 범위를 변경하는 것 외에도 차트 영역의 컨트롤을 사용하여 이동 및 확대/축소할 수 있습니다.
### <a name="pan"></a>이동

이동하려면 차트 가장자리의 왼쪽 및 오른쪽 화살표를 클릭합니다.  그러면 선택한 시간 범위가 차트의 시간 범위 절반만큼 앞뒤로 이동합니다.  예를 들어 지난 24시간을 보고 있는 경우 왼쪽 화살표를 클릭하면 시간 범위가 하루 반에서 12시간 전으로 이동합니다.

대부분의 메트릭은 93일 보존을 지원하지만 한 번에 30일만 볼 수 있습니다.  이동 컨트롤을 사용하면 지난 30일을 확인한 다음, 한 번에 15일을 뒤로 쉽게 돌아가서 나머지 보존 기간을 확인할 수 있습니다.

![왼쪽 및 오른쪽 이동 컨트롤을 보여주는 애니메이션 gif](./media/metrics-charts/metrics-pan-controls.gif)

### <a name="zoom"></a>확대/축소

차트를 클릭하고 끌어서 차트의 섹션을 확대할 수 있습니다.  확대/축소는 선택 범위에 맞게 차트의 시간 범위를 업데이트하며 시간 단위를 "자동"으로 설정한 경우 더 작은 시간 단위가 선택됩니다.  새 시간 범위는 메트릭의 모든 차트에 적용됩니다.

![메트릭 확대/축소 기능을 보여주는 애니메이션 gif](./media/metrics-charts/metrics-zoom-control.gif)

## <a name="aggregation&quot;></a>집계

차트에 메트릭을 추가하면 메트릭 탐색기에서 기본 집계가 자동으로 적용됩니다. 기본 시나리오에서는 기본값을 사용하는 것이 좋습니다. 하지만 다른 집계를 사용하여 메트릭에 대해 더 많은 인사이트를 얻을 수 있습니다. 

차트에서 다른 집계를 사용하기 전에 메트릭 탐색기에서 집계가 처리되는 방식을 이해해야 합니다. 메트릭은 일정 기간 동안 캡처된 일련의 측정값(또는 &quot;메트릭 값")입니다. 차트를 그리면 선택한 메트릭의 값이 시간 단위에 걸쳐 개별적으로 집계됩니다. 

시간 단위의 크기는 메트릭 탐색기의 [시간 선택 패널](./metrics-getting-started.md#select-a-time-range)을 사용하여 선택합니다. 시간 단위를 명시적으로 선택하지 않으면 현재 선택한 시간 범위가 기본적으로 사용됩니다. 시간 단위를 결정한 후에는 각 시간 단위 중 캡처된 메트릭 값이 시간 단위당 하나의 데이터 요소로 차트에 집계됩니다.

예를 들어 차트에 서버 응답 시간 메트릭이 표시되어 있다고 가정합니다. 지난 24시간 동안의 시간 범위에 대한 평균 집계를 사용합니다.  이 예제에서는 다음이 적용됩니다.

- 시간 세분성이 30분으로 설정된 경우 48개 집계 데이터 요소에서 차트가 그려집니다. 즉, 꺾은선형 차트는 차트 그림 영역에서 48개의 점을 연결합니다(24시간 x 시간당 2개의 데이터 요소). 각 데이터 요소는 각각의 관련 30분 기간 동안 발생한 서버 요청에 대해 캡처된 모든 응답 시간의 평균을 나타냅니다.
- 시간 세분성을 15분으로 전환하면 집계 데이터 요소가 96개 표시됩니다.  즉, 24시간 x 시간당 4개의 데이터 요소를 얻습니다.

메트릭 탐색기에는 5가지 기본 통계 집계 형식인 합계, 개수, 최소, 최대 및 평균이 있습니다. 합계 집계는 총 집계라고도 합니다.  메트릭 탐색기는 대부분의 메트릭에 대해 관련이 없고 사용할 수 없는 집계를 숨깁니다.

* **합계**: 집계 간격 중에 캡처된 모든 값의 합계입니다.

    ![합계 요청의 스크린샷](./media/metrics-charts/request-sum.png)

* **개수**: 집계 간격 중에 캡처된 측정 수입니다. 
    
    메트릭이 항상 값 1로 캡처되면 개수 집계는 합계 집계와 같습니다. 이 시나리오는 메트릭이 개별 이벤트의 수를 추적하고 각 측정은 하나의 이벤트를 나타내는 경우 일반적입니다. 코드는 새 요청이 도착할 때마다 메트릭 레코드를 내보냅니다.

    ![개수 요청의 스크린샷](./media/metrics-charts/request-count.png)

* **평균**: 집계 간격 중에 캡처된 메트릭 값의 평균입니다.

    ![평균 요청의 스크린샷](./media/metrics-charts/request-avg.png)

* **최소**: 집계 간격 중에 캡처된 가장 작은 값입니다.

    ![최소 요청의 스크린샷](./media/metrics-charts/request-min.png)

* **최대**: 집계 간격 중에 캡처된 가장 큰 값입니다.

    ![최대 요청의 스크린샷](./media/metrics-charts/request-max.png)

## <a name="filters"></a>필터

필터는 메트릭에 차원이 있는 차트에 적용할 수 있습니다. 예를 들어 "응답 형식" 차원이 있는 "트랜잭션 개수" 메트릭을 생각해 보겠습니다. 이 차원은 트랜잭션의 응답이 성공했는지 아니면 실패했는지를 나타냅니다. 이 차원을 기준으로 필터링하면 성공한(또는 실패한) 트랜잭션만 표시하는 차트 선이 표시됩니다. 

### <a name="add-a-filter"></a>필터 추가

1. 차트 위에서 **필터 추가** 를 선택합니다.

2. 필터링할 차원(속성)을 선택합니다.

   ![필터링할 수 있는 차원(속성)을 보여주는 스크린샷](./media/metrics-charts/028.png)

3. 차원(속성)에 적용할 연산자를 선택합니다. 기본 연산자는 =(같음)입니다.

   ![필터에 사용할 수 있는 연산자를 보여주는 스크린샷](./media/metrics-charts/filter-operator.png)

4. 차트를 그릴 때 필터에 적용할 차원 값을 선택합니다(이 예제에서는 성공적인 스토리지 트랜잭션을 필터링하도록 표시함).

   ![필터링된 스토리지 트랜잭션을 보여주는 스크린샷](./media/metrics-charts/029.png)

5. 필터 값을 선택한 후에 필터 선택기를 닫으려면 바깥쪽을 클릭합니다. 이제 차트에서는 실패한 스토리지 트랜잭션 수를 보여줍니다.

   ![실패한 스토리지 트랜잭션 수를 보여주는 스크린샷](./media/metrics-charts/030.png)

6. 동일한 차트에 여러 필터를 적용하려면 1~5단계를 반복하면 됩니다.


## <a name="metric-splitting"></a>메트릭 분할

차원별로 메트릭을 분할하여 메트릭의 서로 다른 세그먼트가 어떻게 비교되는지 시각화할 수 있습니다. 분할을 통해 차원의 외부 세그먼트를 식별할 수도 있습니다.

### <a name="apply-splitting"></a>분할 적용

1. 차트 위에서 **분할 적용** 을 선택합니다.
 
   > [!NOTE]
   > 여러 메트릭이 있는 차트는 분할 기능을 사용할 수 없습니다. 또한 차트에 여러 필터가 있을 수 있지만 분할 차원은 하나만 있을 수 있습니다.

2. 차트를 구분할 차원을 선택합니다.

   ![차트를 구분할 기준으로 선택한 차원을 보여주는 스크린샷](./media/metrics-charts/031.png)

   이제 차트에 여러 줄이(각 차원 세그먼트에 대해 하나씩) 표시됩니다.

   ![차원의 각 세그먼트에 대해 하나씩 여러 줄을 보여주는 스크린샷](./media/metrics-charts/segment-dimension.png)
   
3. 선택한 차원으로 분할한 후 표시할 값 수에 대한 제한을 선택합니다. 기본 제한은 위의 차트에 표시된 대로 10입니다. 제한 범위는 1~50입니다.
   
   ![분할 후 값의 수를 제한하는 분할 제한을 보여주는 스크린샷](./media/metrics-charts/segment-dimension-limit.png)
   
4. 세그먼트의 정렬 순서(오름차순 또는 내림차순)를 선택합니다. 기본 선택은 내림차순입니다.
   
   ![분할 값에 대한 정렬 순서를 보여주는 스크린샷](./media/metrics-charts/segment-dimension-sort.png)

5. **그룹화 선택기** 를 닫으려면 바깥쪽을 클릭합니다.
   

   > [!NOTE]
   > 시나리오와 관련이 없는 세그먼트를 숨겨서 차트를 읽기 쉽게 만들려면 동일한 차원에서 필터링과 분할을 모두 사용합니다.

## <a name="locking-the-range-of-the-y-axis"></a>y-축 범위 잠그기

값(y) 축 범위 잠그기는 큰 값의 작은 변동을 보여주는 차트에서 중요합니다. 

예를 들어, 성공한 요청의 볼륨이 99.99%에서 99.5%로 하락하는 경우 서비스 품질이 상당히 저하된 것을 나타냅니다. 하지만 기본 차트 설정을 사용면 작은 숫자 값 변동을 알아차리기 어렵거나 불가능할 수도 있습니다. 이런 경우 차트의 최하위 경계를 99%로 잠그면 작은 하락을 더 잘 식별할 수 있습니다. 

또 다른 예는 사용 가능한 메모리의 변동입니다. 이 시나리오에서 값은 기술적으로 0에 도달하지 않습니다. 범위를 더 높은 값으로 고정하면 사용 가능한 메모리의 하락을 더 쉽게 발견할 수 있습니다. 

y-축 범위를 제어하려면 차트 메뉴( **...** )를 엽니다. 그런 다음, **차트 설정을** 선택하여 고급 차트 설정에 액세스합니다.

![차트 설정 선택이 강조 표시된 스크린샷](./media/metrics-charts/033.png)

**y-축 범위** 섹션에서 값을 수정하거나 **자동** 을 선택하여 기본값으로 되돌립니다.
 
 ![y-축 범위 섹션이 강조 표시된 스크린샷](./media/metrics-charts/034.png)

> [!WARNING]
> 일정 기간 동안 개수 또는 합계를 추적하는(개수, 합계, 최소 또는 최대 집계를 사용) 차트에서 y-축 경계를 잠가야 하는 경우에는 일반적으로 고정 시간 단위를 지정해야 합니다. 이런 경우 자동 기본값에 의존해서는 안 됩니다. 
>
> 고정 시간 단위를 선택해야 하는 이유는 사용자가 브라우저 창 크기를 조정하거나 화면 해상도를 변경한 후 시간 단위가 자동으로 수정되면 차트 값이 변경되기 때문입니다. 이로 인해 시간 단위가 변경되면 차트 모양에 영향을 주고 현재 선택한 y-축 범위가 무효화됩니다.

## <a name="line-colors"></a>선 색

차트를 구성한 후에는 차트 선에 기본 색상표의 색이 자동으로 할당됩니다. 이러한 색은 변경할 수 있습니다.

차트 선의 색을 변경하려면 차트에 해당하는 범례에서 색이 지정된 막대를 선택합니다. 색 선택 대화 상자가 열립니다. 색 선택기를 사용하여 선 색을 구성합니다.

![색 변경 방법을 보여주는 스크린샷](./media/metrics-charts/035.png)

사용자 지정한 색은 차트를 대시보드에 고정하면 유지됩니다. 다음 섹션에서는 차트를 고정하는 방법을 보여줍니다.

## <a name="pinning-to-dashboards"></a>대시보드에 고정하기 

차트를 구성한 후에는 대시보드에 추가하는 것이 좋습니다. 차트를 대시보드에 고정하면 팀이 액세스할 수 있도록 만들 수 있습니다. 다른 모니터링 원격 분석 데이터의 맥락에서 확인하여 인사이트를 얻을 수도 있습니다.

구성한 차트를 대시보드에 고정하려면 차트의 오른쪽 위 모서리에서 **대시보드에 고정** 을 선택합니다.

![차트를 대시보드에 고정하는 방법을 보여주는 스크린샷](./media/metrics-charts/036.png)

## <a name="alert-rules"></a>경고 규칙

시각화 기준을 사용하여 메트릭 기반 경고 규칙을 만들 수 있습니다. 새 경고 규칙에는 차트의 대상 리소스, 메트릭, 분할 및 필터 차원이 포함됩니다. 이러한 설정은 경고 규칙 만들기 창을 사용하여 수정할 수 있습니다.

시작하려면 **새 경고 규칙** 을 선택합니다.

![빨간색으로 강조 표시된 새 경고 규칙 단추를 보여주는 스크린샷](./media/metrics-charts/042.png)

경고 규칙 만들기 창이 열립니다. 창에 차트의 메트릭 차원이 표시됩니다. 창의 필드는 규칙을 사용자 지정하는 데 도움이 되도록 미리 채워져 있습니다.

![규칙 만들기 창을 보여주는 스크린샷](./media/metrics-charts/041.png)

자세한 내용은 [메트릭 경고 만들기, 보기 및 관리](../alerts/alerts-metric.md)를 참조하세요.

## <a name="correlate-metrics-to-logs"></a>메트릭과 로그의 상관 관계 지정
메트릭 차트에서 고객이 이상 징후의 근본 원인을 진단하는 데 도움이 되도록 로그 상세 검색 기능이 준비되어 있습니다. 로그 상세 검색을 통해 고객은 메트릭 차트의 급증과 로그 및 쿼리의 상관 관계를 지정할 수 있습니다. 

경험을 시작하기 전에, 제공된 다양한 유형의 로그 및 쿼리를 먼저 소개해 드리겠습니다. 

| 용어             | 정의  | 
|------------------|-------------|
| 활동 로그    | Service Health 이벤트 업데이트 외에도 외부(관리 평면)에서 구독의 각 Azure 리소스 작업을 위한 인사이트를 제공합니다. 활동 로그를 사용하면 구독의 리소스에 대한 쓰기 작업(PUT, POST, DELETE)이 무엇이며 누가 언제 수행했는지 판단할 수 있습니다. Azure 구독마다 하나의 활동 로그가 있습니다.  |   
| 진단 로그   | Azure 리소스(데이터 평면) 내에서 수행된 작업(예: Key Vault에서 비밀 가져오기 또는 데이터베이스에 요청)에 대한 인사이트를 제공합니다. 이러한 로그의 내용은 Azure 서비스와 리소스 종류에 따라 달라집니다. **참고:** 서비스에서 제공하고 고객이 사용하도록 설정해야 합니다.  | 
| 권장 로그 | 고객이 메트릭 탐색기에서 이상 징후를 조사하는 데 활용할 수 있는 시나리오 기반 쿼리입니다.  |

현재 로그 상세 검색은 엄선된 리소스 공급자가 사용할 수 있습니다. 전체 로그 상세 검색 환경이 포함된 리소스 공급자는 다음과 같습니다. 

* Application Insights 
* 자동 크기 조정 
* App Services  
* 스토리지  

다음은 Application Insights 리소스 공급자용 샘플 환경입니다.

![App insights 메트릭 블레이드의 실패 급증](./media/metrics-charts/drill-into-log-ai.png)

실패한 요청의 급증을 진단하려면 "로그 상세 검색"을 클릭합니다.

![로그 상세 검색 드롭다운의 스크린샷](./media/metrics-charts/drill-into-logs-dropdown.png)

실패 옵션을 클릭하면 작업 실패 작업, 주요 예외 형식 및 종속성을 제공하는 사용자 지정 실패 블레이드로 이동합니다. 

![App Insights 실패 블레이드의 스크린샷](./media/metrics-charts/ai-failure-blade.png)

### <a name="common-problems-with-drill-into-logs"></a>로그 상세 검색의 일반적인 문제

* 로그 및 쿼리를 사용할 수 없음 - 권장 로그 및 쿼리를 보려면 진단 로그를 Log Analytics로 라우팅해야 합니다. 이 작업을 수행하는 방법은 [이 문서](./diagnostic-settings.md)를 참조하세요. 
* 활동 로그만 제공됨 - 로그 상세 검색 기능은 엄선된 리소스 공급자만 사용할 수 있습니다. 기본적으로 활동 로그가 제공됩니다. 

 
## <a name="troubleshooting"></a>문제 해결

차트에 데이터가 표시되지 않으면 다음 문제 해결 정보를 검토하세요.

* 필터는 창의 모든 차트에 적용됩니다. 차트에 집중하는 동안 다른 차트의 모든 데이터를 제외하는 필터를 설정하지 않았는지 확인합니다.

* 다른 차트에 다른 필터를 설정하려면 다른 블레이드에서 차트를 만듭니다. 그런 다음, 차트를 별도의 즐겨 찾기로 저장합니다. 원하면 차트를 대시보드에 고정하여 함께 볼 수 있습니다.

* 메트릭이 정의하지 않는 속성을 기준으로 차트를 구분하면 차트에 콘텐츠가 표시되지 않습니다. 분할(분리)한 속성을 지워 보거나 다른 속성을 선택합니다.

## <a name="next-steps"></a>다음 단계

메트릭을 사용하여 실행 가능한 대시보드를 만들려면 [사용자 지정 KPI 대시보드 만들기](../app/tutorial-app-dashboards.md)를 참조하세요.
