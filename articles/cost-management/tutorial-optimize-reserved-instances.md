---
title: 자습서 - Azure의 Cloudyn을 사용하여 예약 인스턴스 비용 최적화 | Microsoft Docs
description: 이 자습서에서는 Azure 및 AWS(Amazon Web Services)에 대한 예약 인스턴스 비용을 최적화하는 방법을 알아봅니다.
services: cost-management
keywords: ''
author: bandersmsft
ms.author: banders
ms.date: 03/18/2019
ms.topic: tutorial
ms.service: cost-management
ms.custom: seodec18
manager: benshy
ms.openlocfilehash: a9c6e99d3eff14c364d5eba3e6256382f9df6bc4
ms.sourcegitcommit: 5839af386c5a2ad46aaaeb90a13065ef94e61e74
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/19/2019
ms.locfileid: "58182713"
---
<!-- Intent: As a cloud-consuming administrator, I need to ensure that my reserved instances are optimized for cost and usage
-->

# <a name="tutorial-optimize-reserved-instances"></a>자습서: 예약 인스턴스 최적화

이 자습서에서는 Cloudyn을 사용하여 Azure 및 AWS(Amazon Web Services)에 대한 예약 인스턴스 비용 및 사용률을 최적화하는 방법을 알아봅니다. 두 클라우드 서비스 공급자 중 하나와 예약된 인스턴스는 나중에 VM을 사용하기 위해 선불로 약정한 장기 계약에 대한 약속입니다. 또한 잠재적으로 표준 사용량 기준 과금 VM 가격 책정 모델에 비해 상당한 절약 효과를 제공할 수 있습니다. 예약 인스턴스의 용량을 완전히 사용하는 경우에만 잠재적 절약 효과가 실현됩니다.

이 자습서에서는 Cloudyn을 통해 Azure 및 AWS RI(예약 인스턴스)를 지원하는 방법에 대해 설명합니다. 또한 예약 인스턴스 비용을 최적화할 수 있는 방법도 설명합니다. 주로 예약이 완전히 활용되도록 보장합니다. 이 자습서에서는 다음을 수행합니다.

> [!div class="checklist"]
> * Azure RI 비용 이해
> * RI 혜택에 대해 자세히 알아보기
> * Azure RI 비용 최적화
> * RI 비용 보기
> * Azure RI 비용 효율성 평가
> * AWS RI 비용 최적화
> * 권장 RI 구매
> * 사용되지 않는 예약 수정

Azure 구독이 아직 없는 경우 시작하기 전에 [무료 계정](https://azure.microsoft.com/free/?WT.mc_id=A261C142F)을 만듭니다.

## <a name="prerequisites"></a>필수 조건

- Azure 계정이 있어야 합니다.
- Cloudyn에 대한 평가판 등록 또는 유료 구독이 있어야 합니다.
- Azure 또는 AWS에서 RI를 구매해야 합니다.

## <a name="understand-azure-ri-costs"></a>Azure RI 비용 이해

Azure Reserved VM Instances를 구매하는 경우 나중에 사용하기 위해 선불로 지불합니다. 선불 결제에는 나중에 다음과 같이 사용되는 VM에 대한 비용이 포함됩니다.

- 특정 유형의
- 특정 지역에서
- 1년 또는 3년 기간 동안
- 구매한 VM 수량까지

구매한 Azure Reserved VM Instances는 Azure Portal의 [예약](https://portal.azure.com/#blade/Microsoft_Azure_Reservations/ReservationsBrowseBlade)에서 확인할 수 있습니다.

_Azure Reserved VM Instance_라는 용어는 가격 책정 모델에만 적용됩니다. 실행 중인 VM은 전혀 변경되지 않습니다. 이 용어는 Azure에만 적용되며, 더 일반적으로 _예약 인스턴스_ 또는 _예약_이라고 합니다. 구매한 예약 인스턴스는 특정 VM에 적용되는 것이 아니라 일치하는 VM에 적용됩니다. 예를 들어 구매한 예약에 대해 선택한 지역에서 실행되는 VM 유형에 대한 예약입니다.

구매한 예약 인스턴스는 기본 하드웨어에만 적용됩니다. VM의 소프트웨어 라이선스는 포함되지 않습니다. 예를 들어 인스턴스를 예약하고 일치하는 VM에서 Windows를 실행하고 있을 수 있습니다. 예약 인스턴스에는 VM에 대한 기본 비용만 포함됩니다. 이 예에서는 필요한 Windows 라이선스의 전체 가격을 지불합니다. 운영 체제 또는 VM에서 실행되는 다른 소프트웨어에 대한 할인을 받으려면 [Azure 하이브리드 혜택](https://azure.microsoft.com/pricing/hybrid-benefit)을 사용하는 것이 좋습니다. 하이브리드 혜택에서는 기본 VM에 대해 예약 인스턴스에서 적용하는 것과 마찬가지로 소프트웨어 라이선스에 대해 비슷한 유형의 할인을 제공합니다.

예약 인스턴스 사용률은 비용에 직접적인 영향을 주지 않습니다. 즉, 100% CPU 사용률 또는 0% CPU 사용률로 VM을 실행하는 경우, 실제 사용량이 아닌 VM 할당에 대해 미리 지불하는 동일한 효과가 있습니다.

다음 이미지에서 표준 요청 시 VM 사용량과 예약 인스턴스 관련 비용 사이의 관계를 살펴보겠습니다.

![요청 시 비용 대 예약 인스턴스 비용](./media/tutorial-optimize-reserved-instances/azure01.png)



빨간색 막대에는 예약 인스턴스 구매에 대한 누적 비용이 표시됩니다. 일시불 요금으로만 지불합니다. VM 사용량은 무료입니다. 파란색 막대에는 종량제 또는 요청 시 가격 책정 모델로 실행되는 동일한 VM에 대한 누적 비용이 표시됩니다. VM 사용량에 있어 7번째와 8번째 월 사이에 *손익 분기점*이 있습니다. 이 예에서는 8번째 달부터 비용을 절약하기 시작합니다.

## <a name="benefits-of-ris"></a>RI 혜택

모든 예약 인스턴스 구매는 특정 크기 및 위치의 VM에 적용됩니다. 예를 들어 다음 이미지와 같이 미국 서부 위치에서 실행되는 D2s\_v3이 있습니다.

![Azure 예약 인스턴스 세부 정보](./media/tutorial-optimize-reserved-instances/azure02.png)

VM이 예약 손익 분기점에 도달하는 데 충분한 시간이 걸리는 경우 예약 인스턴스 구매가 유용합니다. VM은 예약 인스턴스의 크기 및 위치와 일치해야 합니다. 예를 들어 손익 분기점은 위의 차트에서 약 7.5개월 정도에 있습니다. 따라서 예약과 일치하는 VM이 적어도 7.5개월 \* 30일 \* 24시간 = 5,400시간 실행되는 경우에 구매하는 것이 좋습니다. 일치하는 VM이 5,400시간 미만으로 실행되는 경우 예약은 종량제보다 더 비쌉니다.

손익 분기점은 각 VM 크기 및 각 위치마다 다를 수 있습니다. 또한 협상된 VM 종량제 가격에 따라서도 달라집니다. 구매하기 전에 자신의 사례에 해당하는 손익 분기점을 확인해야 합니다.

예약을 구매할 때 고려해야 하는 또 다른 요소는 예약 인스턴스 범위입니다. 범위는 예약 혜택이 공유되는지, 아니면 특정 구독에 적용되는지 여부를 결정합니다. 공유 예약 인스턴스는 처음 발견된 일치하는 VM에 대한 모든 구독에서 임의로 적용됩니다.

공유 구매 범위가 가장 유연하며 가능할 때마다 권장됩니다. 모든 예약 인스턴스를 사용할 가능성은 공유 범위에서 훨씬 더 높습니다. 그러나 구독 소유자가 예약 인스턴스에 대해 지불하는 경우 단일 구독 범위로만 구매해야 합니다.

## <a name="optimize-azure-ri-costs"></a>Azure RI 비용 최적화

Cloudyn에서 지원하는 예약 인스턴스 및 하이브리드 혜택은 다음과 같습니다.

- 가격 책정 모델과 관련된 비용 표시
- RI 사용량 추적
- RI 영향 평가
- 정책에 따라 RI 비용 할당

예약 인스턴스를 구매하기 전에 수행해야 하는 첫 번째 작업은 다음과 같이 RI 구매의 영향을 평가하는 것입니다.

- 비용은 얼마입니까?
- 어느 정도 절약할 수 있습니까?
- 손익 분기점은 무엇입니까?

예약 인스턴스 구매 영향 보고서는 이러한 질문에 대답하는 데 도움이 될 수 있습니다.

## <a name="assess-azure-ri-cost-effectiveness"></a>Azure RI 비용 효율성 평가

Cloudyn 포털에서 **최적화 프로그램** > **RI 비교**로 차례로 이동한 다음, **예약 인스턴스 구매 영향**을 선택합니다.

예약 인스턴스 구매 영향 보고서에서 VM 크기(인스턴스 유형), 위치(지역), 예약 기간, 수량 및 예상 런타임을 선택합니다. 그러면 구매에서 비용을 절약할 수 있는지 평가할 수 있습니다.

예를 들어 미국 동부에서 DS1\_v2 유형의 VM에 대한 예약을 구매하고 연중 무휴로 실행하는 경우 연간 369.48달러를 절약할 수 있습니다. 손익 분기점은 5개월입니다. 다음 이미지를 참조하세요.

![Azure 예약 인스턴스 손익 분기점](./media/tutorial-optimize-reserved-instances/azure03.png)

그러나 50%만 실행하는 경우 손익 분기점은 10개월이며 절약 비용은 연간 49.74달러에 불과합니다. 이 예에서 해당 인스턴스 유형에 대한 예약을 구매하면 도움이 되지 않을 수 있습니다. 다음 이미지를 참조하세요.

![Azure VM의 손익 분기점 예](./media/tutorial-optimize-reserved-instances/azure04.png)

## <a name="view-ri-costs"></a>RI 비용 보기

예약을 구매하는 경우 일시불로 지불합니다. Cloudyn에서 결제를 확인하는 데는 두 가지 방법이 있습니다.

- 실제 비용
- 분할 상환 비용

### <a name="actual-reserved-instance-cost"></a>실제 예약 인스턴스 비용

실제 비용 분석 및 시간 경과별 분석 보고서에는 구매 월에 시작하여 예약에 대해 지불한 전체 금액이 표시됩니다. 한 기간 동안 실제로 지출한 금액을 확인하는 데 도움이 됩니다.

Cloudyn 포털에서 **비용** > **비용 분석**으로 이동한 다음, **실제 비용 분석** 또는 **시간 경과별 실제 비용** 중 하나를 선택합니다. 다음으로, 필터를 설정합니다. 예를 들어 Azure/VM 서비스만 필터링하고 리소스 종류 및 가격 모델별로 그룹화합니다. 다음 이미지를 참조하세요.

![예약 인스턴스의 실제 비용 예](./media/tutorial-optimize-reserved-instances/azure05.png)

이 예에서 서비스, 즉 **Azure/VM** 기준으로 필터링하고, 다음 이미지와 같이 **가격 모델** 및 **리소스 종류** 기준으로 그룹화할 수 있습니다.

![가격 모델 및 리소스 종류별로 그룹화된 실제 비용 보고서 그룹 및 필터의 예](./media/tutorial-optimize-reserved-instances/azure06.png)

일시불 요금, 사용량 요금 및 라이선스 요금과 같은 지불 유형을 분석할 수도 있습니다.

### <a name="amortized-reserved-instance-cost"></a>분할 상환 예약 인스턴스 비용

RI 구매 시 구매 월에 표시되는 선불 요금을 지불합니다. 후속 청구서에는 표시되지 않습니다. 따라서 월간 사용량을 살펴보면 오해할 수 있는 여지가 있습니다. 월 비용은 실제로 월별 사용량과 이전에 만든 일시불 요금에 대한 비례(분할 상환) 부분을 합한 금액으로 계산됩니다. 분할 상환 비용 보고서는 진정한 그림을 얻는 데 도움이 될 수 있습니다.

분할 상환 예약 인스턴스 비용은 예약 일시불 요금을 가져와서 예약 기간에 대해 분할하여 계산됩니다. 실제 비용 보고서에서 일시불 요금은 예약 구매 월에 표시됩니다. 일별 및 월별 지출은 실제 배포 비용에 표시되지 않습니다. 분할 상환 비용 보고서에는 시간 경과에 따른 실제 배포 비용이 표시됩니다.  분할 상환 비용 보고서는 실제 비용 추세를 확인할 수 있는 유일한 방법입니다. 또한 미래 지출을 계획할 수 있는 유일한 방법이기도 합니다.

실제 비용 보고서에서 11월 16일 747달러의 RI 구매에 대한 스파이크를 살펴보았습니다. 분할 상환 비용 보고서(다음 이미지 참조)에서 11월 16일에는 부분적인 일별 비용이 있습니다. 11월 17일부터는 747달러 / 365 = 2.05달러의 분할 상환 RI 비용이 있습니다. 그런데 구매한 예약은 사용되지 않으므로 다른 VM 크기로 전환하여 최적화할 수 있습니다.

이를 확인하려면 **비용** > **비용 분석**으로 이동한 다음, **분할 상환 비용 분석** 또는 **시간 경과별 분할 상환 비용**을 선택합니다.

![분할 상환 예약 인스턴스 비용을 보여 주는 보고서의 예](./media/tutorial-optimize-reserved-instances/azure07.png)

## <a name="optimize-aws-ri-costs"></a>AWS RI 비용 최적화

예약 인스턴스는 개방형 약정입니다. 예약 인스턴스는 요청 시 인스턴스보다 저렴하므로 VM을 지속적으로 사용하는 경우에 유용하지만 충분히 사용해야 합니다. 이 약정은 1년 또는 3년으로 정의된 기간 동안 리소스, 일반적으로 VM을 사용한다는 것입니다. 구매를 약정하는 경우 예약된 리소스에 대해 선불로 지불합니다. 그러나 예약 시 약정한 대상을 항상 완전히 사용 하는 것은 아닙니다.

예를 들어 환경을 평가하고 지난 한 해 동안 지속적으로 실행되는 20개의 표준 D2 인스턴스가 있는지 확인할 수 있습니다. 이러한 인스턴스에 대한 예약을 구매하는 한편, 잠재적으로 상당한 비용을 절약할 수 있습니다. 다른 예로 한 해 동안 10개의 MA4 인스턴스를 사용하도록 약정했지만, 지금까지 5개만 사용했을 수도 있습니다. 두 예의 경우 모두 비효율적인 RI 사용을 보여줍니다. Cloudyn 최적화 보고서를 사용하여 예약 인스턴스의 비용을 최적화하는 데는 두 가지 방법이 있습니다.

- 기록 사용량에 따라 구매할 수 있는 대상에 대한 구매 권장 사항 검토
- 사용되지 않는 예약 수정

_EC2 RI 구매 권장 사항_ 및 _EC2 현재 사용되지 않는 예약_ 보고서를 사용하여 예약 인스턴스 사용량 및 비용을 향상시킵니다.

## <a name="buy-recommended-ris"></a>권장 RI 구매

Cloudyn에서는 요청 시 인스턴스 사용량과 잠재적 예약 인스턴스를 비교합니다. 가능한 절약 효과가 있으면 해당 권장 사항이 EC2 구매 권장 사항 보고서에 표시됩니다.

포털 위쪽의 보고서 메뉴에서 **최적화 프로그램** > **가격 책정 최적화** > **EC2 RI 구매 권장 사항**을 차례로 클릭합니다.

다음 이미지에서는 보고서의 구매 권장 사항을 보여줍니다.

![EC2 구매 추천 사항 보고서에서 구매 추천 사항을 보여 주는 예](./media/tutorial-optimize-reserved-instances/aws01.png)

이 예에서 Cloudyn\_A 계정에는 32개 예약 인스턴스 구매 권장 사항이 있습니다. 모든 구매 권장 사항을 따르는 경우 잠재적으로 매년 137,770달러를 절약할 수 있습니다. Cloudyn에서 제공하는 구매 권장 사항은 실행되는 작업에 대한 사용량을 일관되게 유지한다고 가정하고 있음을 명심하세요.

각 구매가 권장되는 이유를 설명하는 세부 정보를 보려면 **근거** 아래의 더하기 기호(**+**)를 클릭합니다. 목록의 첫 번째 권장 사항에 대한 예는 다음과 같습니다.

![구매 근거 세부 정보를 보여 주는 예](./media/tutorial-optimize-reserved-instances/aws02.png)

위의 예에서는 요청 시 작업을 실행하는 경우 매년 90,456달러의 비용이 발생한다는 것을 보여줍니다. 그러나 예약을 미리 구매하는 경우 동일한 작업에 56,592달러의 비용이 들며 매년 33,864달러를 절약할 수 있습니다.

**EC2 RI 구매 영향** 옆에 있는 더하기 기호를 클릭하여 1년 동안의 손익 분기점을 확인함으로써 구매 투자가 실현되는 시기를 대략적으로 확인합니다. 다음 예에서는 구매한 후 약 8개월 동안의 요청 시 누적 비용이 RI 누적 비용을 초과하기 시작합니다.

![구매 영향 세부 정보를 보여 주는 예](./media/tutorial-optimize-reserved-instances/aws03.png)

해당 시점에서 비용을 절약하기 시작합니다.

**시간 경과별 인스턴스 수**를 검토하여 제안된 구매 권장 사항의 정확도를 확인할 수 있습니다. 다음 예에서는 지난 30일 기간 동안 평균 6개의 인스턴스가 작업에 사용되었음을 확인할 수 있습니다.

![시간 경과에 따른 인스턴스의 사용 내역을 보여 주는 예](./media/tutorial-optimize-reserved-instances/aws04.png)

## <a name="modify-unused-reservations"></a>사용되지 않는 예약 수정

사용되지 않은 예약은 많은 클라우드 리소스 소비자의 컴퓨팅 환경에서 일반적입니다. 사용되지 않는 예약을 완전히 사용되도록 하면 현재 요구 사항에 맞게 예약을 수정할 때 비용을 절약할 수 있습니다. 예를 들어 Linux에서 실행되는 표준 D3 인스턴스가 포함된 구독이 있을 수 있습니다. 예약을 완전히 활용하지 않을 경우 인스턴스 유형을 변경할 수 있습니다. 또는 사용되지 않는 리소스를 다른 예약 또는 다른 계정으로 이동할 수도 있습니다.

AWS는 특정 가용성 영역 및 지역에 대한 예약 인스턴스를 판매합니다. 특정 가용성 영역에 대한 예약 인스턴스를 구매한 경우 영역 간에 예약을 이동할 수 없습니다. 그러나 **EC2 현재 사용되지 않는 예약** 보고서를 사용하여 영역 간에 지역별 예약 인스턴스를 쉽게 이동할 수 있습니다. 또는 지역별 범위를 사용하도록 수정한 다음, 일치하는 인스턴스를 모든 가용성 영역에 적용할 수 있습니다.

포털 위쪽의 보고서 메뉴에서 **최적화 프로그램** > **비효율성** > **EC2 현재 사용되지 않는 예약**을 차례로 클릭합니다.

다음 이미지에서는 사용되지 않은 예약 인스턴스가 있는 보고서를 보여줍니다.

![사용되지 않은 예약에 대한 요약 정보를 보여 주는 예](./media/tutorial-optimize-reserved-instances/unused-ri01.png)

**세부 정보** 아래에서 더하기 기호를 클릭하여 특정 예약에 대한 예약 세부 정보를 확인합니다.

![사용되지 않은 예약 세부 정보를 보여 주는 예](./media/tutorial-optimize-reserved-instances/unused-ri02.png)

앞의 예에서 다양한 가용성 영역에 총 77개의 사용되지 않은 예약이 있습니다. 첫 번째 예약에는 51개의 사용되지 않은 인스턴스가 있습니다. 목록의 아래쪽을 살펴보면 **us-east-1c** 가용성 영역에서 **m3.2xlarge** 인스턴스 유형을 사용하여 수정할 수 있는 잠재적 예약 인스턴스가 있습니다.

목록의 첫 번째 예약에 대해 **수정**을 클릭하여 예약에 대한 데이터를 표시하는 **RI 수정** 페이지를 엽니다.

![수정할 수 있는 예약을 보여 주는 예](./media/tutorial-optimize-reserved-instances/unused-ri03.png)

수정할 수 있는 예약 인스턴스가 나열됩니다. 다음 예제 이미지에는 수정할 수 있는 51개의 사용되지 않은 예약이 있지만, 두 예약 간에는 54개가 필요합니다. 사용되지 않는 예약을 모두 사용할 수 있도록 수정하면 네 개의 인스턴스가 요청 시 계속 실행됩니다. 이 예에서는 첫 번째 예약에서 30을 사용하고 두 번째 예약에서 21을 사용하도록 사용되지 않는 예약을 분할했습니다.

첫 번째 예약 항목에 대한 더하기 기호를 클릭하고 **예약 수량**을 **30**으로 설정합니다. 두 번째 항목에 대해 예약 수량을 **21**로 설정하고 **적용**을 클릭합니다.

![예약 수량의 변경을 보여 주는 예](./media/tutorial-optimize-reserved-instances/unused-ri04.png)

사용되지 않는 모든 예약 인스턴스가 완전히 활용되고 51개의 인스턴스가 요청 시 더 이상 실행되지 않습니다. 이 예에서는 요청 시 사용을 크게 줄이고 이미 지불한 예약을 사용하여 조직 비용을 절약합니다.

## <a name="next-steps"></a>다음 단계

이 자습서에서는 다음 작업을 성공적으로 완료했습니다.

> [!div class="checklist"]
> * Azure RI 비용 이해
> * RI 혜택에 대해 자세히 알아보기
> * Azure RI 비용 최적화
> * RI 비용 보기
> * Azure RI 비용 효율성 평가
> * AWS RI 비용 최적화
> * 권장 RI 구매
> * 사용되지 않는 예약 수정


데이터에 대한 액세스를 제어하는 방법을 알아 보려면 다음 자습서로 진행하세요.

> [!div class="nextstepaction"]
> [데이터에 대한 액세스 제어](tutorial-user-access.md)
